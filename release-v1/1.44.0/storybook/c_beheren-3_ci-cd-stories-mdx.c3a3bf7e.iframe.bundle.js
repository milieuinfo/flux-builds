"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[1337],{"../../node_modules/@storybook/addon-docs/dist/index.mjs":(e,n,s)=>{s.d(n,{Hl:()=>r.Hl,W8:()=>r.W8,kL:()=>r.kL,ov:()=>r.ov}),s("../../node_modules/@storybook/addon-docs/dist/chunk-HLWAVYOI.mjs");var r=s("../../node_modules/@storybook/addon-docs/node_modules/@storybook/blocks/dist/index.mjs")},"./docs/c_beheren/3_ci-cd.stories.mdx":(e,n,s)=>{s.r(n),s.d(n,{__namedExportsOrder:()=>c,__page:()=>d,default:()=>t}),s("../../node_modules/react/index.js");var r=s("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),o=s("../../node_modules/@storybook/addon-docs/dist/index.mjs");s.p;var l=s("../../node_modules/react/jsx-runtime.js");function i(e){let n=Object.assign({h1:"h1",h2:"h2",ul:"ul",li:"li",a:"a",p:"p",code:"code",ol:"ol",strong:"strong"},(0,r.RP)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.W8,{title:"Beheren/CI - CD"}),"\n",(0,l.jsx)(n.h1,{id:"ci---cd",children:"CI - CD"}),"\n",(0,l.jsx)(n.h2,{id:"inhoudstafel",children:"Inhoudstafel"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#beschrijving",children:"Beschrijving"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#bamboo-configuratie",children:"Bamboo Configuratie"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#bamboo-release",children:"Bamboo Release"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"beschrijving",children:"Beschrijving"}),"\n",(0,l.jsxs)(n.p,{children:["De build loopt via ",(0,l.jsx)(n.a,{href:"https://www.milieuinfo.be/bamboo/chain/viewChain.action?planKey=UIGOV-CUWC",target:"_blank",rel:"nofollow noopener noreferrer",children:"Bamboo"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:["Om de versionering te sturen en een changelog te genereren wordt de\n",(0,l.jsx)(n.a,{href:"https://github.com/semantic-release/semantic-release",target:"_blank",rel:"nofollow noopener noreferrer",children:"semantic-release"})," plugin gebruikt."]}),"\n",(0,l.jsxs)(n.p,{children:["De verschillende releases zijn terug te vinden op de\n",(0,l.jsx)(n.a,{href:"https://github.com/milieuinfo/uigov-web-components/releases",target:"_blank",rel:"nofollow noopener noreferrer",children:"release pagina"})," van de GitHub repository."]}),"\n",(0,l.jsx)(n.h2,{id:"bamboo-configuratie",children:"Bamboo Configuratie"}),"\n",(0,l.jsxs)(n.p,{children:["De build configuratie zit in het ",(0,l.jsx)(n.code,{children:"bamboo.yml"})," bestand in de root folder ",(0,l.jsx)(n.code,{children:"bamboo-specs"}),". In Bamboo bestaat een\nbuild-plan uit stages die sequentieel lopen, de volgende stage start pas als de vorige stage succesvol gelopen heeft.\nEen stage bestaat zelf uit 1 of meerdere jobs, de jobs binnen een stage kunnen parallel lopen. Volgende stages en jobs\nzijn gedefinieerd:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Checkout, Install and Cache Stage"})," - met de job","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"checkout-install-and-cache"}),": checkout van de repo, npm installatie, caching van de node_modules en Cypress"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Build and Test Stage"})," - met de volgende jobs die parallel lopen:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"build-apps-and-libs"})," (de build),"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"unit-component-integrator-tests"})," (verschillende testen)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"e2e-tests-storybook"})," (Stroybook e2e-testen)"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Release and Publish Stage"})," - met de jobs","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"release-and-publish"}),": deze loopt niet voor feature branches, er is een licht verschillende flow voor release\nen pre-release branches"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Verify Release Stage"})," - met de job","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"verify-release"}),": verifieert dat de ge-releaste artifacts afneembaar zijn"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"bamboo-release",children:"Bamboo Release"}),"\n",(0,l.jsxs)(n.p,{children:["Een release vindt plaats in de ",(0,l.jsx)(n.strong,{children:"release-and-publish"})," job en wordt gestuurd door\n",(0,l.jsx)(n.a,{href:"https://github.com/semantic-release/semantic-release",target:"_blank",rel:"nofollow noopener noreferrer",children:"semantic-release"}),". De configuratie van die plugin is te vinden\nin de root folder en zit in 2 bestanden: ",(0,l.jsx)(n.code,{children:".releaserc-develop"})," en ",(0,l.jsx)(n.code,{children:".releaserc-release"}),". De develop variant loopt voor de\npre-release branches ('develop' en 'develop-xyz'), de release variant voor de 'release' en 'release-x.y' branches."]}),"\n",(0,l.jsxs)(n.p,{children:["In die ",(0,l.jsx)(n.strong,{children:"release-and-publish"})," stap gebeurd het volgende:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["semantic-release bepaalt het nieuwe versie nummer a.d.h.v. de commits (fix / feat / breaking-change) - met een\n",(0,l.jsx)(n.code,{children:"-develop"})," suffix voor develop branches"]}),"\n",(0,l.jsx)(n.li,{children:"de te publiceren artifacts krijgen het versie nummer"}),"\n",(0,l.jsx)(n.li,{children:"er wordt een tag gelegd met het versie nummer"}),"\n",(0,l.jsxs)(n.li,{children:["de artifacts worden gepushed naar ",(0,l.jsx)(n.a,{href:"https://repo.omgeving.vlaanderen.be/ui/packages",target:"_blank",rel:"nofollow noopener noreferrer",children:"Artifactory"})]}),"\n",(0,l.jsxs)(n.li,{children:["in het geval van een release wordt er een changelog aangemaakt en een\n",(0,l.jsx)(n.a,{href:"https://github.com/milieuinfo/uigov-web-components/releases",target:"_blank",rel:"nofollow noopener noreferrer",children:"GitHub release"})," uitgevoerd"]}),"\n"]})]})}let d=()=>{throw Error("Docs-only story")};d.parameters={docsOnly:!0};let a={title:"Beheren/CI - CD",tags:["stories-mdx"],includeStories:["__page"]};a.parameters=a.parameters||{},a.parameters.docs={...a.parameters.docs||{},page:function(e={}){let{wrapper:n}=Object.assign({},(0,r.RP)(),e.components);return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(i,{...e})}):i(e)}};let t=a,c=["__page"]}}]);