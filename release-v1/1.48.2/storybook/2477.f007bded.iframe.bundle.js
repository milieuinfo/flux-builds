"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[2477],{"../../libs/map/src/actions/delete/delete-action.ts":(t,e,s)=>{s.d(e,{Q:()=>l});var n=s("../../node_modules/ol/style/Style.js"),i=s("../../node_modules/ol/style/Fill.js"),r=s("../../node_modules/ol/style/Stroke.js"),a=s("../../node_modules/ol/style/Circle.js"),o=s("../../libs/map/src/actions/select/box-select-action.ts");class l extends o.o{constructor(t,e,s={}){let o=new n.Ay({fill:new i.A({color:"rgba(241, 174, 174, 0.26)"}),stroke:new r.A({color:"#db3434",width:1}),image:new a.A({radius:4,stroke:new r.A({color:"#db3434",width:1}),fill:new i.A({color:"rgba(241, 174, 174, 0.26)"})})}),l=e=>{e&&(null==e.getId()||t.getSource().getFeatureById(e.getId())===e)&&t.getSource().removeFeature(e)},c=()=>{this.clearFeatures(),this.map.render()};super(t,t=>{e?e(t,t=>{l(t),c()},()=>{c()}):(t.forEach(t=>{l(t)}),c())},{style:s.style||o,filter:s.filter})}}},"../../libs/map/src/actions/draw/draw-polygon-action.ts":(t,e,s)=>{s.d(e,{H:()=>i});var n=s("../../libs/map/src/actions/draw/draw-action.ts");class i extends n.r{constructor(t,e,s={}){super(t,"Polygon",e,s)}}},"../../libs/map/src/actions/modify/modify-action.ts":(t,e,s)=>{s.d(e,{P:()=>a});var n=s("../../node_modules/ol/interaction/Modify.js"),i=s("../../libs/map/src/actions/snap/snap-interaction.ts"),r=s("../../libs/map/src/actions/select/select-action.ts");class a extends r.D{constructor(t,e,s={}){if(super(t,null,{filter:s.filter}),this.options=s,this.modifyInteraction=new n.A({features:this.selectInteraction.getFeatures()}),this.addInteraction(this.modifyInteraction),s&&s.snapping){let e={...s.snapping};e.layer?this.addInteraction(new i.N(e.layer.getSource(),s.snapping)):this.addInteraction(new i.N(t.getSource(),s.snapping))}this.modifyInteraction.on("modifystart",t=>{let e=t.features.getArray()[0].getGeometry();this.currentGeometryBeingModified=e.clone()}),this.modifyInteraction.on("modifyend",t=>{t.features.forEach(t=>{e(t,t=>{t.setGeometry(this.currentGeometryBeingModified)})})})}activate(){this.options.snapping&&this.options.snapping.layer&&this.map.addLayer(this.options.snapping.layer),super.activate()}deactivate(){this.options.snapping&&this.options.snapping.layer&&this.map.removeLayer(this.options.snapping.layer),super.deactivate()}}},"../../libs/map/src/actions/select/box-select-action.ts":(t,e,s)=>{s.d(e,{o:()=>r});var n=s("../../libs/map/src/actions/select/select-action.ts"),i=s("../../node_modules/ol/interaction/DragBox.js");class r extends n.D{constructor(t,e,s){super(t,t=>{t&&e([t])},s),this.dragBoxInteraction=new i.A,this.addInteraction(this.dragBoxInteraction),this.dragBoxInteraction.on("boxdrag",()=>{let e=this.dragBoxInteraction.getGeometry().getExtent();this.hoverInteraction.getFeatures().clear(),t.getSource().forEachFeatureIntersectingExtent(e,e=>{this.filter(e,t)&&this.hoverInteraction.getFeatures().push(e)})}),this.dragBoxInteraction.on("boxend",()=>{this.hoverInteraction.getFeatures().getLength()>0&&e(this.hoverInteraction.getFeatures().getArray().slice(0))})}}},"../../libs/map/src/actions/select/select-action.ts":(t,e,s)=>{s.d(e,{D:()=>o});var n=s("../../node_modules/ol/Feature.js"),i=s("../../node_modules/ol/events/condition.js"),r=s("../../node_modules/ol/interaction/Select.js"),a=s("../../libs/map/src/actions/mapaction.ts");class o extends a.W{constructor(t,e,s){let n=s&&s.cluster,a=s&&s.filter?s.filter:()=>!0,o=s?s.style:null,l=s&&s.hoverStyle||o,c=Array.isArray(t)?t:[t],h=(t,e)=>(this.selectInteraction.getFeatures().clear(),this.filter(t,e)),d=(t,e)=>{let s=-1!==this.selectInteraction.getFeatures().getArray().indexOf(t);return this.filter(t,e)&&!s},p=new r.A({filter:d,condition:i.N1,style:l,layers:c}),u=new r.A({condition:i.Zm,style:o,layers:c}),g=new r.A({filter:h,condition:i.jM,style:o,layers:c,multi:!0});super([u,g,p]),this._selectHandler=t=>{this.markInteraction.getFeatures().clear(),this.selectInteraction.getFeatures().getLength()>0?1===this.selectInteraction.getFeatures().getLength()?this.selectedFeature=this.selectInteraction.getFeatures().getArray()[0]:this.selectedFeature=(t=>{let e=t.getArray().indexOf(this.selectedFeature)+1;return e>t.getLength()-1&&(e=0),t.getArray()[e]})(this.selectInteraction.getFeatures()):this.selectedFeature=null,this._onSelectHandler(t),this.map.render()},this._onSelectHandler=t=>{this.onSelect&&(this.selectedFeature?this.onSelect(this.selectedFeature,t,this.getLayer()):this.onSelect())},this.cluster=n,this.filter=a,this.layer=t,this.style=o,this.hoverStyle=l,this.hoverInteraction=p,this.markInteraction=u,this.selectInteraction=g,this.hoverInteraction.on("select",()=>{let t=this.map.getTargetElement();this.hoverInteraction.getFeatures().getLength()>0?t.style.cursor="pointer":t.style.cursor="",this.map.render()}),this.selectedFeature=null,this.getLayer=()=>t,this.onSelect=e,this.selectInteraction.on("select",this._selectHandler),this.selectInteractionFilter=h,this.hoverInteractionFilter=d}_fixClusterBehavior(){if(this.selectedFeature){let t=this.selectedFeature.get("features")||[this.selectedFeature];this.selectInteraction.getFeatures().clear(),this.markInteraction.getFeatures().clear(),t&&t.forEach(t=>{t.getId()&&this.markFeatureWithId(t.getId())})}}getClusterWithFeatureId(t,e){for(let s=0;s<t.length;s++){let n=t[s].get("features");if(n&&this.getFeatureById(n,e))return t[s]}}getFeatureById(t,e){for(let s=0;s<t.length;s++)if(t[s].getId()===e)return t[s]}clearFeatures(){this.selectInteraction.getFeatures().clear(),this.markInteraction.getFeatures().clear(),this.hoverInteraction.getFeatures().clear()}activate(){this.cluster&&this.map&&(this._fixClusterBehaviorListener=()=>this._fixClusterBehavior(),this.map.on("moveend",this._fixClusterBehaviorListener),this.selectInteraction.on("select",this._fixClusterBehaviorListener)),super.activate()}deactivate(){this._fixClusterBehaviorListener&&(this.map.un("moveend",this._fixClusterBehaviorListener),this.selectInteraction.un("select",this._fixClusterBehaviorListener)),this.clearFeatures(),super.deactivate()}selectFeature(t){this.selectInteraction.getFeatures().push(t),this.selectInteraction.dispatchEvent({type:"select",feature:t})}getSelectedFeatures(){return this.selectInteraction.getFeatures()}deselect(){this.selectedFeature=null}markFeatureWithId(t,e){let s=(e=e||this.layer).getSource().getFeatureById(t)||this.getClusterWithFeatureId(e.getSource().getFeatures(),t);s&&s instanceof n.A&&-1===this.markInteraction.getFeatures().getArray().indexOf(s)&&this.markInteraction.getFeatures().push(s)}isMarked(t){let e=!1;return this.markInteraction.getFeatures().forEach(s=>{s===t&&(e=!0)}),e}demarkAllFeatures(){this.markInteraction.getFeatures().clear()}}},"../../libs/map/src/components/action/draw-action/draw-polygon-action/vl-map-draw-polygon-action.ts":(t,e,s)=>{var n=s("../../libs/common/utilities/src/index.ts"),i=s("../../libs/map/src/actions/draw/draw-polygon-action.ts"),r=s("../../libs/map/src/components/action/draw-action/vl-map-draw-action.ts");class a extends r.H{_createAction(t){return new i.H(t,this._callback,this.__drawOptions)}}a=function(t,e,s,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(r<3?i(a):r>3?i(e,s,a):i(e,s))||a);return r>3&&a&&Object.defineProperty(e,s,a),a}([(0,n.M1)("vl-map-draw-polygon-action")],a)},"../../libs/map/src/components/action/layer-action/delete-action/vl-map-delete-action.ts":(t,e,s)=>{var n=s("../../libs/common/utilities/src/index.ts"),i=s("../../libs/map/src/actions/delete/delete-action.ts"),r=s("../../libs/map/src/components/layer-style/vl-map-layer-style.ts"),a=s("../../libs/map/src/components/action/layer-action/vl-map-layer-action.ts");class o extends a.c{get style(){return this._style}set style(t){t instanceof r.t?this._style=t.style:this._style=t,this._processAction()}onDelete(t){this.__callback=t}appliesTo(t,e){return!0}get _callback(){return(t,e,s)=>{this.__callback?this.__callback(t,e,s):t.forEach(t=>e(t))}}_createAction(t){let e={style:this._style,filter:this.appliesTo.bind(this)};return new i.Q(t,this._callback,e)}}o=function(t,e,s,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(r<3?i(a):r>3?i(e,s,a):i(e,s))||a);return r>3&&a&&Object.defineProperty(e,s,a),a}([(0,n.M1)("vl-map-delete-action")],o)},"../../libs/map/src/components/action/layer-action/modify-action/vl-map-modify-action.ts":(t,e,s)=>{var n=s("../../libs/common/utilities/src/index.ts"),i=s("../../libs/map/src/actions/layer/composite-vector-layer.ts"),r=s("../../libs/map/src/actions/modify/modify-action.ts"),a=s("../../libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts"),o=s("../../libs/map/src/components/action/layer-action/vl-map-layer-action.ts");class l extends o.c{static get _observedAttributes(){return["snapping","snapping-pixel-tolerance"]}disconnectedCallback(){this.__removeSnappingLayerStyleChangedEventListener()}onModify(t){this.__callback=t}appliesTo(t,e){return!0}_createAction(t){let e={snapping:this.__snappingOptions,filter:this.appliesTo.bind(this)};return new r.P(t,this._callback,e)}_snappingChangedCallback(){this._processAction()}_snappingPixelToleranceChangedCallback(){this._processAction()}get __snappingOptions(){return void 0===this.dataset.vlSnapping||!(this.__snappingLayers.length>0)||{layer:this.__createSnappingLayer(),pixelTolerance:this.dataset.vlSnappingPixelTolerance||10,node:!1,vertex:!1}}__createSnappingLayer(){return this.__snappingLayer=new i.E(this.__snappingLayers.map(t=>t._layer),{}),this.__addSnappingLayerStyleChangedEventListener(),this.__snappingLayer}__addSnappingLayerStyleChangedEventListener(){if(this.__snappingLayers&&this.__snappingLayers.length>0){let t=this.__snappingLayers[0];this.__snappingLayer.setStyle(t.style),this.__onSnappingLayerStyleChanged=t=>this.__snappingLayer.setStyle(t.target.style),t.addEventListener(a.P.EVENTS.styleChanged,this.__onSnappingLayerStyleChanged)}}__removeSnappingLayerStyleChangedEventListener(){this.__snappingLayers&&this.__snappingLayers.length>0&&this.__snappingLayers[0].removeEventListener(a.P.EVENTS.styleChanged,this.__onSnappingLayerStyleChanged)}get __snappingLayers(){return Array.from(this.querySelectorAll("vl-map-wfs-layer"))}}l=function(t,e,s,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(r<3?i(a):r>3?i(e,s,a):i(e,s))||a);return r>3&&a&&Object.defineProperty(e,s,a),a}([(0,n.M1)("vl-map-modify-action")],l)},"../../libs/map/src/components/controls/action-control/vl-map-action-control.ts":(t,e,s)=>{var n=s("../../libs/common/utilities/src/index.ts"),i=s("../../libs/components/src/next/button/index.ts"),r=s("../../libs/map/src/components/controls/vl-map-control.mixin.ts");class a extends(0,r.i)(n.jW){static{(0,n.gy)([i.Y])}static get properties(){return{actionId:{type:String,attribute:"data-vl-action-id"},icon:{type:String,attribute:"data-vl-icon"},label:{type:String,attribute:"data-vl-label"},defaultActive:{type:Boolean,attribute:"data-vl-default-active",state:!1}}}connectedCallback(){this.controlElement=document.createElement("vl-button-next"),this.controlElement.setAttribute("toggle",""),this.controlElement.addEventListener("click",()=>this.handleClickToggle()),this.defaultActive?this.activate():this.deactivate(),this.icon&&this.controlElement.setAttribute("icon",this.icon),this.label?this.controlElement.innerText=this.label:this.controlElement.setAttribute("text-hidden",""),super.connectedCallback()}get active(){return this.controlElement.on}activate(){this.controlElement.on=!0,this.controlElement.removeAttribute("tertiary"),this.action&&(this.action.active=!0)}deactivate(){this.controlElement.on=!1,this.controlElement.setAttribute("tertiary",""),this.action&&(this.action.active=!1)}get action(){return this.closest("vl-map")?.querySelector(`#${this.actionId}`)}handleClickToggle(){this.controlElement.on?this.activate():this.deactivate(),this.dispatchEvent(new CustomEvent("change-control",{detail:{isActive:this.controlElement.on}}))}constructor(...t){super(...t),this.actionId="",this.icon="",this.label="",this.defaultActive=!1,this.controlElement=null}}a=function(t,e,s,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(r<3?i(a):r>3?i(e,s,a):i(e,s))||a);return r>3&&a&&Object.defineProperty(e,s,a),a}([(0,n.M1)("vl-map-action-control")],a)},"../../libs/map/src/components/controls/vl-map-action-controls.ts":(t,e,s)=>{var n=s("../../node_modules/lit/index.js"),i=s("../../node_modules/lit/decorators.js");let r=(0,n.AH)`
    div {
        position: absolute;
        right: 0px;
        z-index: 1;
        display: flex;
        column-gap: 10px;
        padding: 10px;
    }
`;var a=s("../../libs/common/utilities/src/index.ts");class o extends a.jW{static get styles(){return[r]}connectedCallback(){super.connectedCallback(),this.actionControls.forEach(t=>{t.addEventListener("change-control",e=>{let s=t.getAttribute("data-vl-action-id");this.handleActionControlChange(s,e)})})}render(){return(0,n.qy)`
            <div>
                <slot></slot>
            </div>
        `}get actionControls(){return this.querySelectorAll("vl-map-action-control")}handleActionControlChange(t,e){e.detail?.isActive&&[...this.actionControls].filter(e=>e.getAttribute("data-vl-action-id")!==t).filter(t=>t.active).forEach(t=>t.deactivate())}}o=function(t,e,s,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(r<3?i(a):r>3?i(e,s,a):i(e,s))||a);return r>3&&a&&Object.defineProperty(e,s,a),a}([(0,i.EM)("vl-map-action-controls")],o)},"../../libs/map/src/components/controls/vl-map-control.mixin.ts":(t,e,s)=>{s.d(e,{i:()=>i});var n=s("../../node_modules/ol/control/Control.js");let i=t=>{class e extends t{connectedCallback(){super.connectedCallback(),this._mapElement=this.closest("vl-map"),this.map=this._mapElement.map,this.controlElement.isInMap=!0,this.control=new n.A({element:this.controlElement,target:this}),this.control.set("element",this),this.map.addControl(this.control)}disconnectedCallback(){super.disconnectedCallback(),this.map.removeControl(this.control)}createRenderRoot(){return this}}return e}}}]);