"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[3021],{"../../libs/qlik/src/infoblock/stories/vl-qlik-infoblock.stories.ts":(e,t,i)=>{i.r(t),i.d(t,{QlikInfoblockDefault:()=>q,__namedExportsOrder:()=>_,default:()=>j});var s=i("../../node_modules/lit-html/lit-html.js"),n=i("../../libs/common/storybook/src/index.ts");let l={...n.D8,title:"",icon:"",visuals:null,connection:null},r={...(0,n.RN)(!0),title:{name:"title",description:"Titel van het infoblock, zie ``vl-infoblock",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:l.title}}},icon:{name:"icon",description:"Icoon van het infoblock, zie `vl-icon`",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:l.icon}}},visuals:{name:"visuals",description:"Het object dat de eigenlijke visualisatie config bevat",table:{type:{summary:"InfoblockVisualization[][]"},category:n.R6.PROPERTIES,defaultValue:{summary:l.visuals}}},connection:{name:"connection",description:"Het connectie object dat wordt aangemaakt door gebruik te maken van `@domg/qlik-lib`",table:{type:{summary:"Qlik"},category:n.R6.PROPERTIES,defaultValue:{summary:l.connection}}}};var o=i("../../node_modules/@domg/qlik-lib/build/release/index.js"),a=i("../../node_modules/lit/directives/until.js"),d=i("../../node_modules/lit/index.js"),c=i("../../libs/common/utilities/src/index.ts"),u=i("../../libs/elements/src/index.ts"),h=i("../../libs/qlik/src/utils/qlik-render-utils.ts"),v=i("../../libs/components/src/index.ts"),p=i("../../libs/qlik/src/visual/index.ts");let m=Array.from({length:13},(e,t)=>t).flatMap(e=>Array.from({length:13},(t,i)=>(0,d.AH)`
            .vl-col--${e}-${i} {
                flex-basis: ${e/i*100}%;
                max-width: ${e/i*100}%;
                min-width: ${e/i*100}%;
            }
        `));class f extends c.jW{static{(0,c.gy)([v.Pq,v.LK,p.F,v.H])}static get styles(){return[u.hF,m]}static get properties(){return{title:{type:String,attribute:"title",reflect:!0},icon:{type:String,attribute:"icon",reflect:!0},visuals:{type:Array},connection:{type:Object},connected:{type:Boolean,state:!0}}}async firstUpdated(e){super.firstUpdated(e),this.connection&&!this.connected&&(this.stardust=await (0,o.rp)(this.connection.app),this.connected=!0)}render(){return this.connected?(0,d.qy)`
            <vl-infoblock data-vl-title="${this.title}" data-vl-icon="${this.icon}">
                <slot></slot>
                ${this.renderVisualisations()}
            </vl-infoblock>
        `:(0,d.qy)` <vl-loader data-vl-text="Visualisatie is aan het laden"></vl-loader>`}renderVisualisations(){return(0,h.xT)(...this.visuals.flatMap(e=>this.renderVisualRow(e)))}renderVisualRow(e){return e.map(t=>Array.isArray(t)?{size:1,maxSize:e.length,template:(0,h.xT)(...this.renderVisualRow(t))}:{size:t.colSize||1,maxSize:e.length,template:this.renderVisual(t)})}renderVisual(e){return(0,d.qy)`
            <vl-info-tile data-vl-auto-open="true" ?data-vl-center="${"center"===e.align}">
                <span slot="title">${e.title}</span>
                <div slot="content">
                    ${e.icon?(0,d.qy)`<img class="icon" src="${e.icon}" />`:(0,d.qy)``}
                    <vl-qlik-visual
                        qlik-id="${e.id}"
                        type="${e.type}"
                        height="${e.height}"
                        .stardust="${this.stardust}"
                        .properties="${e.properties}"
                    ></vl-qlik-visual>
                    ${e.visuals?(0,h.xT)(...e.visuals.flatMap(e=>this.renderVisualRow(e))):(0,d.qy)``}
                </div>
            </vl-info-tile>
        `}constructor(...e){super(...e),this.title="",this.icon=""}}f=function(e,t,i,s){var n,l=arguments.length,r=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(l<3?n(r):l>3?n(t,i,r):n(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r}([(0,c.M1)("vl-qlik-infoblock")],f),i("../../node_modules/react/index.js");var b=i("../../node_modules/react/jsx-runtime.js"),g=i("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),y=i("../../node_modules/@storybook/blocks/dist/index.mjs");function k(e){let t=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code"},(0,g.RP)(),e.components),{VluxMetaData:i}=t;return i||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("VluxMetaData",!0),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.h1,{id:"visual",children:"Visual"}),"\n",(0,b.jsx)(i,{id:"qlik-qlik-infoblock"}),"\n",(0,b.jsxs)(t.p,{children:["Gebruik de ",(0,b.jsx)("code",{children:"vl-qlik-infoblock"})," component om een infoblock te maken met icoon, titel, eventuele tekst en\nverschillende visualisaties.s"]}),"\n",(0,b.jsx)(t.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,b.jsx)(t.pre,{children:(0,b.jsx)(t.code,{className:"language-js",children:"import '@domg-wc/qlik/infoblock';\nimport viz_without_views from './visuals.json' assert {type: 'json'}\n\nconst connection = new Qlik(\"omgevingsloketrapport.omgeving.vlaanderen.be\", \"594c04b6-f319-4cb9-962c-24b0f7aa6f5e\");\nawait connection.init();\nthis.connection = connection;\n"})}),"\n",(0,b.jsx)(t.pre,{children:(0,b.jsx)(t.code,{className:"language-html",children:'<vl-template>\n        <vl-qlik-infoblock title="Marie Jeanne" icon="airplane" .connection="${connection}" .visuals="${viz_without_views}">\n            <span>Do something</span>\n        </vl-qlik-infoblock>\n</vl-template>\n'})}),"\n",(0,b.jsx)(y.Hl,{of:q}),"\n",(0,b.jsx)(t.h2,{id:"configuratie",children:"Configuratie"}),"\n",(0,b.jsx)(y.ov,{of:q}),"\n",(0,b.jsx)(t.h2,{id:"types",children:"Types"}),"\n",(0,b.jsx)(t.pre,{children:(0,b.jsx)(t.code,{className:"language-ts",children:'export type Filter = {\n    id: string,\n    filter: FilterObj\n}\n\ntype FilterObj = {\n    name: string,\n    fieldQualifier: string,\n    field: string,\n    nrOfValues: number\n}\n\nexport type DashboardVisualization = {\n    type: string,\n    id: string,\n    height: string,\n    width?: string,\n    label: string,\n    "align-label"?: string,\n    "align-visual"?: string,\n    colSize?: number,\n    properties?: object,\n    options?: object\n}\n\nexport type InfoblockVisualization = {\n    title: string,\n    icon: string,\n    type: string,\n    id: string,\n    height: string,\n    width?: string,\n    align: string,\n    colSize?: number,\n    properties?: object\n    visuals?: InfoblockVisualization[][]\n}\n\nexport type Views = {\n    [key: string]: {\n        order: number\n        label: string,\n        visualisations: DashboardVisualization[][]\n    },\n}\n'})})]})}let x=JSON.parse('[[{"title":"Aantal toezichthouders","icon":"cat.jpeg","align":"left","id":"RXjdD","type":"kpi","height":"50px"}]]'),j={id:"qlik-qlik-infoblock",title:"qlik/qlik-infoblock",args:l,argTypes:r,tags:["autodocs"],parameters:{docs:{page:function(e={}){let{wrapper:t}=Object.assign({},(0,g.RP)(),e.components);return t?(0,b.jsx)(t,Object.assign({},e,{children:(0,b.jsx)(k,e)})):k(e)}}}};async function $({title:e,icon:t}){let i=new o.m_("omgevingsloketrapport.omgeving.vlaanderen.be","594c04b6-f319-4cb9-962c-24b0f7aa6f5e");return await i.init(),(0,s.qy)` <vl-qlik-infoblock
        title="${e}"
        icon="${t}"
        .connection="${i}"
        .visuals="${x}"
    >
        <span>Do something</span>
    </vl-qlik-infoblock>`}let q=(0,n._7)(l,e=>(0,s.qy)`${(0,a.T)($(e),(0,s.qy)` <vl-loader data-vl-text>Visualisatie aan het laden</vl-loader>`)}`).bind({});q.storyName="vl-qlik-infoblock - default",q.args={title:"Marie Jeanne",icon:"airplane"},q.parameters={...q.parameters,docs:{...q.parameters?.docs,source:{originalSource:"story(qlikInfoblockArgs, args => html`${until(render(args), html` <vl-loader data-vl-text>Visualisatie aan het laden</vl-loader>`)}`)",...q.parameters?.docs?.source}}};let _=["QlikInfoblockDefault"]},"../../node_modules/lit/directives/until.js":(e,t,i)=>{i.d(t,{T:()=>h});var s=i("../../node_modules/lit-html/lit-html.js"),n=i("../../node_modules/lit-html/directive-helpers.js"),l=i("../../node_modules/lit-html/async-directive.js");class r{constructor(e){this.G=e}disconnect(){this.G=void 0}reconnect(e){this.G=e}deref(){return this.G}}class o{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){var e;null!==(e=this.Y)&&void 0!==e||(this.Y=new Promise(e=>this.Z=e))}resume(){var e;null!==(e=this.Z)&&void 0!==e&&e.call(this),this.Y=this.Z=void 0}}var a=i("../../node_modules/lit-html/directive.js");function d(e,t,i,s,n,l,r){try{var o=e[l](r),a=o.value}catch(e){i(e);return}o.done?t(a):Promise.resolve(a).then(s,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var c=e=>!(0,n.sO)(e)&&"function"==typeof e.then;class u extends l.Kq{constructor(){super(...arguments),this._$C_t=1073741823,this._$Cwt=[],this._$Cq=new r(this),this._$CK=new o}render(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return null!==(e=i.find(e=>!c(e)))&&void 0!==e?e:s.c0}update(e,t){var i,n=this,l=this._$Cwt,r=l.length;this._$Cwt=t;var o=this._$Cq,a=this._$CK;this.isConnected||this.disconnected();for(var u=0;u<t.length&&!(u>this._$C_t);u++)if(i=function(){var e,i,s=t[u];if(!c(s))return{v:(n._$C_t=u,s)};u<r&&s===l[u]||(n._$C_t=1073741823,r=0,Promise.resolve(s).then((e=function*(e){for(;a.get();)yield a.get();var t=o.deref();if(void 0!==t){var i=t._$Cwt.indexOf(s);i>-1&&i<t._$C_t&&(t._$C_t=i,t.setValue(e))}},i=function(){var t=this,i=arguments;return new Promise(function(s,n){var l=e.apply(t,i);function r(e){d(l,s,n,r,o,"next",e)}function o(e){d(l,s,n,r,o,"throw",e)}r(void 0)})},function(e){return i.apply(this,arguments)})))}())return i.v;return s.c0}disconnected(){this._$Cq.disconnect(),this._$CK.pause()}reconnected(){this._$Cq.reconnect(this),this._$CK.resume()}}var h=(0,a.u$)(u)},"../../libs/qlik/src/utils/qlik-render-utils.ts":(e,t,i)=>{i.d(t,{ue:()=>h,ld:()=>b,sg:()=>f,bF:()=>g,VN:()=>v,it:()=>m,xT:()=>c});var s=i("../../node_modules/lit-html/lit-html.js"),n=i("../../node_modules/lit-html/directive.js"),l=i("../../node_modules/lit-html/directive-helpers.js"),r=(e,t,i)=>{for(var s=new Map,n=t;n<=i;n++)s.set(e[n],n);return s},o=(0,n.u$)(class extends n.WL{constructor(e){if(super(e),e.type!==n.OA.CHILD)throw Error("repeat() can only be used in text expressions")}ht(e,t,i){void 0===i?i=t:void 0!==t&&(s=t);var s,n=[],l=[],r=0;for(var o of e)n[r]=s?s(o,r):r,l[r]=i(o,r),r++;return{values:l,keys:n}}render(e,t,i){return this.ht(e,t,i).values}update(e,t){var[i,n,o]=t,a=(0,l.cN)(e),{values:d,keys:c}=this.ht(i,n,o);if(!Array.isArray(a))return this.dt=c,d;for(var u,h,v,p=null!==(u=this.dt)&&void 0!==u?u:this.dt=[],m=[],f=0,b=a.length-1,g=0,y=d.length-1;f<=b&&g<=y;)if(null===a[f])f++;else if(null===a[b])b--;else if(p[f]===c[g])m[g]=(0,l.lx)(a[f],d[g]),f++,g++;else if(p[b]===c[y])m[y]=(0,l.lx)(a[b],d[y]),b--,y--;else if(p[f]===c[y])m[y]=(0,l.lx)(a[f],d[y]),(0,l.Dx)(e,m[y+1],a[f]),f++,y--;else if(p[b]===c[g])m[g]=(0,l.lx)(a[b],d[g]),(0,l.Dx)(e,a[f],a[b]),b--,g++;else if(void 0===h&&(h=r(c,g,y),v=r(p,f,b)),h.has(p[f])){if(h.has(p[b])){var k=v.get(c[g]),x=void 0!==k?a[k]:null;if(null===x){var j=(0,l.Dx)(e,a[f]);(0,l.lx)(j,d[g]),m[g]=j}else m[g]=(0,l.lx)(x,d[g]),(0,l.Dx)(e,a[f],x),a[k]=null;g++}else(0,l.KO)(a[b]),b--}else(0,l.KO)(a[f]),f++;for(;g<=y;){var $=(0,l.Dx)(e,m[y+1]);(0,l.lx)($,d[g]),m[g++]=$}for(;f<=b;){var q=a[f++];null!==q&&(0,l.KO)(q)}return this.dt=c,(0,l.mY)(e,m),s.c0}}),a=i("../../node_modules/lit/index.js");let d=e=>e.template,c=(...e)=>{let t=e.filter(d);return 0===t.length?(0,a.qy)``:(0,a.qy)` <div is="vl-grid" data-vl-is-stacked>
        ${o(t,e=>e.id||"",e=>u(e))}
    </div>`},u=({push:e=0,extraSmallSize:t=12,extraSmallMaxSize:i=12,smallSize:s=t,smallMaxSize:n=i,mediumSize:l=s,mediumMaxSize:r=n,size:o=l,maxSize:d=r,template:c=(0,a.qy)``}={})=>(0,a.qy)` <div
        is="vl-column"
        data-vl-push="${e}"
        data-vl-size="${o}"
        data-vl-max-size="${d}"
        data-vl-medium-size="${l}"
        data-vl-medium-max-size="${r}"
        data-vl-small-size="${s}"
        data-vl-small-max-size="${n}"
        data-vl-extra-small-size="${t}"
        data-vl-extra-small-max-size="${i}"
    >
        ${c}
    </div>`,h=({component:e,choices:t,selectedChoices:i,sortFilter:s,placeholder:n})=>{setTimeout(()=>{e.ready().then(()=>{s&&(e.sortFilter=s),n&&t.push({label:n,value:"",placeholder:!0,selected:!0}),i&&t.forEach(e=>e.selected=i.some(t=>t===e.value)),e._choices.removeActiveItems(),e.choices=t})},0)},v=e=>t=>p(e)(`#${t}`),p=e=>t=>e.shadowRoot?e.shadowRoot.querySelector(t):e.querySelector(t),m=e=>t=>e.shadowRoot?e.shadowRoot.querySelectorAll(t):e.querySelectorAll(t),f=({func:e,delay:t=100,context:i})=>{let s;return(...n)=>{let l=e.bind(i,...n);clearTimeout(s),s=setTimeout(l,t)}},b=e=>(t,i)=>{let s=e(t),n=e(i);return s===n?0:s<n?-1:1},g=(e,t)=>{(async()=>{e.setAttribute("disabled",""),e.setAttribute("loading",""),await t()})().catch(e=>{console.log(e)}).finally(()=>{e.removeAttribute("disabled",""),e.removeAttribute("loading","")})}},"../../libs/qlik/src/visual/index.ts":(e,t,i)=>{i.d(t,{F:()=>s.F});var s=i("../../libs/qlik/src/visual/vl-qlik-visual.component.ts")},"../../libs/qlik/src/visual/vl-qlik-visual.component.ts":(e,t,i)=>{i.d(t,{F:()=>r});var s=i("../../node_modules/lit/index.js"),n=i("../../libs/common/utilities/src/index.ts"),l=i("../../libs/elements/src/index.ts");class r extends n.jW{static get styles(){return[l.hF]}static get properties(){return{type:{type:String,attribute:"type",reflect:!0},qlikId:{type:String,attribute:"qlik-id",reflect:!0},height:{type:String,attribute:"height",reflect:!0},width:{type:String,attribute:"width",reflect:!0},additionalStyle:{type:String,attribute:"additional-style",reflect:!0},properties:{type:Object},stardust:{type:Object}}}async updated(e){super.updated(e),this.visual&&this.visual.destroy(),this.visual=await this.stardust?.render({element:this.shadowRoot.getElementById(`visual-${this.qlikId}`),id:this.qlikId,type:this.type,properties:this.properties}),this.visual?.model.on("changed",(()=>{this.dispatchEvent(new CustomEvent("visual-changed"))}).bind(this)),"distributionplot"===this.type&&await this.visual?.__DO_NOT_USE__.applyProperties(this.properties)}render(){let e=(0,s.AH)`
            ${(0,s.iz)(`${this.additionalStyle};height: ${this.height};${this.width?`width: ${this.width}`:""}`)}
        `;return(0,s.qy)` <div id="visual-${this.qlikId}" style="${e}"></div> `}disconnectedCallback(){super.disconnectedCallback(),this.visual&&this.visual.destroy()}constructor(...e){super(...e),this.type="",this.qlikId="",this.height="",this.width="",this.additionalStyle=""}}r=function(e,t,i,s){var n,l=arguments.length,r=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(l<3?n(r):l>3?n(t,i,r):n(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r}([(0,n.M1)("vl-qlik-visual")],r)}}]);