"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[2374],{"../../node_modules/media-captions/dist/prod/ssa-parser.js":(e,t,s)=>{s.r(t),s.d(t,{SSAParser:()=>p,default:()=>f});var a=s("../../node_modules/media-captions/dist/prod/index.js");let i=/^Format:[\s\t]*/,r=/^Style:[\s\t]*/,l=/^Dialogue:[\s\t]*/,n=/[\s\t]*,[\s\t]*/,c=/\{[^}]+\}/g,h=/\\N/g,o=/^\[(.*)[\s\t]?Styles\]$/,u=/^\[(.*)[\s\t]?Events\]$/;class p{h;O=0;c=null;l=[];m=[];N=null;f;P={};async init(e){this.h=e,e.errors&&(this.f=(await s.e(4478).then(s.bind(s,"../../node_modules/media-captions/dist/prod/errors.js"))).ParseErrorBuilder)}parse(e,t){if(this.O)switch(this.O){case 1:if(""===e)this.O=0;else if(r.test(e)){if(this.N){let t=e.replace(r,"").split(n);this.S(t)}else this.g(this.f?.T("Style",t))}else i.test(e)?this.N=e.replace(i,"").split(n):u.test(e)&&(this.N=null,this.O=2);break;case 2:if(""===e)this.Q();else if(l.test(e)){if(this.Q(),this.N){let s=e.replace(l,"").split(n),a=this.U(s,t);a&&(this.c=a)}else this.g(this.f?.T("Dialogue",t))}else this.c?this.c.text+="\n"+e.replace(c,"").replace(h,"\n"):i.test(e)?this.N=e.replace(i,"").split(n):o.test(e)?(this.N=null,this.O=1):u.test(e)&&(this.N=null)}else""===e||(o.test(e)?(this.N=null,this.O=1):u.test(e)&&(this.N=null,this.O=2))}done(){return{metadata:{},cues:this.l,regions:[],errors:this.m}}Q(){this.c&&(this.l.push(this.c),this.h.onCue?.(this.c),this.c=null)}S(e){let t="Default",s={},a,i="center",r="bottom",l,n=1.2,c,h,o=3,u=[];for(let p=0;p<this.N.length;p++){let g=this.N[p],f=e[p];switch(g){case"Name":t=f;break;case"Fontname":s["font-family"]=f;break;case"Fontsize":s["font-size"]=`calc(${f} / var(--overlay-height))`;break;case"PrimaryColour":let b=d(f);b&&(s["--cue-color"]=b);break;case"BorderStyle":o=parseInt(f,10);break;case"BackColour":h=d(f);break;case"OutlineColour":let k=d(f);k&&(c=k);break;case"Bold":parseInt(f)&&(s["font-weight"]="bold");break;case"Italic":parseInt(f)&&(s["font-style"]="italic");break;case"Underline":parseInt(f)&&(s["text-decoration"]="underline");break;case"StrikeOut":parseInt(f)&&(s["text-decoration"]="line-through");break;case"Spacing":s["letter-spacing"]=f+"px";break;case"AlphaLevel":s.opacity=parseFloat(f);break;case"ScaleX":u.push(`scaleX(${parseFloat(f)/100})`);break;case"ScaleY":u.push(`scaleY(${parseFloat(f)/100})`);break;case"Angle":u.push(`rotate(${f}deg)`);break;case"Shadow":n=1.2*parseInt(f,10);break;case"MarginL":s["--cue-width"]="auto",s["--cue-left"]=parseFloat(f)+"px";break;case"MarginR":s["--cue-width"]="auto",s["--cue-right"]=parseFloat(f)+"px";break;case"MarginV":l=parseFloat(f);break;case"Outline":a=parseInt(f,10);break;case"Alignment":let m=parseInt(f,10);switch(m>=4&&(r=m>=7?"top":"center"),m%3){case 1:i="start";break;case 2:i="center";break;case 3:i="end"}}}if(s.R=r,s["--cue-white-space"]="normal",s["--cue-line-height"]="normal",s["--cue-text-align"]=i,"center"===r?(s["--cue-top"]="50%",u.push("translateY(-50%)")):s[`--cue-${r}`]=(l||0)+"px",1===o&&(s["--cue-padding-y"]="0"),(1===o||h)&&(s["--cue-bg-color"]=1===o?"none":h),3===o&&c&&(s["--cue-outline"]=`${a}px solid ${c}`),1===o&&"number"==typeof a){let e=h??"#000";s["--cue-text-shadow"]=[c&&g(1.2*a,1.2*n,c),c?g(a/2*a,a/2*n,e):g(a,n,e)].filter(Boolean).join(", ")}u.length&&(s["--cue-transform"]=u.join(" ")),this.P[t]=s}U(e,t){let s=this.V(e),i=this.q(s.Start,s.End,t);if(!i)return;let r=new a.b(i[0],i[1],""),l={...this.P[s.Style]||{}},n=s.Name?`<v ${s.Name}>`:"",o=l.R,u=s.MarginL&&parseFloat(s.MarginL),p=s.MarginR&&parseFloat(s.MarginR),d=s.MarginV&&parseFloat(s.MarginV);return u&&(l["--cue-width"]="auto",l["--cue-left"]=u+"px"),p&&(l["--cue-width"]="auto",l["--cue-right"]=p+"px"),d&&"center"!==o&&(l[`--cue-${o}`]=d+"px"),r.text=n+e.slice(this.N.length-1).join(", ").replace(c,"").replace(h,"\n"),delete l.R,Object.keys(l).length&&(r.style=l),r}V(e){let t={};for(let s=0;s<this.N.length;s++)t[this.N[s]]=e[s];return t}q(e,t,s){let i=(0,a.p)(e),r=(0,a.p)(t);if(null!==i&&null!==r&&r>i)return[i,r];null===i&&this.g(this.f?.s(e,s)),null===r&&this.g(this.f?.t(t,s)),null!=i&&null!==r&&r>i&&this.g(this.f?.u(i,r,s))}g(e){if(e){if(this.m.push(e),this.h.strict)throw this.h.cancel(),e;this.h.onError?.(e)}}}function d(e){let t=parseInt(e.replace("&H",""),16);return t>=0?"rgba("+[255&t,t>>8&255,t>>16&255,(t>>24&255^255)/255].join(",")+")":null}function g(e,t,s){let a=Math.ceil(2*Math.PI*e),i="";for(let r=0;r<a;r++){let l=2*Math.PI*r/a;i+=e*Math.cos(l)+"px "+t*Math.sin(l)+"px 0 "+s+(r==a-1?"":",")}return i}function f(){return new p}}}]);