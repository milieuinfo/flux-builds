"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[8107],{"../../libs/components/src/upload/stories/vl-upload.stories.ts":(e,a,t)=>{t.r(a),t.d(a,{UploadDefault:()=>v,UploadInForm:()=>g,__namedExportsOrder:()=>f,default:()=>p});var n=t("../../libs/common/storybook/src/index.ts"),r=t("../../node_modules/lit-html/lit-html.js");t("../../libs/components/src/upload/vl-upload.component.ts");var l=t("../../node_modules/@storybook/addon-actions/dist/index.mjs");let d={...n.D8,acceptedFiles:"",autoProcess:!1,disabled:!1,disallowDuplicates:!1,error:!1,errorMessageAcceptedFiles:"",errorMessageFilesize:"",errorMessageMaxFiles:"",fullBodyDrop:!1,inputName:"",maxFiles:1,maxSize:2e6,subTitle:"Sleep de bijlage naar hier om toe te voegen",success:!1,title:"",resetFormOnClear:!1,url:"http://httpbin.org/post",onChange:(0,l.XI)("change"),onDuplicateRemoved:(0,l.XI)("duplicateRemoved")},o={...(0,n.RN)(),acceptedFiles:{name:"data-vl-accepted-files",description:"Attribuut om te bepalen welke bestanden worden geaccepteerd door component (extensie en mimetype).",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.acceptedFiles}}},autoProcess:{name:"data-vl-autoprocess",description:"Attribuut om te activeren of deactiveren dat het het gedropte bestand direct moet opgeladen worden.",table:{type:{summary:n.QE.BOOLEAN},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.autoProcess}}},disabled:{name:"data-vl-disabled",description:"Attribuut om te voorkomen dat de gebruiker een bijlage kan opladen.",table:{type:{summary:n.QE.BOOLEAN},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.disabled}}},disallowDuplicates:{name:"data-vl-disallow-duplicates",description:"Bepaalt dat het niet is toegelaten om dezelfde bijlage meerdere keren te uploaden. Niet reactief.",table:{type:{summary:n.QE.BOOLEAN},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.disallowDuplicates}}},error:{name:"data-vl-error",description:"Attribuut om aan te geven dat het upload element een fout bevat.",table:{type:{summary:n.QE.BOOLEAN},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.error}}},errorMessageAcceptedFiles:{name:"data-vl-error-message-accepted-files",description:"Attribuut om de message te definiëren wanneer er niet-geaccepteerde bestanden zijn toegevoegd.",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.errorMessageAcceptedFiles}}},errorMessageFilesize:{name:"data-vl-error-message-filesize",description:"Attribuut om de message te definiëren wanneer er te grote bestanden zijn toegevoegd.",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.errorMessageFilesize}}},errorMessageMaxFiles:{name:"data-vl-error-message-maxfiles",description:"Attribuut om de message te definiëren wanneer er teveel bestanden zijn toegevoegd.",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.errorMessageMaxFiles}}},fullBodyDrop:{name:"data-vl-full-body-drop",description:"Attribuut om te activeren of deactiveren dat de dropzone over het heel scherm is.",table:{type:{summary:n.QE.BOOLEAN},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.fullBodyDrop}}},inputName:{name:"data-vl-input-name",description:"Attribuut om de key te definiëren waarmee het bestand wordt opgeladen.",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.inputName}}},maxFiles:{name:"data-vl-max-files",description:"Bepaalt aantal upload-bestanden",table:{type:{summary:"number"},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.maxFiles}}},maxSize:{name:"data-vl-max-size",description:"Bepaalt de maximum grootte van de combineerde upload-bestanden (2000000 = 2MB).",table:{type:{summary:"number"},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.maxSize}}},subTitle:{name:"data-vl-sub-title",description:"Attribuut om de subtitel te bepalen.",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.subTitle}}},success:{name:"data-vl-success",description:"Geeft aan dat de geüploade bestanden gevalideerd zijn.",table:{type:{summary:n.QE.BOOLEAN},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.success}}},title:{name:"data-vl-title",description:"Attribuut om de titel te bepalen.",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.title}}},url:{name:"data-vl-url",description:"Bepaalt de upload url",type:{name:"string",required:!0},table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.url}}},resetFormOnClear:{name:"data-vl-reset-form-on-clear",description:"Als dit ingesteld staat, zal de `form` waarin de `vl-upload` zich bevindt ook zijn validatie resetten",table:{type:{summary:n.QE.BOOLEAN},category:n.R6.ATTRIBUTES,defaultValue:{summary:d.resetFormOnClear}}},onChange:{name:"change",description:"Afgevuurd na het toevoegen of verwijderen van een bestand of een succesvolle upload",table:{type:{summary:"change"},category:n.R6.EVENTS}},onDuplicateRemoved:{name:"duplicateRemoved",description:"Afgevuurd nadat een file is verwijderd die dezelfde content had als een file die reeds geselecteerd was.",table:{type:{summary:"duplicateRemoved"},category:n.R6.EVENTS}}};t("../../node_modules/react/index.js");var s=t("../../node_modules/react/jsx-runtime.js"),i=t("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),c=t("../../node_modules/@storybook/blocks/dist/index.mjs");function u(e){let a=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",pre:"pre",a:"a",h3:"h3"},(0,i.RP)(),e.components),{VluxMetaData:t}=a;return t||function(e,a){throw Error("Expected "+(a?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("VluxMetaData",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.h1,{id:"upload",children:"Upload"}),"\n",(0,s.jsx)(t,{id:"components-upload"}),"\n",(0,s.jsxs)(a.p,{children:["Gebruik de ",(0,s.jsx)(a.code,{children:"upload"}),"-component om één of meerdere bestanden te selecteren of te slepen naar het upload-veld. De gebruiker\nkan alternatief ook één of meerdere bestanden uploaden door op de link in het upload-veld te klikken en de bestanden\nselecteren in het bestand-menu."]}),"\n",(0,s.jsx)(a.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-js",children:"import { VlUploadComponent } from '@domg-wc/components';\n"})}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-html",children:"<vl-upload></vl-upload>\n"})}),"\n",(0,s.jsx)(c.Hl,{of:v}),"\n",(0,s.jsx)(a.h2,{id:"configuratie",children:"Configuratie"}),"\n",(0,s.jsx)(c.ov,{of:v}),"\n",(0,s.jsx)(a.h2,{id:"info",children:"Info"}),"\n",(0,s.jsxs)(a.p,{children:["Achterliggend gebruikt ",(0,s.jsx)(a.code,{children:"vl-upload"})," de library ",(0,s.jsx)(a.code,{children:"dropzone.js"})," (",(0,s.jsx)(a.a,{href:"https://www.dropzone.dev/",target:"_blank",rel:"nofollow noopener noreferrer",children:"https://www.dropzone.dev/"}),").\nDaarnaast gebruikt ",(0,s.jsx)(a.code,{children:"vl-upload"})," het ",(0,s.jsx)(a.a,{href:"/docs/elements-form--form-validation",children:"vl-form-validation"})," element, die\nachterliggend op zijn beurt gebruik maakt van ",(0,s.jsx)(a.a,{href:"http://validatejs.org/",target:"_blank",rel:"nofollow noopener noreferrer",children:"validate.js v0.12"}),"."]}),"\n",(0,s.jsx)(a.h3,{id:"detect-changes",children:"Detect changes"}),"\n",(0,s.jsxs)(a.p,{children:["Bij elke fileChange van ",(0,s.jsx)(a.code,{children:"vl-upload"})," wordt het custom event ",(0,s.jsx)(a.code,{children:"vl.upload.hook.fileChange"})," geactiveerd. Dit custom event\nwordt zowel bij drop als bij verandering geactiveerd. Het evenement bevat een lijst van alle geüploade bestanden\nin ",(0,s.jsx)(a.code,{children:"e.detail"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:["Je kunt een volledige lijst krijgen van alle geüploade bestanden per upload met ",(0,s.jsx)(a.code,{children:"vl.upload.dropzoneInstances[i].files"}),"\nwaarbij ",(0,s.jsx)(a.code,{children:"i"})," de index is van je ",(0,s.jsx)(a.code,{children:"vl-upload"}),"-instantie."]}),"\n",(0,s.jsx)(a.p,{children:"Het event bubbelt omhoog: je kan de event listener toevoegen aan het document of op het element zelf."}),"\n",(0,s.jsxs)(a.p,{children:["Naast deze listeners kun je ook alle evenementen gebruiken die ",(0,s.jsx)(a.code,{children:"dropzone.js"})," ondersteunt, raadpleeg de ",(0,s.jsx)(a.code,{children:"dropzone.js"}),"\ndocumentatie voor meer info: ",(0,s.jsx)(a.a,{href:"https://www.dropzone.dev/",target:"_blank",rel:"nofollow noopener noreferrer",children:"https://www.dropzone.dev/"}),"."]}),"\n",(0,s.jsx)(a.h2,{id:"varianten",children:"Varianten"}),"\n",(0,s.jsx)(a.h3,{id:"binnen-een-form",children:"Binnen een form"}),"\n",(0,s.jsxs)(a.p,{children:["Gelijkaardig aan de andere controls die overerven van de ",(0,s.jsx)(a.a,{href:"/docs/elements-form--form-validation",children:(0,s.jsx)(a.code,{children:"vl-form-validation"})})," kan je\n",(0,s.jsx)(a.code,{children:"vl-form-validation-message"})," gebruiken om een foutboodschap te tonen."]}),"\n",(0,s.jsxs)(a.p,{children:["In bepaalde instanties is het gewenst dat de ",(0,s.jsx)(a.code,{children:"vl-upload"})," validatie gereset wordt na het verwijderen van bestanden. In\ndat geval kan je ",(0,s.jsx)(a.code,{children:"data-vl-reset-form-on-clear"})," toevoegen. Dit gaat de validatie resetten van de ",(0,s.jsx)(a.code,{children:"vl-form"})," waartoe\ndeze ",(0,s.jsx)(a.code,{children:"vl-upload"})," behoort."]}),"\n",(0,s.jsx)(c.Hl,{of:g}),"\n",(0,s.jsx)(a.h3,{id:"duplicaat-detectie",children:"Duplicaat detectie"}),"\n",(0,s.jsxs)(a.p,{children:["Het is mogelijk om duplicaten van eenzelfde bestand te vermijden met het ",(0,s.jsx)(a.code,{children:"disallow-duplicates"}),"-attribuut. Achterliggend\nwordt er gecontroleerd op ofwel bestandsnaam en aantal bytes, of wordt een hex string vergeleken met eerder toegevoegde\nbestanden. In dat geval worden de duplicaten verwijderd."]}),"\n",(0,s.jsxs)(a.p,{children:["Wanneer een duplicaat wordt verwijderd kan je luisteren naar het ",(0,s.jsx)(a.code,{children:"duplicateRemoved"})," event om de gebruiker te informeren\ndat bestanden werden verwijderd wegens duplicaat detectie."]}),"\n",(0,s.jsx)(a.p,{children:"Onderstaand voorbeeld is ook geïntegreerd in de 2 stories die hierboven vermeld staan."}),"\n",(0,s.jsxs)("details",{children:[(0,s.jsx)("summary",{children:"code voorbeeld voor een waarschuwing te tonen bij duplicaat detectie "}),(0,s.jsx)(c.kL,{code:'const addDuplicateWarning = ()=>{\n    const vlUpload = document.querySelector(\'#vl-upload\');\n    const vlWarningDuplicate = document.querySelector(\'#warning-duplicate\');\n    if (!vlWarningDuplicate) {\n        vlUpload?.insertAdjacentHTML(\'afterend\', `<vl-alert\n                    id="warning-duplicate"\n                    data-vl-type="warning"\n                    data-vl-icon="warning"\n                    data-vl-title="Waarschuwing"\n                    data-vl-closable="">\n                    <p>Er werden 1 of meer kopieën van hetzelfde bestand gedetecteerd. De kopieën werden verwijderd.</p>\n                  </vl-alert>`);\n    }\n};\nexport default addDuplicateWarning;\n',language:"ts",dark:!0,format:!0})]}),"\n",(0,s.jsx)(a.h2,{id:"referenties",children:"Referenties"}),"\n",(0,s.jsx)(a.h3,{id:"digitaal-vlaanderen",children:"Digitaal Vlaanderen"}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.a,{href:"https://overheid.vlaanderen.be/webuniversum/v3/documentation/forms/vl-ui-upload",target:"_blank",rel:"nofollow noopener noreferrer",children:"Documentatie Digitaal Vlaanderen - Upload"})}),"\n",(0,s.jsx)(a.h3,{id:"legacy-documentatie",children:"Legacy Documentatie"}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/storybook/?path=/docs/legacy-vl-upload--uig-2120",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Storybook - Upload"})}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/doc/VlUpload.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Documentatie - Upload"})}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/demo/vl-upload.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Demo - Upload"})})]})}let m=()=>{let e=document.querySelector("#vl-upload");document.querySelector("#warning-duplicate")||e?.insertAdjacentHTML("afterend",`<vl-alert
                    id="warning-duplicate"
                    data-vl-type="warning"
                    data-vl-icon="warning"
                    data-vl-title="Waarschuwing"
                    data-vl-closable="">
                    <p>Er werden 1 of meer kopie\xebn van hetzelfde bestand gedetecteerd. De kopie\xebn werden verwijderd.</p>
                  </vl-alert>`)},p={id:"components-upload",title:"Components/upload",tags:["autodocs"],args:d,argTypes:o,parameters:{docs:{page:function(e={}){let{wrapper:a}=Object.assign({},(0,i.RP)(),e.components);return a?(0,s.jsx)(a,Object.assign({},e,{children:(0,s.jsx)(u,e)})):u(e)}},controls:{hideNoControlsWarning:!0,sort:"requiredFirst"}}},v=(0,n._7)(d,({acceptedFiles:e,autoProcess:a,disabled:t,disallowDuplicates:n,error:l,errorMessageAcceptedFiles:d,errorMessageFilesize:o,errorMessageMaxFiles:s,fullBodyDrop:i,inputName:c,maxFiles:u,maxSize:p,subTitle:v,success:g,title:f,resetFormOnClear:h,url:b,onChange:j,onDuplicateRemoved:x})=>(0,r.qy)`
            <vl-upload
                data-vl-url=${b}
                data-vl-sub-title=${v}
                data-vl-title=${f}
                data-vl-accepted-files=${e}
                ?data-vl-autoprocess=${a}
                ?data-vl-disabled=${t}
                ?data-vl-disallow-duplicates=${n}
                ?data-vl-error=${l}
                data-vl-error-message-accepted-files=${d}
                data-vl-error-message-filesize=${o}
                data-vl-error-message-maxfiles=${s}
                ?data-vl-full-body-drop=${i}
                data-vl-input-name=${c}
                data-vl-max-files=${u}
                data-vl-max-size=${p}
                ?data-vl-success=${g}
                ?data-vl-reset-form-on-clear=${h}
                @change=${e=>j(e.detail)}
                @duplicateRemoved=${e=>{m(),x(e.detail)}}
                id="vl-upload"
            ></vl-upload>
        `);v.storyName="vl-upload - default",v.args={inputName:"file",maxSize:2e6,subTitle:"",success:!1,title:"",url:"http://httpbin.org/post"};let g=(0,n._7)(d,({acceptedFiles:e,autoProcess:a,disabled:t,disallowDuplicates:n,error:l,errorMessageAcceptedFiles:d,errorMessageFilesize:o,errorMessageMaxFiles:s,fullBodyDrop:i,inputName:c,maxFiles:u,maxSize:p,subTitle:v,success:g,title:f,url:h,resetFormOnClear:b,onChange:j,onDuplicateRemoved:x})=>(0,r.qy)`
            <form is="vl-form" data-vl-validate data-validate-form>
                <div is="vl-form-grid" data-vl-is-stacked id="grid">
                    <div is="vl-form-column" data-vl-size="12" id="upload-column">
                        <section is="vl-region" id="upload-region">
                            <vl-upload
                                data-vl-input-name="bestand"
                                data-vl-error-placeholder="upload-error"
                                data-vl-url=${h}
                                data-vl-sub-title=${v}
                                data-vl-title=${f}
                                data-vl-accepted-files=${e}
                                ?data-vl-autoprocess=${a}
                                ?data-vl-disabled=${t}
                                ?data-vl-disallow-duplicates=${n}
                                ?data-vl-error=${l}
                                data-vl-error-message-accepted-files=${d}
                                data-vl-error-message-filesize=${o}
                                data-vl-error-message-maxfiles=${s}
                                ?data-vl-full-body-drop=${i}
                                data-vl-input-name=${c}
                                data-vl-max-files=${u}
                                data-vl-max-size=${p}
                                ?data-vl-success=${g}
                                ?data-vl-reset-form-on-clear=${b}
                                @change=${e=>j(e.detail)}
                                @duplicateRemoved=${e=>{m(),x(e.detail)}}
                                id="vl-upload"
                            ></vl-upload>
                            <p
                                is="vl-form-validation-message"
                                id="upload-error-message"
                                data-vl-error
                                data-vl-error-id="upload-error"
                                hidden
                            >
                                Kies een bestand.
                            </p>
                        </section>
                    </div>
                </div>
            </form>
        `);g.storyName="vl-upload - in form",g.args={resetFormOnClear:!0,title:"upload binnen een form"},v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:'story(uploadArgs, ({\n  acceptedFiles,\n  autoProcess,\n  disabled,\n  disallowDuplicates,\n  error,\n  errorMessageAcceptedFiles,\n  errorMessageFilesize,\n  errorMessageMaxFiles,\n  fullBodyDrop,\n  inputName,\n  maxFiles,\n  maxSize,\n  subTitle,\n  success,\n  title,\n  resetFormOnClear,\n  url,\n  onChange,\n  onDuplicateRemoved\n}) => {\n  return html`\n            <vl-upload\n                data-vl-url=${url}\n                data-vl-sub-title=${subTitle}\n                data-vl-title=${title}\n                data-vl-accepted-files=${acceptedFiles}\n                ?data-vl-autoprocess=${autoProcess}\n                ?data-vl-disabled=${disabled}\n                ?data-vl-disallow-duplicates=${disallowDuplicates}\n                ?data-vl-error=${error}\n                data-vl-error-message-accepted-files=${errorMessageAcceptedFiles}\n                data-vl-error-message-filesize=${errorMessageFilesize}\n                data-vl-error-message-maxfiles=${errorMessageMaxFiles}\n                ?data-vl-full-body-drop=${fullBodyDrop}\n                data-vl-input-name=${inputName}\n                data-vl-max-files=${maxFiles}\n                data-vl-max-size=${maxSize}\n                ?data-vl-success=${success}\n                ?data-vl-reset-form-on-clear=${resetFormOnClear}\n                @change=${(event: CustomEvent) => onChange(event.detail)}\n                @duplicateRemoved=${(event: CustomEvent) => {\n    addDuplicateWarning();\n    onDuplicateRemoved(event.detail);\n  }}\n                id="vl-upload"\n            ></vl-upload>\n        `;\n})',...v.parameters?.docs?.source}}},g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:'story(uploadArgs, ({\n  acceptedFiles,\n  autoProcess,\n  disabled,\n  disallowDuplicates,\n  error,\n  errorMessageAcceptedFiles,\n  errorMessageFilesize,\n  errorMessageMaxFiles,\n  fullBodyDrop,\n  inputName,\n  maxFiles,\n  maxSize,\n  subTitle,\n  success,\n  title,\n  url,\n  resetFormOnClear,\n  onChange,\n  onDuplicateRemoved\n}) => {\n  return html`\n            <form is="vl-form" data-vl-validate data-validate-form>\n                <div is="vl-form-grid" data-vl-is-stacked id="grid">\n                    <div is="vl-form-column" data-vl-size="12" id="upload-column">\n                        <section is="vl-region" id="upload-region">\n                            <vl-upload\n                                data-vl-input-name="bestand"\n                                data-vl-error-placeholder="upload-error"\n                                data-vl-url=${url}\n                                data-vl-sub-title=${subTitle}\n                                data-vl-title=${title}\n                                data-vl-accepted-files=${acceptedFiles}\n                                ?data-vl-autoprocess=${autoProcess}\n                                ?data-vl-disabled=${disabled}\n                                ?data-vl-disallow-duplicates=${disallowDuplicates}\n                                ?data-vl-error=${error}\n                                data-vl-error-message-accepted-files=${errorMessageAcceptedFiles}\n                                data-vl-error-message-filesize=${errorMessageFilesize}\n                                data-vl-error-message-maxfiles=${errorMessageMaxFiles}\n                                ?data-vl-full-body-drop=${fullBodyDrop}\n                                data-vl-input-name=${inputName}\n                                data-vl-max-files=${maxFiles}\n                                data-vl-max-size=${maxSize}\n                                ?data-vl-success=${success}\n                                ?data-vl-reset-form-on-clear=${resetFormOnClear}\n                                @change=${(event: CustomEvent) => onChange(event.detail)}\n                                @duplicateRemoved=${(event: CustomEvent) => {\n    addDuplicateWarning();\n    onDuplicateRemoved(event.detail);\n  }}\n                                id="vl-upload"\n                            ></vl-upload>\n                            <p\n                                is="vl-form-validation-message"\n                                id="upload-error-message"\n                                data-vl-error\n                                data-vl-error-id="upload-error"\n                                hidden\n                            >\n                                Kies een bestand.\n                            </p>\n                        </section>\n                    </div>\n                </div>\n            </form>\n        `;\n})',...g.parameters?.docs?.source}}};let f=["UploadDefault","UploadInForm"]}}]);