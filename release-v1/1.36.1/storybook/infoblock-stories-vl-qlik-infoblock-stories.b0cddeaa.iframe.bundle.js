(self.webpackChunkuigov_web_components=self.webpackChunkuigov_web_components||[]).push([[6369],{"./libs/qlik/src/infoblock/stories/vl-qlik-infoblock.stories.ts":(e,t,i)=>{"use strict";i.r(t),i.d(t,{QlikInfoblockDefault:()=>w,__namedExportsOrder:()=>q,default:()=>j});var s=i("./node_modules/lit-html/lit-html.js"),n=i("./libs/common/storybook/src/index.ts");let l={...n._O,title:"",icon:"",visuals:null,connection:null},a={...(0,n.Wp)(!0),title:{name:"title",description:"Titel van het infoblock, zie ``vl-infoblock",table:{type:{summary:n.vK.STRING},category:n.aA.ATTRIBUTES,defaultValue:{summary:l.title}}},icon:{name:"icon",description:"Icoon van het infoblock, zie `vl-icon`",table:{type:{summary:n.vK.STRING},category:n.aA.ATTRIBUTES,defaultValue:{summary:l.icon}}},visuals:{name:"visuals",description:"Het object dat de eigenlijke visualisatie config bevat",table:{type:{summary:"InfoblockVisualization[][]"},category:n.aA.PROPERTIES,defaultValue:{summary:l.visuals}}},connection:{name:"connection",description:"Het connectie object dat wordt aangemaakt door gebruik te maken van `@domg/qlik-lib`",table:{type:{summary:"Qlik"},category:n.aA.PROPERTIES,defaultValue:{summary:l.connection}}}};var o=i("./node_modules/@domg/qlik-lib/build/release/index.js"),r=i("./node_modules/lit/directives/until.js"),d=i("./node_modules/lit/index.js"),c=i("./libs/common/utilities/src/index.ts"),u=i("./libs/elements/src/index.ts"),p=i("./libs/qlik/src/utils/qlik-render-utils.ts"),h=i("./libs/components/src/index.ts"),v=i("./libs/qlik/src/visual/index.ts");let m=Array.from({length:13},(e,t)=>t).flatMap(e=>Array.from({length:13},(t,i)=>(0,d.iv)`
            .vl-col--${e}-${i} {
                flex-basis: ${e/i*100}%;
                max-width: ${e/i*100}%;
                min-width: ${e/i*100}%;
            }
        `));class b extends c.fS{static{(0,c.YV)([h.Ui,h.RW,v.V,h.xd])}static get styles(){return[u.CX,m]}static get properties(){return{title:{type:String,attribute:"title",reflect:!0},icon:{type:String,attribute:"icon",reflect:!0},visuals:{type:Array},connection:{type:Object},connected:{type:Boolean,state:!0}}}async firstUpdated(e){super.firstUpdated(e),this.connection&&!this.connected&&(this.stardust=await (0,o.To)(this.connection.app),this.connected=!0)}render(){return this.connected?(0,d.dy)`
            <vl-infoblock data-vl-title="${this.title}" data-vl-icon="${this.icon}">
                <slot></slot>
                ${this.renderVisualisations()}
            </vl-infoblock>
        `:(0,d.dy)` <vl-loader data-vl-text="Visualisatie is aan het laden"></vl-loader>`}renderVisualisations(){return(0,p.Q8)(...this.visuals.flatMap(e=>this.renderVisualRow(e)))}renderVisualRow(e){return e.map(t=>Array.isArray(t)?{size:1,maxSize:e.length,template:(0,p.Q8)(...this.renderVisualRow(t))}:{size:t.colSize||1,maxSize:e.length,template:this.renderVisual(t)})}renderVisual(e){return(0,d.dy)`
            <vl-info-tile data-vl-auto-open="true" ?data-vl-center="${"center"===e.align}">
                <span slot="title">${e.title}</span>
                <div slot="content">
                    ${e.icon?(0,d.dy)`<img class="icon" src="${e.icon}" />`:(0,d.dy)``}
                    <vl-qlik-visual
                        qlik-id="${e.id}"
                        type="${e.type}"
                        height="${e.height}"
                        .stardust="${this.stardust}"
                        .properties="${e.properties}"
                    ></vl-qlik-visual>
                    ${e.visuals?(0,p.Q8)(...e.visuals.flatMap(e=>this.renderVisualRow(e))):(0,d.dy)``}
                </div>
            </vl-info-tile>
        `}constructor(...e){super(...e),this.title="",this.icon=""}}b=function(e,t,i,s){var n,l=arguments.length,a=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(l<3?n(a):l>3?n(t,i,a):n(t,i))||a);return l>3&&a&&Object.defineProperty(t,i,a),a}([(0,c.a6)("vl-qlik-infoblock")],b),i("./node_modules/react/index.js");var g=i("./node_modules/react/jsx-runtime.js"),y=i("./node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),f=i("./node_modules/@storybook/blocks/dist/index.mjs");function k(e){let t=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code"},(0,y.ah)(),e.components);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(t.h1,{id:"visual",children:"Visual"}),"\n",(0,g.jsxs)(t.p,{children:["Gebruik de ",(0,g.jsx)("code",{children:"vl-qlik-infoblock"})," component om een infoblock te maken met icoon, titel, eventuele tekst en verschillende visualisaties.s"]}),"\n",(0,g.jsx)(t.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,g.jsx)(t.pre,{children:(0,g.jsx)(t.code,{className:"language-js",children:"import '@domg-wc/qlik/infoblock';\nimport viz_without_views from './visuals.json' assert {type: 'json'}\n\nconst connection = new Qlik(\"omgevingsloketrapport.omgeving.vlaanderen.be\", \"594c04b6-f319-4cb9-962c-24b0f7aa6f5e\");\nawait connection.init();\nthis.connection = connection;\n"})}),"\n",(0,g.jsx)(t.pre,{children:(0,g.jsx)(t.code,{className:"language-html",children:'<vl-template>\n        <vl-qlik-infoblock title="Marie Jeanne" icon="airplane" .connection="${connection}" .visuals="${viz_without_views}">\n            <span>Do something</span>\n        </vl-qlik-infoblock>\n</vl-template>\n'})}),"\n",(0,g.jsx)(f.Xz,{of:w}),"\n",(0,g.jsx)(t.h2,{id:"configuratie",children:"Configuratie"}),"\n",(0,g.jsx)(f.Ed,{of:w}),"\n",(0,g.jsx)(t.h2,{id:"types",children:"Types"}),"\n",(0,g.jsx)(t.pre,{children:(0,g.jsx)(t.code,{className:"language-ts",children:'export type Filter = {\n    id: string,\n    filter: FilterObj\n}\n\ntype FilterObj = {\n    name: string,\n    fieldQualifier: string,\n    field: string,\n    nrOfValues: number\n}\n\nexport type DashboardVisualization = {\n    type: string,\n    id: string,\n    height: string,\n    width?: string,\n    label: string,\n    "align-label"?: string,\n    "align-visual"?: string,\n    colSize?: number,\n    properties?: object,\n    options?: object\n}\n\nexport type InfoblockVisualization = {\n    title: string,\n    icon: string,\n    type: string,\n    id: string,\n    height: string,\n    width?: string,\n    align: string,\n    colSize?: number,\n    properties?: object\n    visuals?: InfoblockVisualization[][]\n}\n\nexport type Views = {\n    [key: string]: {\n        order: number\n        label: string,\n        visualisations: DashboardVisualization[][]\n    },\n}\n'})})]})}let x=JSON.parse('[[{"title":"Aantal toezichthouders","icon":"cat.jpeg","align":"left","id":"RXjdD","type":"kpi","height":"50px"}]]'),j={title:"qlik/qlik-infoblock",args:l,argTypes:a,tags:["autodocs"],parameters:{docs:{page:function(e={}){let{wrapper:t}=Object.assign({},(0,y.ah)(),e.components);return t?(0,g.jsx)(t,Object.assign({},e,{children:(0,g.jsx)(k,e)})):k(e)}}}};async function $({title:e,icon:t}){let i=new o.Xg("omgevingsloketrapport.omgeving.vlaanderen.be","594c04b6-f319-4cb9-962c-24b0f7aa6f5e");return await i.init(),(0,s.dy)` <vl-qlik-infoblock
        title="${e}"
        icon="${t}"
        .connection="${i}"
        .visuals="${x}"
    >
        <span>Do something</span>
    </vl-qlik-infoblock>`}let w=(0,n.yg)(l,e=>(0,s.dy)`${(0,r.C)($(e),(0,s.dy)` <vl-loader data-vl-text>Visualisatie aan het laden</vl-loader>`)}`).bind({});w.storyName="vl-qlik-infoblock - default",w.args={title:"Marie Jeanne",icon:"airplane"},w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:"story(qlikInfoblockArgs, args => html`${until(render(args), html` <vl-loader data-vl-text>Visualisatie aan het laden</vl-loader>`)}`)",...w.parameters?.docs?.source}}};let q=["QlikInfoblockDefault"]},"./node_modules/memoizerific sync recursive":e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id="./node_modules/memoizerific sync recursive",e.exports=t},"./libs/qlik/src/utils/qlik-render-utils.ts":(e,t,i)=>{"use strict";i.d(t,{AT:()=>r,DR:()=>h,Ds:()=>p,LZ:()=>v,Oe:()=>u,Q8:()=>a,fn:()=>d});var s=i("./node_modules/lit/directives/repeat.js"),n=i("./node_modules/lit/index.js");let l=e=>e.template,a=(...e)=>{let t=e.filter(l);return 0===t.length?(0,n.dy)``:(0,n.dy)` <div is="vl-grid" data-vl-is-stacked>
        ${(0,s.r)(t,e=>e.id||"",e=>o(e))}
    </div>`},o=({push:e=0,extraSmallSize:t=12,extraSmallMaxSize:i=12,smallSize:s=t,smallMaxSize:l=i,mediumSize:a=s,mediumMaxSize:o=l,size:r=a,maxSize:d=o,template:c=(0,n.dy)``}={})=>(0,n.dy)` <div
        is="vl-column"
        data-vl-push="${e}"
        data-vl-size="${r}"
        data-vl-max-size="${d}"
        data-vl-medium-size="${a}"
        data-vl-medium-max-size="${o}"
        data-vl-small-size="${s}"
        data-vl-small-max-size="${l}"
        data-vl-extra-small-size="${t}"
        data-vl-extra-small-max-size="${i}"
    >
        ${c}
    </div>`,r=({component:e,choices:t,selectedChoices:i,sortFilter:s,placeholder:n})=>{setTimeout(()=>{e.ready().then(()=>{s&&(e.sortFilter=s),n&&t.push({label:n,value:"",placeholder:!0,selected:!0}),i&&t.forEach(e=>e.selected=i.some(t=>t===e.value)),e._choices.removeActiveItems(),e.choices=t})},0)},d=e=>t=>c(e)(`#${t}`),c=e=>t=>e.shadowRoot?e.shadowRoot.querySelector(t):e.querySelector(t),u=e=>t=>e.shadowRoot?e.shadowRoot.querySelectorAll(t):e.querySelectorAll(t),p=({func:e,delay:t=100,context:i})=>{let s;return(...n)=>{let l=e.bind(i,...n);clearTimeout(s),s=setTimeout(l,t)}},h=e=>(t,i)=>{let s=e(t),n=e(i);return s===n?0:s<n?-1:1},v=(e,t)=>{(async()=>{e.setAttribute("disabled",""),e.setAttribute("loading",""),await t()})().catch(e=>{console.log(e)}).finally(()=>{e.removeAttribute("disabled",""),e.removeAttribute("loading","")})}},"./libs/qlik/src/visual/index.ts":(e,t,i)=>{"use strict";i.d(t,{V:()=>s.V});var s=i("./libs/qlik/src/visual/vl-qlik-visual.component.ts")},"./libs/qlik/src/visual/vl-qlik-visual.component.ts":(e,t,i)=>{"use strict";i.d(t,{V:()=>a});var s=i("./node_modules/lit/index.js"),n=i("./libs/common/utilities/src/index.ts"),l=i("./libs/elements/src/index.ts");class a extends n.fS{static get styles(){return[l.CX]}static get properties(){return{type:{type:String,attribute:"type",reflect:!0},qlikId:{type:String,attribute:"qlik-id",reflect:!0},height:{type:String,attribute:"height",reflect:!0},width:{type:String,attribute:"width",reflect:!0},additionalStyle:{type:String,attribute:"additional-style",reflect:!0},properties:{type:Object},stardust:{type:Object}}}async updated(e){super.updated(e),this.visual&&this.visual.destroy(),this.visual=await this.stardust?.render({element:this.shadowRoot.getElementById(`visual-${this.qlikId}`),id:this.qlikId,type:this.type,properties:this.properties}),this.visual?.model.on("changed",(()=>{this.dispatchEvent(new CustomEvent("visual-changed"))}).bind(this)),"distributionplot"===this.type&&await this.visual?.__DO_NOT_USE__.applyProperties(this.properties)}render(){let e=(0,s.iv)`
            ${(0,s.$m)(`${this.additionalStyle};height: ${this.height};${this.width?`width: ${this.width}`:""}`)}
        `;return(0,s.dy)` <div id="visual-${this.qlikId}" style="${e}"></div> `}disconnectedCallback(){super.disconnectedCallback(),this.visual&&this.visual.destroy()}constructor(...e){super(...e),this.type="",this.qlikId="",this.height="",this.width="",this.additionalStyle=""}}a=function(e,t,i,s){var n,l=arguments.length,a=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(l<3?n(a):l>3?n(t,i,a):n(t,i))||a);return l>3&&a&&Object.defineProperty(t,i,a),a}([(0,n.a6)("vl-qlik-visual")],a)}}]);