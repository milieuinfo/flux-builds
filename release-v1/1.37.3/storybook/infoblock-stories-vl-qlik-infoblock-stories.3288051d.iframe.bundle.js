(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[3021],{"../../libs/qlik/src/infoblock/stories/vl-qlik-infoblock.stories.ts":(e,t,i)=>{"use strict";i.r(t),i.d(t,{QlikInfoblockDefault:()=>$,__namedExportsOrder:()=>w,default:()=>j});var s=i("../../node_modules/lit-html/lit-html.js"),n=i("../../libs/common/storybook/src/index.ts");let l={...n.D8,title:"",icon:"",visuals:null,connection:null},o={...(0,n.RN)(!0),title:{name:"title",description:"Titel van het infoblock, zie ``vl-infoblock",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:l.title}}},icon:{name:"icon",description:"Icoon van het infoblock, zie `vl-icon`",table:{type:{summary:n.QE.STRING},category:n.R6.ATTRIBUTES,defaultValue:{summary:l.icon}}},visuals:{name:"visuals",description:"Het object dat de eigenlijke visualisatie config bevat",table:{type:{summary:"InfoblockVisualization[][]"},category:n.R6.PROPERTIES,defaultValue:{summary:l.visuals}}},connection:{name:"connection",description:"Het connectie object dat wordt aangemaakt door gebruik te maken van `@domg/qlik-lib`",table:{type:{summary:"Qlik"},category:n.R6.PROPERTIES,defaultValue:{summary:l.connection}}}};var a=i("../../node_modules/@domg/qlik-lib/build/release/index.js"),r=i("../../node_modules/lit/directives/until.js"),c=i("../../node_modules/lit/index.js"),d=i("../../libs/common/utilities/src/index.ts"),u=i("../../libs/elements/src/index.ts"),p=i("../../libs/qlik/src/utils/qlik-render-utils.ts"),h=i("../../libs/components/src/index.ts"),m=i("../../libs/qlik/src/visual/index.ts");let v=Array.from({length:13},(e,t)=>t).flatMap(e=>Array.from({length:13},(t,i)=>(0,c.AH)`
            .vl-col--${e}-${i} {
                flex-basis: ${e/i*100}%;
                max-width: ${e/i*100}%;
                min-width: ${e/i*100}%;
            }
        `));class b extends d.jW{static{(0,d.gy)([h.Pq,h.LK,m.F,h.H])}static get styles(){return[u.hF,v]}static get properties(){return{title:{type:String,attribute:"title",reflect:!0},icon:{type:String,attribute:"icon",reflect:!0},visuals:{type:Array},connection:{type:Object},connected:{type:Boolean,state:!0}}}async firstUpdated(e){super.firstUpdated(e),this.connection&&!this.connected&&(this.stardust=await (0,a.rp)(this.connection.app),this.connected=!0)}render(){return this.connected?(0,c.qy)`
            <vl-infoblock data-vl-title="${this.title}" data-vl-icon="${this.icon}">
                <slot></slot>
                ${this.renderVisualisations()}
            </vl-infoblock>
        `:(0,c.qy)` <vl-loader data-vl-text="Visualisatie is aan het laden"></vl-loader>`}renderVisualisations(){return(0,p.xT)(...this.visuals.flatMap(e=>this.renderVisualRow(e)))}renderVisualRow(e){return e.map(t=>Array.isArray(t)?{size:1,maxSize:e.length,template:(0,p.xT)(...this.renderVisualRow(t))}:{size:t.colSize||1,maxSize:e.length,template:this.renderVisual(t)})}renderVisual(e){return(0,c.qy)`
            <vl-info-tile data-vl-auto-open="true" ?data-vl-center="${"center"===e.align}">
                <span slot="title">${e.title}</span>
                <div slot="content">
                    ${e.icon?(0,c.qy)`<img class="icon" src="${e.icon}" />`:(0,c.qy)``}
                    <vl-qlik-visual
                        qlik-id="${e.id}"
                        type="${e.type}"
                        height="${e.height}"
                        .stardust="${this.stardust}"
                        .properties="${e.properties}"
                    ></vl-qlik-visual>
                    ${e.visuals?(0,p.xT)(...e.visuals.flatMap(e=>this.renderVisualRow(e))):(0,c.qy)``}
                </div>
            </vl-info-tile>
        `}constructor(...e){super(...e),this.title="",this.icon=""}}b=function(e,t,i,s){var n,l=arguments.length,o=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([(0,d.M1)("vl-qlik-infoblock")],b),i("../../node_modules/react/index.js");var g=i("../../node_modules/react/jsx-runtime.js"),y=i("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),f=i("../../node_modules/@storybook/blocks/dist/index.mjs");function k(e){let t=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code"},(0,y.RP)(),e.components);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(t.h1,{id:"visual",children:"Visual"}),"\n",(0,g.jsxs)(t.p,{children:["Gebruik de ",(0,g.jsx)("code",{children:"vl-qlik-infoblock"})," component om een infoblock te maken met icoon, titel, eventuele tekst en verschillende visualisaties.s"]}),"\n",(0,g.jsx)(t.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,g.jsx)(t.pre,{children:(0,g.jsx)(t.code,{className:"language-js",children:"import '@domg-wc/qlik/infoblock';\nimport viz_without_views from './visuals.json' assert {type: 'json'}\n\nconst connection = new Qlik(\"omgevingsloketrapport.omgeving.vlaanderen.be\", \"594c04b6-f319-4cb9-962c-24b0f7aa6f5e\");\nawait connection.init();\nthis.connection = connection;\n"})}),"\n",(0,g.jsx)(t.pre,{children:(0,g.jsx)(t.code,{className:"language-html",children:'<vl-template>\n        <vl-qlik-infoblock title="Marie Jeanne" icon="airplane" .connection="${connection}" .visuals="${viz_without_views}">\n            <span>Do something</span>\n        </vl-qlik-infoblock>\n</vl-template>\n'})}),"\n",(0,g.jsx)(f.Hl,{of:$}),"\n",(0,g.jsx)(t.h2,{id:"configuratie",children:"Configuratie"}),"\n",(0,g.jsx)(f.ov,{of:$}),"\n",(0,g.jsx)(t.h2,{id:"types",children:"Types"}),"\n",(0,g.jsx)(t.pre,{children:(0,g.jsx)(t.code,{className:"language-ts",children:'export type Filter = {\n    id: string,\n    filter: FilterObj\n}\n\ntype FilterObj = {\n    name: string,\n    fieldQualifier: string,\n    field: string,\n    nrOfValues: number\n}\n\nexport type DashboardVisualization = {\n    type: string,\n    id: string,\n    height: string,\n    width?: string,\n    label: string,\n    "align-label"?: string,\n    "align-visual"?: string,\n    colSize?: number,\n    properties?: object,\n    options?: object\n}\n\nexport type InfoblockVisualization = {\n    title: string,\n    icon: string,\n    type: string,\n    id: string,\n    height: string,\n    width?: string,\n    align: string,\n    colSize?: number,\n    properties?: object\n    visuals?: InfoblockVisualization[][]\n}\n\nexport type Views = {\n    [key: string]: {\n        order: number\n        label: string,\n        visualisations: DashboardVisualization[][]\n    },\n}\n'})})]})}let x=JSON.parse('[[{"title":"Aantal toezichthouders","icon":"cat.jpeg","align":"left","id":"RXjdD","type":"kpi","height":"50px"}]]'),j={title:"qlik/qlik-infoblock",args:l,argTypes:o,tags:["autodocs"],parameters:{docs:{page:function(e={}){let{wrapper:t}=Object.assign({},(0,y.RP)(),e.components);return t?(0,g.jsx)(t,Object.assign({},e,{children:(0,g.jsx)(k,e)})):k(e)}}}};async function q({title:e,icon:t}){let i=new a.m_("omgevingsloketrapport.omgeving.vlaanderen.be","594c04b6-f319-4cb9-962c-24b0f7aa6f5e");return await i.init(),(0,s.qy)` <vl-qlik-infoblock
        title="${e}"
        icon="${t}"
        .connection="${i}"
        .visuals="${x}"
    >
        <span>Do something</span>
    </vl-qlik-infoblock>`}let $=(0,n._7)(l,e=>(0,s.qy)`${(0,r.T)(q(e),(0,s.qy)` <vl-loader data-vl-text>Visualisatie aan het laden</vl-loader>`)}`).bind({});$.storyName="vl-qlik-infoblock - default",$.args={title:"Marie Jeanne",icon:"airplane"},$.parameters={...$.parameters,docs:{...$.parameters?.docs,source:{originalSource:"story(qlikInfoblockArgs, args => html`${until(render(args), html` <vl-loader data-vl-text>Visualisatie aan het laden</vl-loader>`)}`)",...$.parameters?.docs?.source}}};let w=["QlikInfoblockDefault"]},"../../node_modules/memoizerific sync recursive":e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id="../../node_modules/memoizerific sync recursive",e.exports=t},"../../libs/qlik/src/utils/qlik-render-utils.ts":(e,t,i)=>{"use strict";i.d(t,{VN:()=>c,bF:()=>m,it:()=>u,ld:()=>h,sg:()=>p,ue:()=>r,xT:()=>o});var s=i("../../node_modules/lit/directives/repeat.js"),n=i("../../node_modules/lit/index.js");let l=e=>e.template,o=(...e)=>{let t=e.filter(l);return 0===t.length?(0,n.qy)``:(0,n.qy)` <div is="vl-grid" data-vl-is-stacked>
        ${(0,s.u)(t,e=>e.id||"",e=>a(e))}
    </div>`},a=({push:e=0,extraSmallSize:t=12,extraSmallMaxSize:i=12,smallSize:s=t,smallMaxSize:l=i,mediumSize:o=s,mediumMaxSize:a=l,size:r=o,maxSize:c=a,template:d=(0,n.qy)``}={})=>(0,n.qy)` <div
        is="vl-column"
        data-vl-push="${e}"
        data-vl-size="${r}"
        data-vl-max-size="${c}"
        data-vl-medium-size="${o}"
        data-vl-medium-max-size="${a}"
        data-vl-small-size="${s}"
        data-vl-small-max-size="${l}"
        data-vl-extra-small-size="${t}"
        data-vl-extra-small-max-size="${i}"
    >
        ${d}
    </div>`,r=({component:e,choices:t,selectedChoices:i,sortFilter:s,placeholder:n})=>{setTimeout(()=>{e.ready().then(()=>{s&&(e.sortFilter=s),n&&t.push({label:n,value:"",placeholder:!0,selected:!0}),i&&t.forEach(e=>e.selected=i.some(t=>t===e.value)),e._choices.removeActiveItems(),e.choices=t})},0)},c=e=>t=>d(e)(`#${t}`),d=e=>t=>e.shadowRoot?e.shadowRoot.querySelector(t):e.querySelector(t),u=e=>t=>e.shadowRoot?e.shadowRoot.querySelectorAll(t):e.querySelectorAll(t),p=({func:e,delay:t=100,context:i})=>{let s;return(...n)=>{let l=e.bind(i,...n);clearTimeout(s),s=setTimeout(l,t)}},h=e=>(t,i)=>{let s=e(t),n=e(i);return s===n?0:s<n?-1:1},m=(e,t)=>{(async()=>{e.setAttribute("disabled",""),e.setAttribute("loading",""),await t()})().catch(e=>{console.log(e)}).finally(()=>{e.removeAttribute("disabled",""),e.removeAttribute("loading","")})}},"../../libs/qlik/src/visual/index.ts":(e,t,i)=>{"use strict";i.d(t,{F:()=>s.F});var s=i("../../libs/qlik/src/visual/vl-qlik-visual.component.ts")},"../../libs/qlik/src/visual/vl-qlik-visual.component.ts":(e,t,i)=>{"use strict";i.d(t,{F:()=>o});var s=i("../../node_modules/lit/index.js"),n=i("../../libs/common/utilities/src/index.ts"),l=i("../../libs/elements/src/index.ts");class o extends n.jW{static get styles(){return[l.hF]}static get properties(){return{type:{type:String,attribute:"type",reflect:!0},qlikId:{type:String,attribute:"qlik-id",reflect:!0},height:{type:String,attribute:"height",reflect:!0},width:{type:String,attribute:"width",reflect:!0},additionalStyle:{type:String,attribute:"additional-style",reflect:!0},properties:{type:Object},stardust:{type:Object}}}async updated(e){super.updated(e),this.visual&&this.visual.destroy(),this.visual=await this.stardust?.render({element:this.shadowRoot.getElementById(`visual-${this.qlikId}`),id:this.qlikId,type:this.type,properties:this.properties}),this.visual?.model.on("changed",(()=>{this.dispatchEvent(new CustomEvent("visual-changed"))}).bind(this)),"distributionplot"===this.type&&await this.visual?.__DO_NOT_USE__.applyProperties(this.properties)}render(){let e=(0,s.AH)`
            ${(0,s.iz)(`${this.additionalStyle};height: ${this.height};${this.width?`width: ${this.width}`:""}`)}
        `;return(0,s.qy)` <div id="visual-${this.qlikId}" style="${e}"></div> `}disconnectedCallback(){super.disconnectedCallback(),this.visual&&this.visual.destroy()}constructor(...e){super(...e),this.type="",this.qlikId="",this.height="",this.width="",this.additionalStyle=""}}o=function(e,t,i,s){var n,l=arguments.length,o=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([(0,n.M1)("vl-qlik-visual")],o)}}]);