"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[489],{"../../node_modules/vidstack/prod/chunks/vidstack-CSv7rfHP.js":(t,e,i)=>{i.d(e,{z:()=>n});var a=i("../../node_modules/vidstack/prod/chunks/vidstack-CRlI3Mh7.js");class s{#t;#e;#i;#a=(0,a.O)(!1);get supported(){return this.#a()}constructor(t,e){this.#t=t,this.#e=e,this.#s()}#s(){this.#t?.remote&&this.canPrompt&&(this.#t.remote.watchAvailability(t=>{this.#a.set(t)}).catch(()=>{this.#a.set(!1)}),(0,a.QZ)(this.#n.bind(this)))}#n(){if(!this.#a())return;let t=this.#d.bind(this);t(),(0,a.k6)(this.#t,"playing",t);let e=new a.En(this.#t.remote);for(let i of["connecting","connect","disconnect"])e.add(i,t)}async prompt(){if(!this.supported)throw Error("Not supported on this platform.");return"airplay"===this.type&&this.#t.webkitShowPlaybackTargetPicker?this.#t.webkitShowPlaybackTargetPicker():this.#t.remote.prompt()}#d(t){let e=this.#t.remote.state;if(e===this.#i)return;let i={type:this.type,state:e};this.#e.notify("remote-playback-change",i,t),this.#i=e}}class n extends s{type="airplay";get canPrompt(){return"WebKitPlaybackTargetAvailabilityEvent"in window}}},"../../node_modules/vidstack/prod/chunks/vidstack-DSYpsFWk.js":(t,e,i)=>{i.d(e,{e:()=>s});var a=i("../../node_modules/vidstack/prod/chunks/vidstack-CRlI3Mh7.js");class s{#o;#h;constructor(t){this.#h=t}start(){(0,a.b0)(this.#o)&&this.#r()}stop(){(0,a.Et)(this.#o)&&window.cancelAnimationFrame(this.#o),this.#o=void 0}#r(){this.#o=window.requestAnimationFrame(()=>{(0,a.b0)(this.#o)||(this.#h(),this.#r())})}}},"../../node_modules/vidstack/prod/providers/vidstack-html.js":(t,e,i)=>{i.d(e,{B:()=>b});var a=i("../../node_modules/vidstack/prod/chunks/vidstack-DyMkFGuS.js"),s=i("../../node_modules/vidstack/prod/chunks/vidstack-CRlI3Mh7.js"),n=i("../../node_modules/vidstack/prod/chunks/vidstack-DSYpsFWk.js"),d=i("../../node_modules/vidstack/prod/chunks/vidstack-Dihypf8P.js"),o=i("../../node_modules/vidstack/prod/chunks/vidstack-D5EzK014.js");let h=null,r=[],c=[];function l(){return h??=new AudioContext}function u(){h&&0===r.length&&0===c.length&&h.close().then(()=>{h=null})}class m{#t;#c;#l=null;#u=null;get currentGain(){return this.#l?.gain?.value??null}get supported(){return!0}constructor(t,e){this.#t=t,this.#c=e}setGain(t){let e=this.currentGain;if(t!==this.currentGain){if(1===t&&1!==e){this.removeGain();return}!this.#l&&(this.#l=function(){let t=l(),e=t.createGain();return e.connect(t.destination),r.push(e),e}(),this.#u&&this.#u.connect(this.#l)),this.#u||(this.#u=function(t,e){let i=l().createMediaElementSource(t);return e&&i.connect(e),c.push(i),i}(this.#t,this.#l)),this.#l.gain.value=t,this.#c(t)}}removeGain(){this.#l&&(this.#u&&this.#u.connect(l().destination),this.#m(),this.#c(null))}destroy(){this.#p(),this.#m()}#p(){if(this.#u)try{!function(t){let e=c.indexOf(t);-1!==e&&(c.splice(e,1),t.disconnect(),u())}(this.#u)}catch(t){}finally{this.#u=null}}#m(){if(this.#l)try{!function(t){let e=r.indexOf(t);-1!==e&&(r.splice(e,1),t.disconnect(),u())}(this.#l)}catch(t){}finally{this.#l=null}}}let p=["focus","blur","visibilitychange","pageshow","pagehide"];class v{#i=(0,s.O)(y());#v=(0,s.O)(document.visibilityState);#y;connect(){let t=new s.En(window),e=this.#g.bind(this);for(let i of p)t.add(i,e);a.Yw&&t.add("beforeunload",t=>{this.#y=setTimeout(()=>{t.defaultPrevented||t.returnValue.length>0||(this.#i.set("hidden"),this.#v.set("hidden"))},0)})}get pageState(){return this.#i()}get visibility(){return this.#v()}#g(t){a.Yw&&window.clearTimeout(this.#y),("blur"!==t.type||"active"===this.#i())&&(this.#i.set(y(t)),this.#v.set("hidden"==document.visibilityState?"hidden":"visible"))}}function y(t){return t?.type==="blur"||"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}class g{#k;#e;#b=!1;#f=!1;#T=!1;#x=new n.e(this.#S.bind(this));#w=new v;#E;get #t(){return this.#k.media}constructor(t,e){this.#k=t,this.#e=e,this.#E=new s.En(t.media),this.#C(),this.#w.connect(),(0,s.QZ)(this.#L.bind(this)),(0,s.zp)(this.#P.bind(this))}#P(){this.#f=!1,this.#T=!1,this.#x.stop(),this.#E.abort(),this.#N?.clear()}#A=0;#D=-1;#S(){let t=this.#t.currentTime;a.Yw&&t-this.#D<.35||this.#A===t||(this.#j(t),this.#A=t)}#C(){this.#R("loadstart",this.#$),this.#R("abort",this.#F),this.#R("emptied",this.#G),this.#R("error",this.#M),this.#R("volumechange",this.#B)}#_(){this.#f||(this.#R("loadeddata",this.#q),this.#R("loadedmetadata",this.#I),this.#R("canplay",this.#O),this.#R("canplaythrough",this.#U),this.#R("durationchange",this.#V),this.#R("play",this.#Y),this.#R("progress",this.#z),this.#R("stalled",this.#W),this.#R("suspend",this.#Q),this.#R("ratechange",this.#H),this.#f=!0)}#K(){this.#T||(this.#R("pause",this.#Z),this.#R("playing",this.#J),this.#R("seeked",this.#X),this.#R("seeking",this.#tt),this.#R("ended",this.#te),this.#R("waiting",this.#ti),this.#T=!0)}#N=void 0;#ta=void 0;#R(t,e){this.#E.add(t,e.bind(this))}#ts(t){}#j(t,e){let i=Math.min(t,this.#e.$state.seekableEnd());this.#e.notify("time-change",i,e)}#$(t){if(3===this.#t.networkState){this.#F(t);return}this.#_(),this.#e.notify("load-start",void 0,t)}#F(t){this.#e.notify("abort",void 0,t)}#G(){this.#e.notify("emptied",void 0,event)}#q(t){this.#e.notify("loaded-data",void 0,t)}#I(t){this.#A=0,this.#D=-1,this.#K(),this.#e.notify("loaded-metadata",void 0,t),(a.pz||a.Yw&&(0,a.YJ)(this.#e.$state.source()))&&this.#e.delegate.ready(this.#tn(),t)}#tn(){return{provider:(0,s.se)(this.#e.$provider),duration:this.#t.duration,buffered:this.#t.buffered,seekable:this.#t.seekable}}#Y(t){this.#e.$state.canPlay&&this.#e.notify("play",void 0,t)}#Z(t){(1!==this.#t.readyState||this.#b)&&(this.#b=!1,this.#x.stop(),this.#e.notify("pause",void 0,t))}#O(t){this.#e.delegate.ready(this.#tn(),t)}#U(t){this.#e.$state.started()||this.#e.notify("can-play-through",this.#tn(),t)}#J(t){this.#t.paused||(this.#b=!1,this.#e.notify("playing",void 0,t),this.#x.start())}#W(t){this.#e.notify("stalled",void 0,t),this.#t.readyState<3&&(this.#b=!0,this.#e.notify("waiting",void 0,t))}#ti(t){this.#t.readyState<3&&(this.#b=!0,this.#e.notify("waiting",void 0,t))}#te(t){this.#x.stop(),this.#j(this.#t.duration,t),this.#e.notify("end",void 0,t),this.#e.$state.loop()&&(0,s.gD)(this.#t.controls)&&(this.#t.controls=!1)}#L(){let t=this.#e.$state.paused(),e="hidden"===this.#w.visibility;(t||e)&&(0,s.k6)(this.#t,"timeupdate",this.#td.bind(this))}#td(t){this.#j(this.#t.currentTime,t)}#V(t){this.#e.$state.ended()&&this.#j(this.#t.duration,t),this.#e.notify("duration-change",this.#t.duration,t)}#B(t){let e={volume:this.#t.volume,muted:this.#t.muted};this.#e.notify("volume-change",e,t)}#X(t){this.#D=this.#t.currentTime,this.#j(this.#t.currentTime,t),this.#e.notify("seeked",this.#t.currentTime,t),Math.trunc(this.#t.currentTime)===Math.trunc(this.#t.duration)&&(0,d.Q4)(this.#t.duration)>(0,d.Q4)(this.#t.currentTime)&&(this.#j(this.#t.duration,t),this.#t.ended||this.#e.player.dispatch(new s.vP("media-play-request",{trigger:t})))}#tt(t){this.#e.notify("seeking",this.#t.currentTime,t)}#z(t){let e={buffered:this.#t.buffered,seekable:this.#t.seekable};this.#e.notify("progress",e,t)}#Q(t){this.#e.notify("suspend",void 0,t)}#H(t){this.#e.notify("rate-change",this.#t.playbackRate,t)}#M(t){let e=this.#t.error;if(!e)return;let i={message:e.message,code:e.code,mediaError:e};this.#e.notify("error",i,t)}}class k{#k;#e;get #to(){return this.#k.media.audioTracks}constructor(t,e){this.#k=t,this.#e=e,this.#to.onaddtrack=this.#th.bind(this),this.#to.onremovetrack=this.#tr.bind(this),this.#to.onchange=this.#tc.bind(this),(0,s.k6)(this.#e.audioTracks,"change",this.#tl.bind(this))}#th(t){let e=t.track;if(""===e.label)return;let i={id:e.id.toString()||`native-audio-${this.#e.audioTracks.length}`,label:e.label,language:e.language,kind:e.kind,selected:!1};this.#e.audioTracks[o.j.add](i,t),e.enabled&&(i.selected=!0)}#tr(t){let e=this.#e.audioTracks.getById(t.track.id);e&&this.#e.audioTracks[o.j.remove](e,t)}#tc(t){let e=this.#tu();if(!e)return;let i=this.#e.audioTracks.getById(e.id);i&&this.#e.audioTracks[o.j.select](i,!0,t)}#tu(){return Array.from(this.#to).find(t=>t.enabled)}#tl(t){let{current:e}=t.detail;if(!e)return;let i=this.#to.getTrackById(e.id);if(i){let t=this.#tu();t&&(t.enabled=!1),i.enabled=!0}}}class b{constructor(t,e){this.media=t,this.ctx=e,this.audioGain=new m(t,t=>{this.ctx.notify("audio-gain-change",t)})}scope=(0,s.Ds)();currentSrc=null;audioGain;setup(){new g(this,this.ctx),"audioTracks"in this.media&&new k(this,this.ctx),(0,s.zp)(()=>{for(let t of(this.audioGain.destroy(),this.media.srcObject=null,this.media.removeAttribute("src"),this.media.querySelectorAll("source")))t.remove();this.media.load()})}get type(){return""}setPlaybackRate(t){this.media.playbackRate=t}async play(){return this.media.play()}async pause(){return this.media.pause()}setMuted(t){this.media.muted=t}setVolume(t){this.media.volume=t}setCurrentTime(t){this.media.currentTime=t}setPlaysInline(t){(0,s.Bq)(this.media,"playsinline",t)}async loadSource({src:t,type:e},i){this.media.preload=i||"",(0,a.dv)(t)?(this.removeSource(),this.media.srcObject=t):(this.media.srcObject=null,(0,s.Kg)(t)?"?"!==e?this.appendSource({src:t,type:e}):(this.removeSource(),this.media.src=this.#tm(t)):(this.removeSource(),this.media.src=window.URL.createObjectURL(t))),this.media.load(),this.currentSrc={src:t,type:e}}appendSource(t,e){let i=this.media.querySelector("source[data-vds]"),a=i??document.createElement("source");(0,s.Bq)(a,"src",this.#tm(t.src)),(0,s.Bq)(a,"type","?"!==t.type?t.type:e),(0,s.Bq)(a,"data-vds",""),i||this.media.append(a)}removeSource(){this.media.querySelector("source[data-vds]")?.remove()}#tm(t){let{clipStartTime:e,clipEndTime:i}=this.ctx.$state,a=e(),s=i();return a>0&&s>0?`${t}#t=${a},${s}`:a>0?`${t}#t=${a}`:s>0?`${t}#t=0,${s}`:t}}}}]);