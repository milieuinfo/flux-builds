"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[2627,6369],{"../../node_modules/vidstack/prod/providers/vidstack-hls.js":(t,e,i)=>{i.r(e),i.d(e,{HLSProvider:()=>y});var s=i("../../node_modules/vidstack/prod/chunks/vidstack-vDnjyKV8.js"),n=i("../../node_modules/vidstack/prod/chunks/vidstack-DyMkFGuS.js"),r=i("../../node_modules/vidstack/prod/providers/vidstack-video.js"),o=i("../../node_modules/vidstack/prod/chunks/vidstack-CRlI3Mh7.js"),a=i("../../node_modules/vidstack/prod/chunks/vidstack-B01xzxC4.js"),c=i("../../node_modules/vidstack/prod/chunks/vidstack-B5628Ni3.js"),d=i("../../node_modules/vidstack/prod/chunks/vidstack-D5EzK014.js"),h=i("../../node_modules/vidstack/prod/chunks/vidstack-DSYpsFWk.js"),l=i("../../node_modules/vidstack/prod/chunks/vidstack-C9vIqaYT.js");let u=t=>(0,o.BW)(t);class p{#t;#e;#i=null;#s=null;config={};#n=new Set;get instance(){return this.#i}constructor(t,e){this.#t=t,this.#e=e}setup(t){let{streamType:e}=this.#e.$state,i=(0,o.se)(e).includes("live"),s=(0,o.se)(e).includes("ll-");this.#i=new t({lowLatencyMode:s,backBufferLength:s?4:i?8:void 0,renderTextTracksNatively:!1,...this.config});let n=this.#r.bind(this);for(let e of Object.values(t.Events))this.#i.on(e,n);for(let e of(this.#i.on(t.Events.ERROR,this.#o.bind(this)),this.#n))e(this.#i);this.#e.player.dispatch("hls-instance",{detail:this.#i}),this.#i.attachMedia(this.#t),this.#i.on(t.Events.AUDIO_TRACK_SWITCHED,this.#a.bind(this)),this.#i.on(t.Events.LEVEL_SWITCHED,this.#c.bind(this)),this.#i.on(t.Events.LEVEL_LOADED,this.#d.bind(this)),this.#i.on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,this.#h.bind(this)),this.#i.on(t.Events.CUES_PARSED,this.#l.bind(this)),this.#e.qualities[a.k.enableAuto]=this.#u.bind(this),(0,o.k6)(this.#e.qualities,"change",this.#p.bind(this)),(0,o.k6)(this.#e.audioTracks,"change",this.#v.bind(this)),this.#s=(0,o.QZ)(this.#k.bind(this))}#g(t,e){return new o.vP(u(t),{detail:e})}#k(){if(!this.#e.$state.live())return;let t=new h.e(this.#y.bind(this));return t.start(),t.stop.bind(t)}#y(){this.#e.$state.liveSyncPosition.set(this.#i?.liveSyncPosition??1/0)}#r(t,e){this.#e.player?.dispatch(this.#g(t,e))}#h(t,e){let i=this.#g(t,e),s=-1;for(let t=0;t<e.tracks.length;t++){let n=e.tracks[t],r=n.subtitleTrack??n.closedCaptions,o=new c.to({id:`hls-${n.kind}-${t}`,src:r?.url,label:n.label,language:r?.lang,kind:n.kind,default:n.default});o[c.Hp.readyState]=2,o[c.Hp.onModeChange]=()=>{"showing"===o.mode?(this.#i.subtitleTrack=t,s=t):s===t&&(this.#i.subtitleTrack=-1,s=-1)},this.#e.textTracks.add(o,i)}}#l(t,e){let i=this.#i?.subtitleTrack,s=this.#e.textTracks.getById(`hls-${e.type}-${i}`);if(!s)return;let n=this.#g(t,e);for(let t of e.cues)t.positionAlign="auto",s.addCue(t,n)}#a(t,e){let i=this.#e.audioTracks[e.id];if(i){let s=this.#g(t,e);this.#e.audioTracks[d.j.select](i,!0,s)}}#c(t,e){let i=this.#e.qualities[e.level];if(i){let s=this.#g(t,e);this.#e.qualities[d.j.select](i,!0,s)}}#d(t,e){if(this.#e.$state.canPlay())return;let{type:i,live:s,totalduration:n,targetduration:r}=e.details,c=this.#g(t,e);this.#e.notify("stream-type-change",s?"EVENT"===i&&Number.isFinite(n)&&r>=10?"live:dvr":"live":"on-demand",c),this.#e.notify("duration-change",n,c);let h=this.#i.media;for(let t of(-1===this.#i.currentLevel&&this.#e.qualities[a.k.setAuto](!0,c),this.#i.audioTracks)){let e={id:t.id.toString(),label:t.name,language:t.lang||"",kind:"main"};this.#e.audioTracks[d.j.add](e,c)}for(let t of this.#i.levels){let e={id:t.id?.toString()??t.height+"p",width:t.width,height:t.height,codec:t.codecSet,bitrate:t.bitrate};this.#e.qualities[d.j.add](e,c)}h.dispatchEvent(new o.vP("canplay",{trigger:c}))}#o(t,e){e.fatal&&("mediaError"===e.type?this.#i?.recoverMediaError():this.#b(e.error))}#b(t){this.#e.notify("error",{message:t.message,code:1,error:t})}#u(){this.#i&&(this.#i.currentLevel=-1)}#p(){let{qualities:t}=this.#e;this.#i&&!t.auto&&(this.#i[t.switch+"Level"]=t.selectedIndex,n.G_&&(this.#t.currentTime=this.#t.currentTime))}#v(){let{audioTracks:t}=this.#e;this.#i&&this.#i.audioTrack!==t.selectedIndex&&(this.#i.audioTrack=t.selectedIndex)}onInstance(t){return this.#n.add(t),()=>this.#n.delete(t)}loadSource(t){(0,o.Kg)(t.src)&&this.#i?.loadSource(t.src)}destroy(){this.#i?.destroy(),this.#i=null,this.#s?.(),this.#s=null}}class v{#x;#e;#m;constructor(t,e,i){this.#x=t,this.#e=e,this.#m=i,this.#f()}async #f(){let t={onLoadStart:this.#E.bind(this),onLoaded:this.#S.bind(this),onLoadError:this.#w.bind(this)},e=await g(this.#x,t);return((0,o.b0)(e)&&!(0,o.Kg)(this.#x)&&(e=await k(this.#x,t)),e)?e.isSupported()?e:(this.#e.player.dispatch(new o.vP("hls-unsupported")),this.#e.notify("error",{message:"[vidstack] `hls.js` is not supported in this environment",code:4}),null):null}#E(){this.#e.player.dispatch(new o.vP("hls-lib-load-start"))}#S(t){this.#e.player.dispatch(new o.vP("hls-lib-loaded",{detail:t})),this.#m(t)}#w(t){let e=(0,l.r)(t);this.#e.player.dispatch(new o.vP("hls-lib-load-error",{detail:e})),this.#e.notify("error",{message:e.message,code:4,error:e})}}async function k(t,e={}){if(!(0,o.b0)(t)){if(e.onLoadStart?.(),t.prototype&&t.prototype!==Function)return e.onLoaded?.(t),t;try{let i=(await t())?.default;if(i&&i.isSupported)e.onLoaded?.(i);else throw Error("");return i}catch(t){e.onLoadError?.(t)}}}async function g(t,e={}){if((0,o.Kg)(t)){e.onLoadStart?.();try{if(await (0,s.k0)(t),!(0,o.Tn)(window.Hls))throw Error("");let i=window.Hls;return e.onLoaded?.(i),i}catch(t){e.onLoadError?.(t)}}}class y extends r.VideoProvider{$$PROVIDER_TYPE="HLS";#L=null;#P=new p(this.video,this.ctx);get ctor(){return this.#L}get instance(){return this.#P.instance}static supported=(0,n.m0)();get type(){return"hls"}get canLiveSync(){return!0}#T="https://cdn.jsdelivr.net/npm/hls.js@^1.5.0/dist/hls.min.js";get config(){return this.#P.config}set config(t){this.#P.config=t}get library(){return this.#T}set library(t){this.#T=t}preconnect(){(0,o.Kg)(this.#T)&&(0,s.kZ)(this.#T)}setup(){super.setup(),new v(this.#T,this.ctx,t=>{this.#L=t,this.#P.setup(t),this.ctx.notify("provider-setup",this);let e=(0,o.se)(this.ctx.$state.source);e&&this.loadSource(e)})}async loadSource(t,e){if(!(0,o.Kg)(t.src)){this.removeSource();return}this.media.preload=e||"",this.appendSource(t,"application/x-mpegurl"),this.#P.loadSource(t),this.currentSrc=t}onInstance(t){let e=this.#P.instance;return e&&t(e),this.#P.onInstance(t)}destroy(){this.#P.destroy()}}},"../../node_modules/vidstack/prod/providers/vidstack-video.js":(t,e,i)=>{i.r(e),i.d(e,{VideoProvider:()=>p});var s=i("../../node_modules/vidstack/prod/chunks/vidstack-CRlI3Mh7.js"),n=i("../../node_modules/vidstack/prod/chunks/vidstack-DyMkFGuS.js"),r=i("../../node_modules/vidstack/prod/providers/vidstack-html.js"),o=i("../../node_modules/vidstack/prod/chunks/vidstack-CSv7rfHP.js"),a=i("../../node_modules/vidstack/prod/chunks/vidstack-B5628Ni3.js");class c{#t;#e;constructor(t,e){this.#t=t,this.#e=e,t.textTracks.onaddtrack=this.#_.bind(this),(0,s.zp)(this.#C.bind(this))}#_(t){var e,i;let s=t.track;if(!s||(e=this.#t,i=s,Array.from(e.children).find(t=>t.track===s)))return;let n=new a.to({id:s.id,kind:s.kind,label:s.label??"",language:s.language,type:"vtt"});n[a.Hp.native]={track:s},n[a.Hp.readyState]=2,n[a.Hp.nativeHLS]=!0;let r=0,o=t=>{if(s.cues)for(let e=r;e<s.cues.length;e++)n.addCue(s.cues[e],t),r++};o(t),s.oncuechange=o,this.#e.textTracks.add(n,t),n.setMode(s.mode,t)}#C(){for(let t of(this.#t.textTracks.onaddtrack=null,this.#e.textTracks)){let e=t[a.Hp.native]?.track;e?.oncuechange&&(e.oncuechange=null)}}}class d{#t;#j;constructor(t,e){this.#t=t,this.#j=e,new s.En(t).add("enterpictureinpicture",this.#M.bind(this)).add("leavepictureinpicture",this.#D.bind(this))}get active(){return document.pictureInPictureElement===this.#t}get supported(){return(0,n.dE)(this.#t)}async enter(){return this.#t.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}#M(t){this.#I(!0,t)}#D(t){this.#I(!1,t)}#I=(t,e)=>{this.#j.notify("picture-in-picture-change",t,e)}}class h{#t;#j;#A="inline";get mode(){return this.#A}constructor(t,e){this.#t=t,this.#j=e,(0,s.k6)(t,"webkitpresentationmodechanged",this.#H.bind(this))}get supported(){return(0,n.Jt)(this.#t)}async setPresentationMode(t){this.#A!==t&&this.#t.webkitSetPresentationMode(t)}#H(t){let e=this.#A;this.#A=this.#t.webkitPresentationMode,this.#j.player?.dispatch(new s.vP("video-presentation-change",{detail:this.#A,trigger:t})),["fullscreen","picture-in-picture"].forEach(i=>{(this.#A===i||e===i)&&this.#j.notify(`${i}-change`,this.#A===i,t)})}}class l{#O;get active(){return"fullscreen"===this.#O.mode}get supported(){return this.#O.supported}constructor(t){this.#O=t}async enter(){this.#O.setPresentationMode("fullscreen")}async exit(){this.#O.setPresentationMode("inline")}}class u{#O;get active(){return"picture-in-picture"===this.#O.mode}get supported(){return this.#O.supported}constructor(t){this.#O=t}async enter(){this.#O.setPresentationMode("picture-in-picture")}async exit(){this.#O.setPresentationMode("inline")}}class p extends r.B{$$PROVIDER_TYPE="VIDEO";get type(){return"video"}airPlay;fullscreen;pictureInPicture;constructor(t,e){super(t,e),(0,s.P1)(()=>{if(this.airPlay=new o.z(t,e),(0,n.Jt)(t)){let i=new h(t,e);this.fullscreen=new l(i),this.pictureInPicture=new u(i)}else(0,n.dE)(t)&&(this.pictureInPicture=new d(t,e))},this.scope)}setup(){super.setup(),(0,n.uo)(this.video)&&new c(this.video,this.ctx),this.ctx.textRenderers.attachVideo(this.video),(0,s.zp)(()=>{this.ctx.textRenderers.attachVideo(null)}),"video"===this.type&&this.ctx.notify("provider-setup",this)}get video(){return this.media}}}}]);