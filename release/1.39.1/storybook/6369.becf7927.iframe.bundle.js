"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[6369],{"../../node_modules/vidstack/prod/providers/vidstack-video.js":(e,t,i)=>{i.r(t),i.d(t,{VideoProvider:()=>l});var s=i("../../node_modules/vidstack/prod/chunks/vidstack-CRlI3Mh7.js"),n=i("../../node_modules/vidstack/prod/chunks/vidstack-DyMkFGuS.js"),r=i("../../node_modules/vidstack/prod/providers/vidstack-html.js"),o=i("../../node_modules/vidstack/prod/chunks/vidstack-CSv7rfHP.js"),d=i("../../node_modules/vidstack/prod/chunks/vidstack-B5628Ni3.js");class c{#e;#t;constructor(e,t){this.#e=e,this.#t=t,e.textTracks.onaddtrack=this.#i.bind(this),(0,s.zp)(this.#s.bind(this))}#i(e){var t,i;let s=e.track;if(!s||(t=this.#e,i=s,Array.from(t.children).find(e=>e.track===s)))return;let n=new d.to({id:s.id,kind:s.kind,label:s.label??"",language:s.language,type:"vtt"});n[d.Hp.native]={track:s},n[d.Hp.readyState]=2,n[d.Hp.nativeHLS]=!0;let r=0,o=e=>{if(s.cues)for(let t=r;t<s.cues.length;t++)n.addCue(s.cues[t],e),r++};o(e),s.oncuechange=o,this.#t.textTracks.add(n,e),n.setMode(s.mode,e)}#s(){for(let e of(this.#e.textTracks.onaddtrack=null,this.#t.textTracks)){let t=e[d.Hp.native]?.track;t?.oncuechange&&(t.oncuechange=null)}}}class a{#e;#n;constructor(e,t){this.#e=e,this.#n=t,new s.En(e).add("enterpictureinpicture",this.#r.bind(this)).add("leavepictureinpicture",this.#o.bind(this))}get active(){return document.pictureInPictureElement===this.#e}get supported(){return(0,n.dE)(this.#e)}async enter(){return this.#e.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}#r(e){this.#d(!0,e)}#o(e){this.#d(!1,e)}#d=(e,t)=>{this.#n.notify("picture-in-picture-change",e,t)}}class h{#e;#n;#c="inline";get mode(){return this.#c}constructor(e,t){this.#e=e,this.#n=t,(0,s.k6)(e,"webkitpresentationmodechanged",this.#a.bind(this))}get supported(){return(0,n.Jt)(this.#e)}async setPresentationMode(e){this.#c!==e&&this.#e.webkitSetPresentationMode(e)}#a(e){let t=this.#c;this.#c=this.#e.webkitPresentationMode,this.#n.player?.dispatch(new s.vP("video-presentation-change",{detail:this.#c,trigger:e})),["fullscreen","picture-in-picture"].forEach(i=>{(this.#c===i||t===i)&&this.#n.notify(`${i}-change`,this.#c===i,e)})}}class u{#h;get active(){return"fullscreen"===this.#h.mode}get supported(){return this.#h.supported}constructor(e){this.#h=e}async enter(){this.#h.setPresentationMode("fullscreen")}async exit(){this.#h.setPresentationMode("inline")}}class p{#h;get active(){return"picture-in-picture"===this.#h.mode}get supported(){return this.#h.supported}constructor(e){this.#h=e}async enter(){this.#h.setPresentationMode("picture-in-picture")}async exit(){this.#h.setPresentationMode("inline")}}class l extends r.B{$$PROVIDER_TYPE="VIDEO";get type(){return"video"}airPlay;fullscreen;pictureInPicture;constructor(e,t){super(e,t),(0,s.P1)(()=>{if(this.airPlay=new o.z(e,t),(0,n.Jt)(e)){let i=new h(e,t);this.fullscreen=new u(i),this.pictureInPicture=new p(i)}else(0,n.dE)(e)&&(this.pictureInPicture=new a(e,t))},this.scope)}setup(){super.setup(),(0,n.uo)(this.video)&&new c(this.video,this.ctx),this.ctx.textRenderers.attachVideo(this.video),(0,s.zp)(()=>{this.ctx.textRenderers.attachVideo(null)}),"video"===this.type&&this.ctx.notify("provider-setup",this)}get video(){return this.media}}}}]);