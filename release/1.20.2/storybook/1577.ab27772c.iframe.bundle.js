"use strict";(self.webpackChunkuigov_web_components=self.webpackChunkuigov_web_components||[]).push([[1577],{"./node_modules/ol/interaction/Modify.js":(e,t,r)=>{r.d(t,{Z:()=>G});var n=r("./node_modules/ol/Collection.js"),i=r("./node_modules/ol/CollectionEventType.js"),o=r("./node_modules/ol/events/Event.js"),s=r("./node_modules/ol/events/EventType.js"),a=r("./node_modules/ol/Feature.js"),u=r("./node_modules/ol/MapBrowserEventType.js"),d=r("./node_modules/ol/geom/Point.js"),h=r("./node_modules/ol/interaction/Pointer.js"),l=r("./node_modules/ol/structs/RBush.js"),g=r("./node_modules/ol/source/VectorEventType.js"),_=r("./node_modules/ol/layer/Vector.js"),c=r("./node_modules/ol/source/Vector.js"),f=r("./node_modules/ol/events/condition.js"),p=r("./node_modules/ol/extent.js"),m=r("./node_modules/ol/coordinate.js"),v=r("./node_modules/ol/style/Style.js"),y=r("./node_modules/ol/array.js"),x=r("./node_modules/ol/geom/Polygon.js"),S=r("./node_modules/ol/proj.js"),C=r("./node_modules/ol/util.js"),F=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E=[0,0,0,0],P=[],M={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},w=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.features=r,i.mapBrowserEvent=n,i}return F(t,e),t}(o.ZP),T=function(e){function t(t){var r,o=e.call(this,t)||this;if(o.on,o.once,o.un,o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=t.condition?t.condition:f.Xp,o.defaultDeleteCondition_=function(e){return(0,f.Ko)(e)&&(0,f.Kf)(e)},o.deleteCondition_=t.deleteCondition?t.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:f.Bx,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.featuresBeingModified_=null,o.rBush_=new l.Z,o.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new _.Z({source:new c.Z({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:function(){var e=(0,v.Ly)();return function(t,r){return e.Point}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,o.hitDetection_=null,t.features?r=t.features:t.source&&(o.source_=t.source,r=new n.Z(o.source_.getFeatures()),o.source_.addEventListener(g.Z.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(g.Z.REMOVEFEATURE,o.handleSourceRemove_.bind(o))),!r)throw Error("The modify interaction requires features, a source or a layer");return t.hitDetection&&(o.hitDetection_=t.hitDetection),o.features_=r,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(i.Z.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(i.Z.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o.delta_=[0,0],o.snapToPointer_=void 0===t.snapToPointer?!o.hitDetection_:t.snapToPointer,o}return F(t,e),t.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(s.Z.CHANGE,this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new n.Z;for(var r=this.featuresBeingModified_.getArray(),i=0,o=t.length;i<o;++i)for(var s=t[i],a=0,u=s.length;a<u;++a){var d=s[a].feature;d&&-1===r.indexOf(d)&&this.featuresBeingModified_.push(d)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new w(M.MODIFYSTART,this.featuresBeingModified_,e))}},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(s.Z.CHANGE,this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);t.remove(i)}},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},t.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates();this.rBush_.insert(t.getExtent(),{feature:e,geometry:t,segment:[r,r]})},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],s={feature:e,geometry:t,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(t.getExtent(),s)}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),s={feature:e,geometry:t,index:n,segment:o};this.rBush_.insert((0,p.hI)(o),s)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),d={feature:e,geometry:t,depth:[n],index:s,segment:u};this.rBush_.insert((0,p.hI)(u),d)}},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),d={feature:e,geometry:t,depth:[n],index:s,segment:u};this.rBush_.insert((0,p.hI)(u),d)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,a=o.length;s<a;++s)for(var u=o[s],d=0,h=u.length-1;d<h;++d){var l=u.slice(d,d+2),g={feature:e,geometry:t,depth:[s,n],index:d,segment:l};this.rBush_.insert((0,p.hI)(l),g)}},t.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),n={feature:e,geometry:t,index:0,segment:[r,r]},i={feature:e,geometry:t,index:1,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert((0,p.HK)(r),n);var s=t,a=(0,S.Cs)();if(a&&this.getMap()){var u=this.getMap().getView().getProjection();s=s.clone().transform(a,u),s=(0,x.Bb)(s).transform(u,a)}this.rBush_.insert(s.getExtent(),i)},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}},t.prototype.createOrUpdateVertexFeature_=function(e,t,r){var n=this.vertexFeature_;return n?n.getGeometry().setCoordinates(e):(n=new a.Z(new d.Z(e)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n)),n.set("features",t),n.set("geometries",r),n},t.prototype.handleEvent=function(t){var r;return!t.originalEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=u.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(r=t.type==u.Z.SINGLECLICK&&!!this.ignoreNextSingleClick_||this.removePoint()),t.type==u.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!r)},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);for(var t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],n=[],i=0,o=this.dragSegments_.length;i<o;++i){var s=this.dragSegments_[i],a=s[0],u=a.feature;-1===r.indexOf(u)&&r.push(u);var d=a.geometry;-1===n.indexOf(d)&&n.push(d);for(var h=a.depth,l=void 0,g=a.segment,_=s[1];t.length<d.getStride();)t.push(g[_][t.length]);switch(d.getType()){case"Point":l=t,g[0]=t,g[1]=t;break;case"MultiPoint":(l=d.getCoordinates())[a.index]=t,g[0]=t,g[1]=t;break;case"LineString":(l=d.getCoordinates())[a.index+_]=t,g[_]=t;break;case"MultiLineString":case"Polygon":(l=d.getCoordinates())[h[0]][a.index+_]=t,g[_]=t;break;case"MultiPolygon":(l=d.getCoordinates())[h[1]][h[0]][a.index+_]=t,g[_]=t;break;case"Circle":if(g[0]=t,g[1]=t,0===a.index)this.changingFeature_=!0,d.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var c=e.map.getView().getProjection(),f=(0,m.TE)((0,S.Vs)(d.getCenter(),c),(0,S.Vs)(t,c)),p=(0,S.Cs)();if(p){var v=d.clone().transform(p,c);v.setRadius(f),f=v.transform(c,p).getRadius()}d.setRadius(f),this.changingFeature_=!1}}l&&this.setGeometryCoordinates_(d,l)}this.createOrUpdateVertexFeature_(t,r,n)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;var r=this.vertexFeature_;if(r){var n=e.map.getView().getProjection(),i=[],o=r.getGeometry().getCoordinates(),s=(0,p.hI)([o]),a=this.rBush_.getInExtent(s),u={};a.sort(b);for(var d=0,h=a.length;d<h;++d){var l=a[d],g=l.segment,_=(0,C.sq)(l.geometry),c=l.depth;if(c&&(_+="-"+c.join("-")),u[_]||(u[_]=[,,]),"Circle"===l.geometry.getType()&&1===l.index){var f=V(t,l,n);(0,m.fS)(f,o)&&!u[_][0]&&(this.dragSegments_.push([l,0]),u[_][0]=l);continue}if((0,m.fS)(g[0],o)&&!u[_][0]){this.dragSegments_.push([l,0]),u[_][0]=l;continue}if((0,m.fS)(g[1],o)&&!u[_][1]){if(u[_][0]&&0===u[_][0].index){var v=l.geometry.getCoordinates();switch(l.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":v=v[c[1]];case"Polygon":if(l.index!==v[c[0]].length-2)continue}}this.dragSegments_.push([l,1]),u[_][1]=l;continue}(0,C.sq)(g) in this.vertexSegments_&&!u[_][0]&&!u[_][1]&&this.insertVertexCondition_(e)&&i.push(l)}i.length&&this.willModifyFeatures_(e,[i]);for(var y=i.length-1;y>=0;--y)this.insertVertex_(i[y],o)}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],n=r.geometry;if("Circle"===n.getType()){var i=n.getCenter(),o=r.featureSegments[0],s=r.featureSegments[1];o.segment[0]=i,o.segment[1]=i,s.segment[0]=i,s.segment[1]=i,this.rBush_.update((0,p.HK)(i),o);var a=n,u=(0,S.Cs)();if(u){var d=e.map.getView().getProjection();a=a.clone().transform(u,d),a=(0,x.Bb)(a).transform(d,u)}this.rBush_.update(a.getExtent(),s)}else this.rBush_.update((0,p.hI)(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new w(M.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},t.prototype.handlePointerAtPixel_=function(e,t,r){var n,i,o=this,s=r||t.getCoordinateFromPixel(e),a=t.getView().getProjection();if(this.hitDetection_){var u="object"==typeof this.hitDetection_?function(e){return e===o.hitDetection_}:void 0;t.forEachFeatureAtPixel(e,function(e,t,r){if("Point"===(r=r||e.getGeometry()).getType()&&(0,y.q9)(o.features_.getArray(),e)){i=r;var s=r.getFlatCoordinates().slice(0,2);n=[{feature:e,geometry:r,segment:[s,s]}]}return!0},{layerFilter:u})}if(!n){var d=(0,S.dY)((0,p.HK)(s,E),a),h=t.getView().getResolution()*this.pixelTolerance_,l=(0,S.Fj)((0,p.f3)(d,h,E),a);n=this.rBush_.getInExtent(l)}if(n&&n.length>0){var g=n.sort(function(e,t){return B(s,e,a)-B(s,t,a)})[0],_=g.segment,c=V(s,g,a),f=t.getPixelFromCoordinate(c),v=(0,m.TE)(e,f);if(i||v<=this.pixelTolerance_){var x={};if(x[(0,C.sq)(_)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-s[0],this.delta_[1]=c[1]-s[1]),"Circle"===g.geometry.getType()&&1===g.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[g.feature],[g.geometry]);else{var F=t.getPixelFromCoordinate(_[0]),P=t.getPixelFromCoordinate(_[1]),M=(0,m.bI)(f,F),w=(0,m.bI)(f,P);v=Math.sqrt(Math.min(M,w)),this.snappedToVertex_=v<=this.pixelTolerance_,this.snappedToVertex_&&(c=M>w?_[1]:_[0]),this.createOrUpdateVertexFeature_(c,[g.feature],[g.geometry]);var T={};T[(0,C.sq)(g.geometry)]=!0;for(var b=1,G=n.length;b<G;++b){var I=n[b].segment;if((0,m.fS)(_[0],I[0])&&(0,m.fS)(_[1],I[1])||(0,m.fS)(_[0],I[1])&&(0,m.fS)(_[1],I[0])){var j=(0,C.sq)(n[b].geometry);j in T||(T[j]=!0,x[(0,C.sq)(I)]=!0)}else break}}this.vertexSegments_=x;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,t){for(var r,n=e.segment,i=e.feature,o=e.geometry,s=e.depth,a=e.index;t.length<o.getStride();)t.push(0);switch(o.getType()){case"MultiLineString":case"Polygon":(r=o.getCoordinates())[s[0]].splice(a+1,0,t);break;case"MultiPolygon":(r=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,t);break;case"LineString":(r=o.getCoordinates()).splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(e),this.updateSegmentIndices_(o,a,s,1);var d={segment:[n[0],t],feature:i,geometry:o,depth:s,index:a};u.insert((0,p.hI)(d.segment),d),this.dragSegments_.push([d,1]);var h={segment:[t,n[1]],feature:i,geometry:o,depth:s,index:a+1};u.insert((0,p.hI)(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=u.Z.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);var t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new w(M.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1},t.prototype.removeVertex_=function(){var e,t,r,n,i,o,s,a,u,d,h,l=this.dragSegments_,g={},_=!1;for(i=l.length-1;i>=0;--i)d=(r=l[i])[0],h=(0,C.sq)(d.feature),d.depth&&(h+="-"+d.depth.join("-")),h in g||(g[h]={}),0===r[1]?(g[h].right=d,g[h].index=d.index):1==r[1]&&(g[h].left=d,g[h].index=d.index+1);for(h in g){switch(u=g[h].right,s=g[h].left,(a=(o=g[h].index)-1)<0&&(a=0),e=t=(n=(d=void 0!==s?s:u).geometry).getCoordinates(),_=!1,n.getType()){case"MultiLineString":t[d.depth[0]].length>2&&(t[d.depth[0]].splice(o,1),_=!0);break;case"LineString":t.length>2&&(t.splice(o,1),_=!0);break;case"MultiPolygon":e=e[d.depth[1]];case"Polygon":(e=e[d.depth[0]]).length>4&&(o==e.length-1&&(o=0),e.splice(o,1),_=!0,0===o&&(e.pop(),e.push(e[0]),a=e.length-1))}if(_){this.setGeometryCoordinates_(n,t);var c=[];if(void 0!==s&&(this.rBush_.remove(s),c.push(s.segment[0])),void 0!==u&&(this.rBush_.remove(u),c.push(u.segment[1])),void 0!==s&&void 0!==u){var f={depth:d.depth,feature:d.feature,geometry:d.geometry,index:a,segment:c};this.rBush_.insert((0,p.hI)(f.segment),f)}this.updateSegmentIndices_(n,o,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),l.length=0}}return _},t.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,t,r,n){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||(0,y.fS)(i.depth,r))&&i.index>t&&(i.index+=n)})},t}(h.Z);function b(e,t){return e.index-t.index}function B(e,t,r){var n=t.geometry;if("Circle"===n.getType()){var i=n;if(1===t.index){var o=(0,S.Cs)();o&&(i=i.clone().transform(o,r));var s=Math.sqrt((0,m.bI)(i.getCenter(),(0,S.Vs)(e,r)))-i.getRadius();return s*s}}var a=(0,S.Vs)(e,r);return P[0]=(0,S.Vs)(t.segment[0],r),P[1]=(0,S.Vs)(t.segment[1],r),(0,m.Bs)(a,P)}function V(e,t,r){var n=t.geometry;if("Circle"===n.getType()&&1===t.index){var i=n,o=(0,S.Cs)();return o&&(i=i.clone().transform(o,r)),(0,S.lO)(i.getClosestPoint((0,S.Vs)(e,r)),r)}var s=(0,S.Vs)(e,r);return P[0]=(0,S.Vs)(t.segment[0],r),P[1]=(0,S.Vs)(t.segment[1],r),(0,S.lO)((0,m.oL)(s,P),r)}let G=T}}]);