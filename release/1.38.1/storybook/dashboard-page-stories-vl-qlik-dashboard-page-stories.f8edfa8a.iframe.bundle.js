"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[8689],{"../../libs/qlik/src/dashboard-page/stories/vl-qlik-dashboard-page.stories.ts":(e,t,i)=>{i.r(t),i.d(t,{QlikDashboardPageWithExportId:()=>R,QlikDashboardPageWithViews:()=>D,QlikDashboardPageWithoutFilters:()=>T,QlikDashboardPageWithoutViews:()=>V,__namedExportsOrder:()=>z,default:()=>I});var s=i("../../node_modules/lit-html/lit-html.js"),a=i("../../libs/common/storybook/src/index.ts"),n=i("../../libs/qlik/src/dashboard/stories/vl-qlik-dashboard.stories-arg.ts");let r={...a.D8,title:"",url:"",appId:"",exportId:"",selectedView:"",filters:null,views:null},l={...(0,a.RN)(!0),title:{name:"title",description:"Titel van de dashboard pagina",table:{type:{summary:a.QE.STRING},category:a.R6.ATTRIBUTES,defaultValue:{summary:r.title}}},url:{name:"url",description:"URL om te connecteren met Qlik",table:{type:{summary:a.QE.STRING},category:a.R6.ATTRIBUTES,defaultValue:{summary:r.url}}},appId:{name:"app-id",description:"De id van de publieke app die aangesproken kan worden op Qlik",table:{type:{summary:a.QE.STRING},category:a.R6.ATTRIBUTES,defaultValue:{summary:r.appId}}},exportId:{name:"export-id",description:"De id van het object dat de export data bevat",table:{type:{summary:a.QE.STRING},category:a.R6.ATTRIBUTES,defaultValue:{summary:r.exportId}}},selectedView:{name:"selected-view",description:"De initieel geselecteerde view die getoond moet worden.",table:{type:{summary:a.QE.STRING},category:a.R6.ATTRIBUTES,defaultValue:{summary:r.selectedView}}},filters:{name:"filters",description:"De filters die toegepast moeten worden op het Qlik object",table:{type:{summary:"Filter[]"},category:a.R6.PROPERTIES,defaultValue:{summary:n.x.filters}}},views:{name:"views",description:"Het object dat de eigenlijke visualisatie config bevat, al dan niet onderverdeeld in views. Deze visuals worden doorgegeven aan de `vl-qlik-dashboard` component intern.",table:{type:{summary:"Views | DashboardVisualization[][]"},category:a.R6.PROPERTIES,defaultValue:{summary:r.views}}}};var o=i("../../node_modules/lit/index.js"),d=i("../../libs/common/utilities/src/index.ts"),p=i("../../libs/elements/src/index.ts"),c=i("../../libs/qlik/src/dashboard/vl-qlik-dashboard.component.ts"),h=i("../../node_modules/@domg/qlik-lib/build/release/index.js"),u=i("../../libs/qlik/src/utils/qlik-render-utils.ts"),g=i("../../libs/components/src/index.ts");let v={name:"default",fieldQualifier:"qText",field:"[]"},b={name:"Refresh rate",fieldQualifier:"qText",expression:"Date(ReloadTime(),'DD/MM/YYYY')"};class m extends d.jW{static{(0,d.gy)([g.rC,g.H,g.cW,c.j,p.iY,p.F7,p.yF,p.lC,p.dA,p.nK,p.mq,p.xf,p.e$,p.tk,p.G8,p.tn,p.Pg])}static get styles(){return[p.hF]}static get properties(){return{title:{type:String,attribute:"title",reflect:!0},url:{type:String,attribute:"url",reflect:!0},appId:{type:String,attribute:"app-id",reflect:!0},exportId:{type:String,attribute:"export-id",reflect:!0},selectedView:{type:String,attribute:"selected-view",reflect:!0},views:{type:Object},filters:{type:Array},closed:{type:Boolean,state:!0},connected:{type:Boolean,state:!0},initialized:{type:Boolean,state:!0},connection:{type:h.m_,state:!0},refresh:{type:String,state:!0}}}async firstUpdated(e){super.firstUpdated(e),this.connection=new h.m_(this.url,this.appId),await this.connection.init(),this.connection.app.on("closed",()=>this.closed=!0),this.connected=!0,await this.connection.addCubes({name:"refresh",dimensions:[v],measures:[b]}),this.refresh=(await this.connection.getCubeValues("refresh"))[0]["Refresh rate"],this.initialized=!0,this.dispatchEvent(new CustomEvent("initialized"))}bindViews(){let e=(0,u.VN)(this)("view-selector");e&&(0,u.ue)({component:e,choices:Object.keys(this.views).map(e=>({label:this.views[e].label,value:e})),selectedChoices:[this.selectedView],sortFilter:(0,u.ld)(e=>e.order)})}updated(e){super.updated(e),this.initialized&&this.views&&this.bindViews()}render(){return!this.selectedView&&this.views&&(this.selectedView=Object.keys(this.views)[0]),(0,o.qy)` <div style="margin: 0px 50px">${(0,u.xT)(...this.renderPageInfo())}</div> `}renderPageInfo(){return this.connected&&this.initialized?[this.renderTitle(),this.renderDownloadButton(),this.renderIntroduction(),this.renderViewSelector(),this.renderDashboard()]:[{size:12,template:(0,o.qy)` <vl-loader data-vl-text="Pagina is aan het laden"></vl-loader>`}]}renderDownloadButton(){return this.exportId?{size:3,template:(0,o.qy)` <div is="vl-action-group" style="float:right;margin-top: 3rem">
                <select id="format-select" is="vl-select" style="margin-right: 1.4rem">
                    <option value="xlsx">Excel</option>
                    <option value="csv">CSV</option>
                </select>
                <button
                    id="export-dashboard"
                    is="vl-button"
                    @click="${e=>(0,u.bF)(e.target,this.export.bind(this))}"
                >
                    <span is="vl-icon" data-vl-icon="file-download" data-vl-before></span>
                    Download
                </button>
            </div>`}:{}}renderIdleTime(){return(0,o.qy)` <vl-alert
            data-vl-icon="warning"
            data-vl-title="Connectie met de visualisaties afgesloten."
            data-vl-type="error"
        >
            <p>
                Uw connectie is afgesloten door inactiviteit op de pagina. Vernieuw de pagina om een nieuwe connectie te
                maken.
            </p>
            <button onClick="window.location.reload();" slot="actions" is="vl-button">Vernieuw de pagina</button>
        </vl-alert>`}renderIntroduction(){return{size:12,template:(0,o.qy)` <slot name="introduction"></slot> `}}renderViewSelector(){let e=(0,o.qy)``;return Array.isArray(this.views)||(e=(0,o.qy)`
                <h6 is="vl-h6" data-vl-no-space-bottom>
                    Kies hier de gewenste dimensie, en de grafieken geven de overeenkomstige waarden weer
                </h6>
                <form is="vl-form">
                    <select
                        is="vl-select"
                        id="view-selector"
                        data-vl-select
                        data-vl-select-search-no-result-limit
                        @change="${this.changeView}"
                    ></select>
                </form>
            `),{size:12,template:e}}renderTitle(){return{size:this.exportId?9:12,template:(0,o.qy)` <h1 is="vl-h1" data-vl-no-space-bottom style="padding-top: 3rem">${this.title}</h1>
                <p is="vl-icon-wrapper">
                    <vl-annotation>
                        <span>Laatste wijziging:</span>
                    </vl-annotation>
                    <span is="vl-icon" data-vl-icon="calendar" data-vl-before data-vl-after data-vl-light></span>
                    <vl-annotation>
                        <span>${this.refresh}</span>
                    </vl-annotation>
                </p>`}}renderDashboard(){return this.closed?{size:12,template:this.renderIdleTime()}:Array.isArray(this.views)?{size:12,template:(0,o.qy)` <vl-qlik-dashboard
                    id="${this.id}"
                    .visuals="${this.views}"
                    .filters="${this.filters}"
                    .connection="${this.connection}"
                >
                </vl-qlik-dashboard>`}:{size:12,template:(0,o.qy)` <vl-qlik-dashboard
                id="${this.id}"
                .visuals="${this.views[this.selectedView].visualisations}"
                .filters="${this.filters}"
                .connection="${this.connection}"
            >
            </vl-qlik-dashboard>`}}async export(){"csv"===(0,u.VN)(this)("format-select").value?await (0,h.J1)(this.exportId,this.title.toLowerCase().replaceAll(" ","_"),this.connection):await (0,h.Mt)(this.exportId,this.title.toLowerCase().replaceAll(" ","_"),this.connection)}async changeView(e){this.selectedView=e.detail.value}async disconnectedCallback(){super.disconnectedCallback(),await this.connection.end()}constructor(...e){super(...e),this.title="",this.url="",this.appId="",this.exportId="",this.selectedView="",this.connected=!1,this.initialized=!1,this.closed=!1}}m=function(e,t,i,s){var a,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}([(0,d.M1)("vl-qlik-dashboard-page")],m),i("../../node_modules/react/index.js");var f=i("../../node_modules/react/jsx-runtime.js"),w=i("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),y=i("../../node_modules/@storybook/blocks/dist/index.mjs");function x(e){let t=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3"},(0,w.RP)(),e.components),{VluxMetaData:i}=t;return i||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("VluxMetaData",!0),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(t.h1,{id:"visual",children:"Visual"}),"\n",(0,f.jsx)(i,{id:"qlik-qlik-dashboard-page"}),"\n",(0,f.jsxs)(t.p,{children:["Gebruik de ",(0,f.jsx)("code",{children:"vl-qlik-dashboard-page"})," component om een pagina te maken met titel, introductie en een Qlik\nDashboard, met eventuele export functionaliteit en de mogelijkheid tot switchen tussen dashboards."]}),"\n",(0,f.jsx)(t.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-js",children:"import '@domg-wc/qlik/dashboard-page';\nimport filters from './filters.js';\nimport viz_without_views from './visuals-without-views.json' assert {type: 'json'}\n"})}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-html",children:'<vl-template>\n        <vl-qlik-dashboard-page\n                title="Dashboard page without views"\n                app-id="594c04b6-f319-4cb9-962c-24b0f7aa6f5e"\n                url="omgevingsloketrapport.omgeving.vlaanderen.be"\n                .filters="${filters}"\n                .views="${viz_without_views}">\n            <span slot="introduction">\n                Introduction\n            </span>\n        </vl-qlik-dashboard-page>\n</vl-template>\n'})}),"\n",(0,f.jsx)(y.Hl,{of:V}),"\n",(0,f.jsx)(t.h2,{id:"configuratie",children:"Configuratie"}),"\n",(0,f.jsx)(y.ov,{of:V}),"\n",(0,f.jsx)(t.h2,{id:"types",children:"Types"}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-ts",children:'export type Filter = {\n    id: string,\n    filter: FilterObj\n}\n\ntype FilterObj = {\n    name: string,\n    fieldQualifier: string,\n    field: string,\n    nrOfValues: number\n}\n\nexport type DashboardVisualization = {\n    type: string,\n    id: string,\n    height: string,\n    width?: string,\n    label: string,\n    "align-label"?: string,\n    "align-visual"?: string,\n    colSize?: number,\n    properties?: object,\n    options?: object\n}\n\nexport type InfoblockVisualization = {\n    title: string,\n    icon: string,\n    type: string,\n    id: string,\n    height: string,\n    width?: string,\n    align: string,\n    colSize?: number,\n    properties?: object\n    visuals?: InfoblockVisualization[][]\n}\n\nexport type Views = {\n    [key: string]: {\n        order: number\n        label: string,\n        visualisations: DashboardVisualization[][]\n    },\n}\n'})}),"\n",(0,f.jsx)(t.h2,{id:"varianten",children:"Varianten"}),"\n",(0,f.jsx)(t.h3,{id:"with-views",children:"With views"}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-js",children:"import '@domg-wc/qlik/dashboard-page';\nimport filters from './filters.js';\nimport viz_with_views from './visuals-with-views.json' assert {type: 'json'}\n"})}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-html",children:'<vl-template>\n        <vl-qlik-dashboard-page\n                title="Dashboard page with views"\n                app-id="594c04b6-f319-4cb9-962c-24b0f7aa6f5e"\n                url="omgevingsloketrapport.omgeving.vlaanderen.be"\n                .filters="${filters}"\n                .views="${viz_with_views}">\n            <span slot="introduction">\n                Introduction\n            </span>\n        </vl-qlik-dashboard-page>\n</vl-template>\n'})}),"\n",(0,f.jsx)(y.Hl,{of:D}),"\n",(0,f.jsx)(t.h3,{id:"without-filters",children:"Without filters"}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-js",children:"import '@domg-wc/qlik/dashboard-page';\nimport viz_with_views from './visuals-with-views.json' assert {type: 'json'}\n"})}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-html",children:'<vl-template>\n        <vl-qlik-dashboard-page\n                title="Dashboard page without views"\n                app-id="594c04b6-f319-4cb9-962c-24b0f7aa6f5e"\n                url="omgevingsloketrapport.omgeving.vlaanderen.be"\n                .views="${viz_with_views}">\n            <span slot="introduction">\n                Introduction\n            </span>\n        </vl-qlik-dashboard-page>\n</vl-template>\n'})}),"\n",(0,f.jsx)(y.Hl,{of:T}),"\n",(0,f.jsx)(t.h3,{id:"with-export-id",children:"With export id"}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-js",children:"import '@domg-wc/qlik/dashboard-page';\nimport filters from './filters.js';\nimport viz_with_views from './visuals-with-views.json' assert {type: 'json'}\n"})}),"\n",(0,f.jsx)(t.pre,{children:(0,f.jsx)(t.code,{className:"language-html",children:'<vl-template>\n        <vl-qlik-dashboard-page\n                title="Dashboard page without views"\n                app-id="594c04b6-f319-4cb9-962c-24b0f7aa6f5e"\n                url="omgevingsloketrapport.omgeving.vlaanderen.be"\n                export-id="cTTaQLd"\n                .filters="${filters}"\n                .views="${viz_with_views}">\n            <span slot="introduction">\n                Introduction\n            </span>\n        </vl-qlik-dashboard-page>\n</vl-template>\n'})}),"\n",(0,f.jsx)(y.Hl,{of:R})]})}var k=i("../../libs/qlik/src/utils/stories/demo-filters.json"),j=i("../../libs/qlik/src/utils/stories/demo-visuals-without-views.json");let q=JSON.parse('{"project":{"order":1,"label":"Project","visualisations":[[{"id":"RXjdD","height":"300px","width":"200px","type":"kpi","label":"Numbers of movies","align-label":"center","align-visual":"center"},{"id":"mkK","height":"300px","width":"200px","type":"kpi","label":"Number of actors"}],[{"id":"mMm","height":"400px","type":"linechart","label":"Movies filmed by year","align-label":"center","align-visual":"center"},{"id":"mjjeKJk","height":"400px","type":"piechart","label":"Avg rating"}]]},"barcharts":{"order":2,"label":"Barcharts","visualisations":[[{"id":"fYuwtB","height":"300px","type":"barchart","label":"Numbers of movies by directors","align-label":"center","align-visual":"center"},{"id":"BkkbCGp","height":"300px","type":"barchart","label":"Number of movies by rating"},{"id":"fARUNP","height":"300px","type":"barchart","label":"Number of movies by decade > year"}]]}}'),I={id:"qlik-qlik-dashboard-page",title:"qlik/qlik-dashboard-page",args:r,argTypes:l,tags:["autodocs"],parameters:{docs:{page:function(e={}){let{wrapper:t}=Object.assign({},(0,w.RP)(),e.components);return t?(0,f.jsx)(t,Object.assign({},e,{children:(0,f.jsx)(x,e)})):x(e)}}}},$=(0,a._7)(r,({title:e,appId:t,url:i,exportId:a,filters:n,views:r})=>(0,s.qy)` <vl-qlik-dashboard-page
        title="${e}"
        app-id="${t}"
        url="${i}"
        export-id="${a}"
        .filters="${n}"
        .views="${r}"
    >
        <span slot="introduction"> Introduction </span>
    </vl-qlik-dashboard-page>`),V=$.bind({});V.storyName="vl-qlik-dashboard-page - without views",V.args={title:"Dashboard page without views",appId:"594c04b6-f319-4cb9-962c-24b0f7aa6f5e",url:"omgevingsloketrapport.omgeving.vlaanderen.be",views:j,filters:k};let D=$.bind({});D.storyName="vl-qlik-dashboard-page - with views",D.args={title:"Dashboard page with views",appId:"594c04b6-f319-4cb9-962c-24b0f7aa6f5e",url:"omgevingsloketrapport.omgeving.vlaanderen.be",views:q,filters:k};let T=$.bind({});T.storyName="vl-qlik-dashboard-page - without filters",T.args={title:"Dashboard page without filters",appId:"594c04b6-f319-4cb9-962c-24b0f7aa6f5e",url:"omgevingsloketrapport.omgeving.vlaanderen.be",views:q};let R=$.bind({});R.storyName="vl-qlik-dashboard-page - with export",R.args={title:"Dashboard page with exportId",appId:"594c04b6-f319-4cb9-962c-24b0f7aa6f5e",url:"omgevingsloketrapport.omgeving.vlaanderen.be",views:q,filters:k,exportId:"cTTaQLd"},V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:'story(qlikDashboardPageArgs, ({\n  title,\n  appId,\n  url,\n  exportId,\n  filters,\n  views\n}) => html` <vl-qlik-dashboard-page\n        title="${title}"\n        app-id="${appId}"\n        url="${url}"\n        export-id="${exportId}"\n        .filters="${filters}"\n        .views="${views}"\n    >\n        <span slot="introduction"> Introduction </span>\n    </vl-qlik-dashboard-page>`)',...V.parameters?.docs?.source}}},D.parameters={...D.parameters,docs:{...D.parameters?.docs,source:{originalSource:'story(qlikDashboardPageArgs, ({\n  title,\n  appId,\n  url,\n  exportId,\n  filters,\n  views\n}) => html` <vl-qlik-dashboard-page\n        title="${title}"\n        app-id="${appId}"\n        url="${url}"\n        export-id="${exportId}"\n        .filters="${filters}"\n        .views="${views}"\n    >\n        <span slot="introduction"> Introduction </span>\n    </vl-qlik-dashboard-page>`)',...D.parameters?.docs?.source}}},T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:'story(qlikDashboardPageArgs, ({\n  title,\n  appId,\n  url,\n  exportId,\n  filters,\n  views\n}) => html` <vl-qlik-dashboard-page\n        title="${title}"\n        app-id="${appId}"\n        url="${url}"\n        export-id="${exportId}"\n        .filters="${filters}"\n        .views="${views}"\n    >\n        <span slot="introduction"> Introduction </span>\n    </vl-qlik-dashboard-page>`)',...T.parameters?.docs?.source}}},R.parameters={...R.parameters,docs:{...R.parameters?.docs,source:{originalSource:'story(qlikDashboardPageArgs, ({\n  title,\n  appId,\n  url,\n  exportId,\n  filters,\n  views\n}) => html` <vl-qlik-dashboard-page\n        title="${title}"\n        app-id="${appId}"\n        url="${url}"\n        export-id="${exportId}"\n        .filters="${filters}"\n        .views="${views}"\n    >\n        <span slot="introduction"> Introduction </span>\n    </vl-qlik-dashboard-page>`)',...R.parameters?.docs?.source}}};let z=["QlikDashboardPageWithoutViews","QlikDashboardPageWithViews","QlikDashboardPageWithoutFilters","QlikDashboardPageWithExportId"]}}]);