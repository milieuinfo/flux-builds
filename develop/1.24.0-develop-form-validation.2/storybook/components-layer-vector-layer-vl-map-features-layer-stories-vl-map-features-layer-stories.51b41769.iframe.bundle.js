"use strict";(self.webpackChunkuigov_web_components=self.webpackChunkuigov_web_components||[]).push([[2127],{"./libs/map/src/components/layer/vector-layer/vl-map-features-layer/stories/vl-map-features-layer.stories.ts":(e,t,a)=>{a.r(t),a.d(t,{MapFeaturesLayerDefault:()=>p,__namedExportsOrder:()=>y,default:()=>m});var r=a("./libs/common/storybook/src/index.ts"),s=a("./node_modules/lit-html/lit-html.js");a("./libs/map/src/vl-map.ts"),a("./libs/map/src/components/baselayer/vl-map-base-layer-grb-gray/vl-map-base-layer-grb-gray.ts"),a("./libs/map/src/components/layer/vector-layer/vl-map-features-layer/vl-map-features-layer.ts");var o=a("./libs/map/src/components/layer/stories/vl-map-layer.stories-arg.ts");let n={...o.O,autoExtent:!1,autoExtentMaxZoom:"",cluster:!1,clusterDistance:null,features:"",featuresProp:null},i={...o.U,autoExtent:{name:"data-vl-auto-extent",description:"Automatisch zoomen op de kaartlaag zodat al de features zichtbaar zijn.",table:{type:{summary:r.vK.BOOLEAN},category:r.aA.ATTRIBUTES,defaultValue:{summary:n.autoExtent}}},autoExtentMaxZoom:{name:"data-vl-auto-extent-max-zoom",description:"Het maximum niveau tot waar er automatisch gezoomd wordt bij een extent.",table:{type:{summary:r.vK.STRING},category:r.aA.ATTRIBUTES,defaultValue:{summary:n.autoExtentMaxZoom}}},cluster:{name:"data-vl-cluster",description:"Geeft aan of de features geclusterd moeten worden of niet.<br>Dit attribuut is niet reactief.",table:{type:{summary:r.vK.BOOLEAN},category:r.aA.ATTRIBUTES,defaultValue:{summary:n.cluster}}},clusterDistance:{name:"data-vl-cluster-distance",description:"De afstand vanaf er tussen features geclusterd mag worden.<br>Dit attribuut is niet reactief.",table:{type:{summary:r.vK.STRING},category:r.aA.ATTRIBUTES,defaultValue:{summary:n.clusterDistance}}},features:{name:"data-vl-features",description:"Attribuut dat de kaartlaag bevat.",table:{type:{summary:r.vK.STRING},category:r.aA.ATTRIBUTES,defaultValue:{summary:n.features}}},featuresProp:{name:"features",description:"Property die de kaartlaag bevat.",table:{type:{summary:r.vK.STRING},category:r.aA.PROPERTIES,defaultValue:{summary:n.featuresProp}}}};a("./node_modules/react/index.js");var l=a("./node_modules/react/jsx-runtime.js"),u=a("./node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),c=a("./node_modules/@storybook/blocks/dist/index.mjs");function d(e){let t=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",pre:"pre",h3:"h3",a:"a"},(0,u.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h1,{id:"map-features-layer",children:"Map Features Layer"}),"\n",(0,l.jsxs)(t.p,{children:["Gebruik de ",(0,l.jsx)(t.code,{children:"map-features-layer"})," component om een kaartlaag af te beelden waarbij je een set van te tonen features kan\nstellen.",(0,l.jsx)("br",{}),"\nDeze component erft over van de ",(0,l.jsx)(t.code,{children:"VlMapVectorLayer"})," klasse, die op zijn beurt overerft van de ",(0,l.jsx)(t.code,{children:"VlMapLayer"})," klasse."]}),"\n",(0,l.jsx)(t.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"import { VlMapFeaturesLayer } from '@domg-wc/map';\n"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-html",children:"<vl-map-features-layer></vl-map-features-layer>\n"})}),"\n",(0,l.jsx)(c.Xz,{of:p}),"\n",(0,l.jsx)(t.h2,{id:"configuratie",children:"Configuratie"}),"\n",(0,l.jsx)(c.Ed,{of:p}),"\n",(0,l.jsx)(t.h2,{id:"referenties",children:"Referenties"}),"\n",(0,l.jsx)(t.h3,{id:"legacy-documentatie",children:"Legacy Documentatie"}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/storybook/?path=/docs/custom-elements-vl-map-vl-map-features-layer--default",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Storybook - Map Features Layer"})}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/doc/VlMapFeaturesLayer.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Documentatie - Map Features Layer"})})]})}let m={title:"map/layer/vector-layer/features-layer",tags:["autodocs"],args:n,argTypes:i,parameters:{docs:{page:function(e={}){let{wrapper:t}=Object.assign({},(0,u.ah)(),e.components);return t?(0,l.jsx)(t,Object.assign({},e,{children:(0,l.jsx)(d,e)})):d(e)}}}},p=(0,r.yg)(n,({autoExtent:e,autoExtentMaxZoom:t,cluster:a,clusterDistance:r,features:o,hidden:n,maxResolution:i,minResolution:l,name:u,opacity:c,featuresProp:d})=>(0,s.dy)`
        <vl-map>
            <vl-map-baselayer-grb-gray></vl-map-baselayer-grb-gray>
            <vl-map-features-layer
                ?data-vl-auto-extent=${e}
                data-vl-auto-extent-max-zoom=${t}
                ?data-vl-cluster=${a}
                data-vl-cluster-distance=${r}
                data-vl-features=${o}
                .features=${d}
                ?data-vl-hidden=${n}
                data-vl-max-resolution=${i}
                data-vl-min-resolution=${l}
                data-vl-name=${u}
                data-vl-opacity=${c}
            >
                <vl-map-layer-style data-vl-border-size="2"></vl-map-layer-style>
                <vl-map-layer-circle-style></vl-map-layer-circle-style>
            </vl-map-features-layer>
        </vl-map>
    `);p.storyName="vl-map-features-layer - default",p.args={featuresProp:{type:"FeatureCollection",features:[{type:"Feature",id:1,geometry:{type:"Point",coordinates:[21e4,19e4]}},{type:"Feature",id:2,geometry:{type:"LineString",coordinates:[[17e4,17e4],[15e4,206e3]]}},{type:"Feature",id:3,geometry:{type:"Polygon",coordinates:[[[44e3,171e3],[1e5,171e3],[1e5,205e3],[44e3,205e3],[44e3,171e3]]]}}]}},p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:'story(mapFeaturesLayerArgs, ({\n  autoExtent,\n  autoExtentMaxZoom,\n  cluster,\n  clusterDistance,\n  features,\n  hidden,\n  maxResolution,\n  minResolution,\n  name,\n  opacity,\n  featuresProp\n}) => html`\n        <vl-map>\n            <vl-map-baselayer-grb-gray></vl-map-baselayer-grb-gray>\n            <vl-map-features-layer\n                ?data-vl-auto-extent=${autoExtent}\n                data-vl-auto-extent-max-zoom=${autoExtentMaxZoom}\n                ?data-vl-cluster=${cluster}\n                data-vl-cluster-distance=${clusterDistance}\n                data-vl-features=${features}\n                .features=${featuresProp}\n                ?data-vl-hidden=${hidden}\n                data-vl-max-resolution=${maxResolution}\n                data-vl-min-resolution=${minResolution}\n                data-vl-name=${name}\n                data-vl-opacity=${opacity}\n            >\n                <vl-map-layer-style data-vl-border-size="2"></vl-map-layer-style>\n                <vl-map-layer-circle-style></vl-map-layer-circle-style>\n            </vl-map-features-layer>\n        </vl-map>\n    `)',...p.parameters?.docs?.source}}};let y=["MapFeaturesLayerDefault"]},"./node_modules/ol/source/Cluster.js":(e,t,a)=>{a.d(t,{Z:()=>m});var r=a("./node_modules/ol/events/EventType.js"),s=a("./node_modules/ol/Feature.js"),o=a("./node_modules/ol/geom/Point.js"),n=a("./node_modules/ol/source/Vector.js"),i=a("./node_modules/ol/coordinate.js"),l=a("./node_modules/ol/asserts.js"),u=a("./node_modules/ol/extent.js"),c=a("./node_modules/ol/util.js"),d=function(){var e=function(t,a){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!=typeof a&&null!==a)throw TypeError("Class extends value "+String(a)+" is not a constructor or null");function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}();let m=function(e){function t(t){var a=e.call(this,{attributions:t.attributions,wrapX:t.wrapX})||this;return a.resolution=void 0,a.distance=void 0!==t.distance?t.distance:20,a.minDistance=t.minDistance||0,a.interpolationRatio=0,a.features=[],a.geometryFunction=t.geometryFunction||function(e){var t=e.getGeometry();return(0,l.h)("Point"==t.getType(),10),t},a.createCustomCluster_=t.createCluster,a.source=null,a.boundRefresh_=a.refresh.bind(a),a.updateDistance(a.distance,a.minDistance),a.setSource(t.source||null),a}return d(t,e),t.prototype.clear=function(t){this.features.length=0,e.prototype.clear.call(this,t)},t.prototype.getDistance=function(){return this.distance},t.prototype.getSource=function(){return this.source},t.prototype.loadFeatures=function(e,t,a){this.source.loadFeatures(e,t,a),t!==this.resolution&&(this.resolution=t,this.refresh())},t.prototype.setDistance=function(e){this.updateDistance(e,this.minDistance)},t.prototype.setMinDistance=function(e){this.updateDistance(this.distance,e)},t.prototype.getMinDistance=function(){return this.minDistance},t.prototype.setSource=function(e){this.source&&this.source.removeEventListener(r.Z.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(r.Z.CHANGE,this.boundRefresh_),this.refresh()},t.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},t.prototype.updateDistance=function(e,t){var a=0===e?0:Math.min(t,e)/e,r=e!==this.distance||this.interpolationRatio!==a;this.distance=e,this.minDistance=t,this.interpolationRatio=a,r&&this.refresh()},t.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var e=(0,u.lJ)(),t=this.distance*this.resolution,a=this.source.getFeatures(),r={},s=0,o=a.length;s<o;s++){var n=a[s];if(!((0,c.sq)(n) in r)){var i=this.geometryFunction(n);if(i){var l=i.getCoordinates();(0,u.HK)(l,e),(0,u.f3)(e,t,e);var d=this.source.getFeaturesInExtent(e).filter(function(e){var t=(0,c.sq)(e);return!(t in r)&&(r[t]=!0,!0)});this.features.push(this.createCluster(d,e))}}}},t.prototype.createCluster=function(e,t){for(var a=[0,0],r=e.length-1;r>=0;--r){var n=this.geometryFunction(e[r]);n?(0,i.IH)(a,n.getCoordinates()):e.splice(r,1)}(0,i.bA)(a,1/e.length);var l=(0,u.qg)(t),c=this.interpolationRatio,d=new o.Z([a[0]*(1-c)+l[0]*c,a[1]*(1-c)+l[1]*c]);return this.createCustomCluster_?this.createCustomCluster_(d,e):new s.Z({geometry:d,features:e})},t}(n.Z)},"./libs/map/src/components/baselayer/vl-map-base-layer-grb-gray/vl-map-base-layer-grb-gray.ts":(e,t,a)=>{var r=a("./libs/common/utilities/src/index.ts"),s=a("./libs/map/src/components/baselayer/vl-map-base-layer.ts");class o extends s.m{constructor(){super(),this.url="https://geo.api.vlaanderen.be/GRB/wmts",this.layer="grb_bsk_grijs",this.title="GRB basis laag grijs"}}o=function(e,t,a,r){var s,o=arguments.length,n=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,r);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(n=(o<3?s(n):o>3?s(t,a,n):s(t,a))||n);return o>3&&n&&Object.defineProperty(t,a,n),n}([(0,r.a6)("vl-map-baselayer-grb-gray")],o)},"./libs/map/src/components/layer/stories/vl-map-layer.stories-arg.ts":(e,t,a)=>{a.d(t,{O:()=>s,U:()=>o});var r=a("./libs/common/storybook/src/index.ts");let s={...r._O,hidden:!1,opacity:1,maxResolution:1/0,minResolution:0,name:""},o={...(0,r.Wp)(),hidden:{name:"data-vl-hidden",description:"Bepaalt of de kaartlaag zichtbaar is.",table:{type:{summary:r.vK.BOOLEAN},category:r.aA.ATTRIBUTES,defaultValue:{summary:s.hidden}}},opacity:{name:"data-vl-opacity",description:"De opacity van de kaartlaag. Getal tussen 0 en 1.",control:{type:"range",min:0,max:1,step:.01},table:{type:{summary:r.vK.NUMBER},category:r.aA.ATTRIBUTES,defaultValue:{summary:s.opacity}}},maxResolution:{name:"data-vl-max-resolution",description:"De maximum resolutie (exclusief) waaronder de kaartlaag zichtbaar is.<br>Dit attribuut is niet reactief.",type:{name:r.vK.NUMBER},table:{type:{summary:r.vK.NUMBER},category:r.aA.ATTRIBUTES,defaultValue:{summary:s.maxResolution}}},minResolution:{name:"data-vl-min-resolution",description:"De minimum resolutie (inclusief) waarboven de kaartlaag zichtbaar is.<br>Dit attribuut is niet reactief.",type:{name:r.vK.NUMBER},table:{type:{summary:r.vK.NUMBER},category:r.aA.ATTRIBUTES,defaultValue:{summary:s.minResolution}}},name:{name:"data-vl-name",description:"De naam van de kaartlaag.<br>Dit attribuut is niet reactief.",table:{type:{summary:r.vK.STRING},category:r.aA.ATTRIBUTES,defaultValue:{summary:s.name}}}}},"./libs/map/src/components/layer/vector-layer/vl-map-features-layer/vl-map-features-layer.ts":(e,t,a)=>{var r=a("./libs/common/utilities/src/index.ts"),s=a("./node_modules/ol/format/GeoJSON.js"),o=a("./node_modules/ol/geom/Point.js"),n=a("./node_modules/ol/source/Cluster.js"),i=a("./node_modules/ol/source/Vector.js"),l=a("./libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts");class u extends l.b{static get _observedAttributes(){return l.b._observedAttributes.concat(["auto-extent","features"])}constructor(){super()}init(){this._geoJSON=new s.Z,this._source=this.__createSource(),this._layer=this._createLayer()}async connectedCallback(){this.init(),await super.connectedCallback(),this._autoZoomToExtent()}get features(){return this.__featuresSource?this.__featuresSource.getFeatures():this._featuresFromAttribute}get _featuresFromAttribute(){let e=this.getAttribute("features");return e?this.__readGeoJsonFeatures(e):[]}set features(e){this.setAttribute("features",JSON.stringify(e))}get _autoExtent(){return void 0!=this.getAttribute("auto-extent")}get _autoExtentMaxZoom(){return this.getAttribute("auto-extent-max-zoom")}get cluster(){return void 0!=this.getAttribute("cluster")}get _clusterDistance(){return this.getAttribute("cluster-distance")}removeFeaturesStyle(){this.__featuresSource&&this.__featuresSource.getFeatures()&&this.__featuresSource.getFeatures().forEach(e=>{e.setStyle(null)})}getFeature(e){if(this.__featuresSource&&this.__featuresSource.getFeatures())return this.__featuresSource.getFeatures().filter(t=>t.getId()===e)[0]}getCluster(e){if(this._layer)return this._layer.getSource().getFeatures().filter(t=>{let a=t.get("features");return!!a&&a.some(t=>t.getId()===e)})[0]}async zoomToExtent(e){this.mapElement&&this.boundingBox&&this.mapElement.zoomTo(this.boundingBox,e)}clearFeatures(){this.__featuresSource&&(this.__featuresSource.clear(),this._featuresChanged())}addFeature(e){this.__featuresSource&&(this.__featuresSource.addFeatures([this._geoJSON.readFeature(e)]),this._featuresChanged())}addFeatureCollection(e){this.__featuresSource&&(this.__featuresSource.addFeatures(this._geoJSON.readFeatures(e)),this._featuresChanged())}_autoExtentChangedCallback(){this._autoZoomToExtent()}_featuresChangedCallback(e,t){t&&this._layer&&(this.__featuresSource.clear(),this.__featuresSource.addFeatures(this.__readGeoJsonFeatures(t)),this._featuresChanged())}_featuresChanged(){this._autoZoomToExtent(),this.rerender()}_autoZoomToExtent(){this._autoExtent&&this.zoomToExtent(this._autoExtentMaxZoom)}get boundingBox(){if(this.__featuresSource&&this.__featuresSource.getFeatures().length>0)return this.__featuresSource.getExtent()}__createSource(){let e=new i.Z({features:this.features});return this.cluster?this.__createClusterSource(e):e}__createClusterSource(e){return new n.Z({distance:this._clusterDistance,source:e,geometryFunction:e=>{let t=e.getGeometry();return t instanceof o.Z?t:this.__ignoreClustering()}})}get __featuresSource(){return this.cluster&&this.source?this.source.getSource():this.source}__ignoreClustering(){return null}__readGeoJsonFeatures(e){return this._geoJSON.readFeatures(e)}}u=function(e,t,a,r){var s,o=arguments.length,n=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,r);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(n=(o<3?s(n):o>3?s(t,a,n):s(t,a))||n);return o>3&&n&&Object.defineProperty(t,a,n),n}([(0,r.a6)("vl-map-features-layer")],u)},"./libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts":(e,t,a)=>{a.d(t,{b:()=>n});var r=a("./node_modules/ol/layer/Vector.js"),s=a("./libs/map/src/components/layer-style/vl-map-layer-style.ts"),o=a("./libs/map/src/components/layer/vl-map-layer.ts");class n extends o.w{static get EVENTS(){return{styleChanged:"style-changed"}}constructor(){super(),this.pendingLayerStyles=[],this._styles=[]}async connectedCallback(){await super.connectedCallback(),this.applyPendingStyles()}get style(){return this.layer?.getStyle()||null}set style(e){this._layer?this.applyStyle(e):this.pendingLayerStyles=[...this.pendingLayerStyles,e]}applyStyle(e){e instanceof s.W?(this._styles.push(e),this._layer.setStyle(e=>this._styles.map(t=>t.style(e)).filter(e=>null!=e))):(this._styles=[],this._layer.setStyle(e)),this.dispatchEvent(new CustomEvent(n.EVENTS.styleChanged,{bubbles:!0,composed:!0,detail:{style:e}}))}_createLayer(){let e=new r.Z({title:this._name,source:this._source,updateWhileAnimating:!0,updateWhileInteracting:!0,minResolution:this._minResolution,maxResolution:this._maxResolution,visible:this._visible,opacity:this._opacity});return e.set("id",o.w._counter),e}applyPendingStyles(){this._layer&&(this.pendingLayerStyles?.forEach(e=>this.applyStyle(e)),this.pendingLayerStyles=[])}}}}]);