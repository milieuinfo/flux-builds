"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[6319],{"../../libs/map/src/actions/draw/draw-action.ts":(e,t,s)=>{s.d(t,{r:()=>m});var r=s("../../node_modules/ol/geom/LineString.js"),a=s("../../node_modules/ol/geom/Polygon.js"),i=s("../../node_modules/ol/interaction/Draw.js"),o=s("../../node_modules/ol/Observable.js"),n=s("../../node_modules/ol/Overlay.js"),l=s("../../node_modules/ol/style/Style.js"),c=s("../../node_modules/ol/style/Fill.js"),u=s("../../node_modules/ol/style/Stroke.js"),h=s("../../node_modules/ol/style/Circle.js"),p=s("../../libs/map/src/actions/mapaction.ts"),d=s("../../libs/map/src/actions/snap/snap-interaction.ts");class m extends p.W{constructor(e,t,s,r={}){let a=[],p=new l.Ay({fill:r.style?.getFill()||new c.A({color:"rgba(2, 85, 204, 0.8)"}),stroke:r.style?.getStroke()||new u.A({color:"rgba(2, 85, 204, 1)",width:1}),image:r.style?.getImage()||new h.A({radius:4,stroke:new u.A({color:"rgba(2, 85, 204, 1)",width:1}),fill:new c.A({color:"rgba(2, 85, 204, 0.8)"})})}),m={...r,source:e.getSource(),type:t,style:p},_=new i.Ay(m);if(a.push(_),void 0!==m.snapping)switch(typeof m.snapping){case"boolean":m.snapping&&a.push(new d.N(e.getSource()));break;case"object":m.snapping.layer?a.push(new d.N(m.snapping.layer.getSource(),m.snapping)):a.push(new d.N(e.getSource(),m.snapping))}_.on("drawstart",e=>{if(m.measure){let{feature:t}=e;m.measure="object"==typeof m.measure?m.measure:{},m.measure.tooltip=m.measure.tooltip||{};let s=document.createElement("div");s.setAttribute("class","measure-tooltip"),this.tooltip=new n.A({offset:m.measure.tooltip.offset||[-15,10],positioning:"bottom-center"}),this.map.addOverlay(this.tooltip),this.measurePointermoveHandler=this.map.on("pointermove",()=>{this._showMeasureTooltip(t,s)})}}),_.on("drawend",t=>{let{feature:r}=t;s(r,()=>{if(e.getSource().hasFeature(r))e.getSource().removeFeature(r);else{let t=e.getSource().on("addfeature",s=>{e.getSource().removeFeature(s.feature),(0,o.e)(t)})}}),this._cleanUp()}),super(a),this.options=m,this.drawInteraction=_,this.layer=e}activate(){this.options.snapping&&this.options.snapping.layer&&this.map.addLayer(this.options.snapping.layer),super.activate()}deactivate(){this._cleanUp(),this.options.snapping&&this.options.snapping.layer&&this.map.removeLayer(this.options.snapping.layer),super.deactivate()}_cleanUp(){this.options.measure&&((0,o.e)(this.measurePointermoveHandler),this._removeTooltip())}_removeTooltip(){this.tooltip&&(this.map.removeOverlay(this.tooltip),this.tooltip=void 0)}_showMeasureTooltip(e,t){if(this.tooltip){let s=this._getLengthOfLastSegment(e.getGeometry());0!==s&&(t.textContent=`${s} m`,this.tooltip.setElement(t),this.tooltip.setPosition(e.getGeometry().getLastCoordinate()))}}_getLengthOfLastSegment(e){return e&&e instanceof r.A?new r.A(this._getCoordinatesOfLastSegment(e)).getLength().toFixed(2):e&&e instanceof a.Ay?new r.A(this._getCoordinatesOfLastSegment(e.getLinearRing(0))).getLength().toFixed(2):0}_getCoordinatesOfLastSegment(e){let t=e.getCoordinates().length;return e.getCoordinates().slice(t-2)}stop(){this.drawInteraction.abortDrawing()}pointermove(){}}},"../../libs/map/src/actions/layer/composite-vector-layer.ts":(e,t,s)=>{s.d(t,{E:()=>i});var r=s("../../node_modules/ol/layer/Vector.js"),a=s("../../libs/map/src/actions/source/composite-vector-source.ts");class i extends r.A{constructor(e,t={}){super({title:t.title,source:new a.C(e.map(e=>e.getSource())),updateWhileAnimating:!0,updateWhileInteracting:!0,minResolution:e.map(e=>e.getMinResolution()).reduce((e,t)=>Math.min(e,t)),maxResolution:e.map(e=>e.getMaxResolution()).reduce((e,t)=>Math.max(e,t))})}}},"../../libs/map/src/actions/mapaction.ts":(e,t,s)=>{s.d(t,{W:()=>r});class r{constructor(e){Array.isArray(e)||(e=[e]),this._interactions=[],e.forEach(e=>{this.addInteraction(e)})}get layer(){return this._layer}set layer(e){this._layer=e}get interactions(){return this._interactions}set interactions(e){this._interactions=e}addInteraction(e){e.setActive(!1),this._interactions.push(e)}activate(){this._interactions.forEach(e=>{e.setActive(!0)})}deactivate(){this._interactions.forEach(e=>{e.setActive(!1)})}getControl(){return this.map.getActionControlWithIdentifier(this.element.identifier)}}},"../../libs/map/src/actions/snap/snap-interaction.ts":(e,t,s)=>{s.d(t,{N:()=>a});var r=s("../../node_modules/ol/interaction/Snap.js");class a extends r.A{constructor(e,t={}){let s={...t};s.source=e,s.pixelTolerance=t.pixelTolerance||7,super(s)}}},"../../libs/map/src/actions/source/composite-vector-source.ts":(e,t,s)=>{s.d(t,{C:()=>i});var r=s("../../node_modules/ol/source/Vector.js"),a=s("../../node_modules/ol/loadingstrategy.js");class i extends r.A{constructor(e){super({strategy:a.Qk,loader:(t,s,r)=>{Promise.all(e.map(e=>fetch(e.getUrl()(t,s,r)).then(e=>e.text()))).then(t=>{t.forEach((t,s)=>{let r=e[s].getFormat().readFeatures(t);this.addFeatures(r)})})}}),this.__sources=e}get sources(){return this.__sources}}},"../../libs/map/src/components/action/draw-action/draw-action-style/vl-map-draw-action-style.ts":(e,t,s)=>{s.d(t,{K:()=>l});var r=s("../../libs/common/src/index.ts"),a=s("../../node_modules/ol/style/Fill.js"),i=s("../../node_modules/ol/style/Stroke.js"),o=s("../../node_modules/ol/style/Circle.js"),n=s("../../node_modules/ol/style/Style.js");class l extends(0,r.H3)(HTMLElement){connectedCallback(){super.connectedCallback(),this._setStyleOnParent()}get fillColor(){return this.getAttribute("color")||"rgba(2, 85, 204, 0.8)"}get strokeColor(){return this.getAttribute("border-color")||"rgba(2, 85, 204, 1)"}get strokeSize(){return this.getAttribute("border-size")||1}get circleRadius(){return this.getAttribute("circle-size")||4}get circleColor(){return this.getAttribute("circle-color")||"rgba(2, 85, 204, 0.8)"}get circleStrokeColor(){return this.getAttribute("circle-border-color")||"rgba(2, 85, 204, 1)"}get circleStrokeSize(){return this.getAttribute("circle-border-size")||1}get style(){return this._styleFunction()}get _styleFunction(){return()=>{let e={fill:new a.A({color:this.fillColor}),stroke:new i.A({color:this.strokeColor,width:this.strokeSize}),image:new o.A({radius:this.circleRadius,fill:new a.A({color:this.circleColor}),stroke:new i.A({color:this.circleStrokeColor,width:this.circleStrokeSize})}),text:void 0};return new n.Ay(e)}}_setStyleOnParent(){this.parentElement&&customElements.whenDefined(this.parentElement.tagName.toLowerCase()).then(()=>{this.parentElement.style=this})}}l=function(e,t,s,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(o=(i<3?a(o):i>3?a(t,s,o):a(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o}([(0,r.M1)("vl-map-draw-action-style")],l)},"../../libs/map/src/components/action/draw-action/vl-map-draw-action.ts":(e,t,s)=>{s.d(t,{H:()=>n});var r=s("../../libs/map/src/actions/layer/composite-vector-layer.ts"),a=s("../../libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts"),i=s("../../libs/map/src/components/action/layer-action/vl-map-layer-action.ts"),o=s("../../libs/map/src/components/action/draw-action/draw-action-style/vl-map-draw-action-style.ts");class n extends i.c{get style(){return this._style}set style(e){e instanceof o.K&&(this._style=e.style),this._processAction()}onDraw(e){this.__callback=e}get __drawOptions(){let e={style:this.style,snapping:void 0};return null!==this.getAttribute("snapping")&&(e.snapping=0===this.__snappingLayers.length||{layer:this.__createSnappingLayer(),pixelTolerance:this.getAttribute("snapping-pixel-tolerance")||10,node:!1,vertex:!1}),e}__createSnappingLayer(){let e=new r.E(this.__snappingLayers.map(e=>e._layer),{}),t=this.__snappingLayers[0];return e.setStyle(t.style),t.addEventListener(a.P.EVENTS.styleChanged,t=>{e.setStyle(t.target.style)}),e}get __snappingLayers(){return Array.from(this.querySelectorAll("vl-map-wfs-layer"))}}},"../../libs/map/src/components/action/layer-action/vl-map-layer-action.ts":(e,t,s)=>{s.d(t,{c:()=>i});var r=s("../../libs/common/src/index.ts"),a=s("../../libs/map/src/components/action/vl-map-action.ts");class i extends a.P{static get _observedAttributes(){return["layer"]}connectedCallback(){return this._layerChangedCallback(),super.connectedCallback()}get layer(){return this._layer}set layer(e){this._layer=e,this._processAction()}get _layerElement(){return this._mapElement.querySelector(`[is-layer][name="${this.getAttribute("layer")}"]`)||this.closest("[is-layer]")}_layerChangedCallback(){this._layerElement&&(this.layer=this._layerElement.layer)}_processAction(e){this._mapElement.ready.then(()=>{this._action&&this._mapElement.removeAction(this._action),this.layer&&(this._action=this._createAction(this.layer),super._processAction()),e&&(this._action=this._createAction(e),super._processAction())})}}i=function(e,t,s,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(o=(i<3?a(o):i>3?a(t,s,o):a(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o}([(0,r.M1)("vl-map-layer-action")],i)},"../../libs/map/src/components/action/vl-map-action.ts":(e,t,s)=>{s.d(t,{P:()=>a});var r=s("../../libs/common/src/index.ts");class a extends r.F9{constructor(){super(),this._active=!1,this._controlledActive=!1}connectedCallback(){super.connectedCallback(),this.__defineLayer()}static isVlMapAction(){return!0}get action(){return this._action}get _mapElement(){return this.closest("vl-map")}get _defaultActive(){return this.hasAttribute("default-active")}get _callback(){return(...e)=>this.__callback?this.__callback(...e):null}get _layerElement(){return console.warn("_layerElement implementation is missing"),null}get active(){return this._controlledActive}set active(e){this._controlledActive=e,e?this.activate():this.deactivate()}get layer(){return this._layer}set layer(e){this._layer=e}activate(){this.action&&this.action.layer.get("visible")&&this._mapElement.changeActiveAction(this.action)}deactivate(){if(this.action&&this.action===this._mapElement.activeAction){let e=this.action!==this._mapElement.defaultAction,t=this._mapElement.defaultAction&&this._mapElement.defaultAction.layer.get("visible");this._mapElement.changeActiveAction(e&&t&&this._mapElement.defaultAction)}}_createAction(e){return console.warn("_createAction implementation is missing"),null}_processAction(){this.action&&(this.action.element=this,this._mapElement.addAction(this.action),(this._defaultActive&&!this._mapElement.activeAction||this.active)&&this.activate())}__defineLayer(){this._layerElement&&(this.layer=this._layerElement.layer)}reset(){this._active=!1}}a=function(e,t,s,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(o=(i<3?a(o):i>3?a(t,s,o):a(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o}([(0,r.M1)("vl-map-action")],a)},"../../libs/map/src/components/baselayer/vl-map-base-layer-grb-gray/vl-map-base-layer-grb-gray.ts":(e,t,s)=>{s.d(t,{L:()=>i});var r=s("../../libs/common/src/index.ts"),a=s("../../libs/map/src/components/baselayer/vl-map-base-layer.ts");class i extends a.j{constructor(){super(),this.url="https://geo.api.vlaanderen.be/GRB/wmts",this.layer="grb_bsk_grijs",this.title="GRB basis laag grijs"}}i=function(e,t,s,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(o=(i<3?a(o):i>3?a(t,s,o):a(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o}([(0,r.M1)("vl-map-baselayer-grb-gray")],i)},"../../libs/map/src/components/layer/vector-layer/vl-map-features-layer/vl-map-features-layer.ts":(e,t,s)=>{var r=s("../../libs/common/src/index.ts"),a=s("../../node_modules/ol/format/GeoJSON.js"),i=s("../../node_modules/ol/geom/Point.js"),o=s("../../node_modules/ol/source/Cluster.js"),n=s("../../node_modules/ol/source/Vector.js"),l=s("../../libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts");class c extends l.P{static get _observedAttributes(){return l.P._observedAttributes.concat(["auto-extent","features"])}constructor(){super()}init(){this._geoJSON=new a.A,this._source=this.__createSource(),this._layer=this._createLayer()}async connectedCallback(){this.init(),await super.connectedCallback(),this._autoZoomToExtent()}get features(){return this.__featuresSource?this.__featuresSource.getFeatures():this._featuresFromAttribute}get _featuresFromAttribute(){let e=this.getAttribute("features");return e?this.__readGeoJsonFeatures(e):[]}set features(e){this.setAttribute("features",JSON.stringify(e))}get _autoExtent(){return void 0!=this.getAttribute("auto-extent")}get _autoExtentMaxZoom(){return this.getAttribute("auto-extent-max-zoom")}get cluster(){return void 0!=this.getAttribute("cluster")}get _clusterDistance(){return this.getAttribute("cluster-distance")}removeFeaturesStyle(){this.__featuresSource&&this.__featuresSource.getFeatures()&&this.__featuresSource.getFeatures().forEach(e=>{e.setStyle(null)})}getFeature(e){if(this.__featuresSource&&this.__featuresSource.getFeatures())return this.__featuresSource.getFeatures().filter(t=>t.getId()===e)[0]}getCluster(e){if(this._layer)return this._layer.getSource().getFeatures().filter(t=>{let s=t.get("features");return!!s&&s.some(t=>t.getId()===e)})[0]}async zoomToExtent(e){this.mapElement&&this.boundingBox&&this.mapElement.zoomTo(this.boundingBox,e)}clearFeatures(){this.__featuresSource&&(this.__featuresSource.clear(),this._featuresChanged())}addFeature(e){this.__featuresSource&&(this.__featuresSource.addFeatures([this._geoJSON.readFeature(e)]),this._featuresChanged())}addFeatureCollection(e){this.__featuresSource&&(this.__featuresSource.addFeatures(this._geoJSON.readFeatures(e)),this._featuresChanged())}_autoExtentChangedCallback(){this._autoZoomToExtent()}_featuresChangedCallback(e,t){t&&this._layer&&(this.__featuresSource.clear(),this.__featuresSource.addFeatures(this.__readGeoJsonFeatures(t)),this._featuresChanged())}_featuresChanged(){this._autoZoomToExtent(),this.rerender()}_autoZoomToExtent(){this._autoExtent&&this.zoomToExtent(this._autoExtentMaxZoom)}get boundingBox(){if(this.__featuresSource&&this.__featuresSource.getFeatures().length>0)return this.__featuresSource.getExtent()}__createSource(){let e=new n.A({features:this.features});return this.cluster?this.__createClusterSource(e):e}__createClusterSource(e){return new o.A({distance:this._clusterDistance,source:e,geometryFunction:e=>{let t=e.getGeometry();return t instanceof i.A?t:this.__ignoreClustering()}})}get __featuresSource(){return this.cluster&&this.source?this.source.getSource():this.source}__ignoreClustering(){return null}__readGeoJsonFeatures(e){return this._geoJSON.readFeatures(e)}}c=function(e,t,s,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(o=(i<3?a(o):i>3?a(t,s,o):a(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o}([(0,r.M1)("vl-map-features-layer")],c)},"../../libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts":(e,t,s)=>{s.d(t,{P:()=>o});var r=s("../../node_modules/ol/layer/Vector.js"),a=s("../../libs/map/src/components/layer-style/vl-map-layer-style.ts"),i=s("../../libs/map/src/components/layer/vl-map-layer.ts");class o extends i.M{static get EVENTS(){return{styleChanged:"style-changed"}}constructor(){super(),this.pendingLayerStyles=[],this._styles=[]}async connectedCallback(){await super.connectedCallback(),this.applyPendingStyles()}get style(){return this.layer?.getStyle()||null}set style(e){this._layer?this.applyStyle(e):this.pendingLayerStyles=[...this.pendingLayerStyles,e]}applyStyle(e){e instanceof a.t?(this._styles.push(e),this._layer.setStyle(e=>this._styles.map(t=>t.style(e)).filter(e=>null!=e))):(this._styles=[],this._layer.setStyle(e)),this.dispatchEvent(new CustomEvent(o.EVENTS.styleChanged,{bubbles:!0,composed:!0,detail:{style:e}}))}_createLayer(){let e=new r.A({title:this._name,source:this._source,updateWhileAnimating:!0,updateWhileInteracting:!0,minResolution:this._minResolution,maxResolution:this._maxResolution,visible:this._visible,opacity:this._opacity});return e.set("id",i.M._counter),e}applyPendingStyles(){this._layer&&(this.pendingLayerStyles?.forEach(e=>this.applyStyle(e)),this.pendingLayerStyles=[])}}}}]);