"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[3025],{"./docs/f_ontwerp/form/3_custom-validation/form-custom-validation.stories.ts":(e,n,o)=>{o.r(n),o.d(n,{CustomValidation:()=>c,__namedExportsOrder:()=>u,default:()=>d});var t=o("../../node_modules/lit-html/lit-html.js");o("../../node_modules/react/index.js");var r=o("../../node_modules/react/jsx-runtime.js"),a=o("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),s=o("../../node_modules/@storybook/blocks/dist/index.mjs");function l(e){let n=Object.assign({h1:"h1",blockquote:"blockquote",p:"p",a:"a",code:"code",h2:"h2",ul:"ul",li:"li"},(0,a.RP)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"form---custom-validatie",children:"Form - Custom Validatie"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Meer info over validatie binnen onze form componenten vind je hier: ",(0,r.jsx)(n.a,{href:"/docs/ontwerp-form-validation--documentatie",children:"Form - Validatie"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Om gebruik te maken van custom validatie moet je een nieuwe component maken dat overerft van één van onze form controls.",(0,r.jsx)("br",{}),"\nAan dit component kan je je custom validator toevoegen. Via de ",(0,r.jsx)(n.code,{children:"customError"})," ValidityState key kan je een error message linken aan je custom validator."]}),"\n",(0,r.jsx)(n.h2,{id:"extra-informatie",children:"Extra informatie"}),"\n",(0,r.jsxs)(n.p,{children:["Het is nodig om een custom component te maken voor elke custom validator die je wil toevoegen:",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["De validators worden toegevoegd op de form controls d.m.v. een statische array. Dit betekent dat als je een custom validator toevoegt aan een form control, deze validator zal toegevoegd worden aan alle form controls van dit type.",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["De form controls maken gebruik van de ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/ValidityState",target:"_blank",rel:"nofollow noopener noreferrer",children:"ValidityState interface"})," waardoor er maximum 1 custom validator toegevoegd kan worden aan een form control.",(0,r.jsx)("br",{}),"\nBij het toevoegen van een 2de custom validator zal de eerste custom validator overschreven worden.",(0,r.jsx)("br",{})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,r.jsx)(s.Hl,{of:c,sourceState:"none"}),"\n",(0,r.jsxs)("details",{open:!0,children:[(0,r.jsx)("summary",{children:"Code"}),(0,r.jsx)(s.kL,{code:'import { registerWebComponents, webComponent } from \'@domg-wc/common\';\nimport { vlGridStyles, vlLegacyStyles } from \'@domg-wc/styles\';\nimport { VlButtonComponent } from \'@domg-wc/components/atom\';\nimport { VlFormMessageComponent, VlFormLabelComponent, VlInputFieldComponent } from \'@domg-wc/components/form\';\nimport { Validator } from \'@open-wc/form-control\';\nimport { css, CSSResult, html, LitElement, PropertyDeclarations } from \'lit\';\n\nconst fooValidator: Validator = {\n    key: \'customError\',\n    message: `Value does not equal \'foo\'`,\n    isValid(_instance: HTMLElement, value: string): boolean {\n        if (!value) {\n            return true;\n        }\n\n        if (value !== \'foo\') {\n            return false;\n        }\n\n        return true;\n    },\n};\n\n@webComponent(\'vl-input-field-with-foo-validator\')\nexport class VlInputFieldWithFooValidatorComponent extends VlInputFieldComponent {\n    static override formControlValidators = [...VlInputFieldComponent.formControlValidators, fooValidator];\n}\n\n@webComponent(\'vl-form-custom-validation\')\nexport class VlFormCustomValidationComponent extends LitElement {\n    private success = false;\n\n    static {\n        registerWebComponents([\n            VlInputFieldWithFooValidatorComponent,\n            VlFormLabelComponent,\n            VlFormMessageComponent,\n            VlButtonComponent,\n        ]);\n    }\n\n    static override get styles(): (CSSResult | CSSResult[])[] {\n        return [\n            vlLegacyStyles,\n            vlGridStyles,\n            css`\n                form {\n                    margin-top: 1rem;\n                    max-width: 800px;\n                }\n\n                .form-buttons {\n                    vl-button:not(:last-child) {\n                        margin-right: 1.4rem;\n                    }\n                }\n            `,\n        ];\n    }\n\n    static override get properties(): PropertyDeclarations {\n        return {\n            success: { type: Boolean, state: true },\n        };\n    }\n\n    override render() {\n        return html`\n            <form class="vl-form" @submit=${this.onSubmit} @reset=${this.onReset}>\n                <div class="vl-grid">\n                    <div class="vl-column vl-column--4">\n                        <vl-form-label for="waarde" label="Waarde *" block></vl-form-label>\n                    </div>\n                    <div class="vl-column vl-column--8">\n                        <vl-input-field-with-foo-validator\n                            id="waarde"\n                            name="waarde"\n                            block\n                            required\n                            ?success=${this.success}\n                            @invalid=${() => {\n                                this.success = false;\n                            }}\n                        ></vl-input-field-with-foo-validator>\n                        <vl-form-message for="waarde" state="valueMissing"\n                            >Gelieve een waarde in te vullen.</vl-form-message\n                        >\n                        <vl-form-message for="waarde" state="customError"\n                            >Gelieve \'foo\' als waarde in te vullen.</vl-form-message\n                        >\n                    </div>\n                    <div class="vl-column vl-column--8 vl-column--start-5">\n                        <div class="form-buttons">\n                            <vl-button type="submit">Verstuur</vl-button>\n                            <vl-button type="reset" secondary>Reset</vl-button>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        `;\n    }\n\n    private onSubmit(e: Event) {\n        e.preventDefault();\n        this.success = true;\n    }\n\n    private onReset() {\n        this.success = false;\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        \'vl-input-field-with-foo-validator\': VlInputFieldWithFooValidatorComponent;\n        \'vl-form-custom-validation\': VlFormCustomValidationComponent;\n    }\n}\n',language:"ts",dark:!0})]})]})}var i=o("../../libs/common/src/index.ts"),m=o("../../libs/integrations/src/form/index.ts");(0,i.gy)([m.cz]);let d={title:"Ontwerp/Form/Custom Validation",tags:["autodocs"],parameters:{docs:{page:function(e={}){let{wrapper:n}=Object.assign({},(0,a.RP)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(l,e)})):l(e)}}}},c=()=>(0,t.qy)`<vl-form-custom-validation></vl-form-custom-validation>`;c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:"() => html`<vl-form-custom-validation></vl-form-custom-validation>`",...c.parameters?.docs?.source}}};let u=["CustomValidation"]}}]);