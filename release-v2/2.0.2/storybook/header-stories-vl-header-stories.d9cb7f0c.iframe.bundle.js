"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[1171],{"../../libs/components/src/compliance/header/stories/vl-header.stories.ts":(e,t,n)=>{n.r(t),n.d(t,{HeaderDefault:()=>y,__namedExportsOrder:()=>j,default:()=>f});var r=n("../../node_modules/lit-html/lit-html.js"),i=n("../../libs/common/src/index.ts"),o=n("../../node_modules/lit/index.js");let a=(0,o.AH)`
    #header__container {
        min-height: 43px;
    }
`,l=(0,o.AH)`
    #header__skeleton {
        content: '';
        height: 43px;
        width: 100%;
        display: block;
        background: #fff;
    }

    #header__container ~ #header__skeleton {
        display: none;
    }
`,s={authenticatedUserUrl:"/sso/ingelogde_gebruiker",development:!1,identifier:"",loginRedirectUrl:"/",loginUrl:"/sso/aanmelden",logoutUrl:"/sso/afgemeld",switchCapacityUrl:"/sso/wissel_organisatie",simple:!1,skeleton:!1,rejectLogout:!1,logoutCallback:null,applicationLinks:[]};(0,i.gy)([i.lu,i.Dz]);class d extends i.jW{constructor(){super(),this.logoutCallback=s.logoutCallback,this.applicationLinks=s.applicationLinks,this.authenticatedUserUrl=s.authenticatedUserUrl,this.development=s.development,this.identifier=s.identifier,this.loginRedirectUrl=s.loginRedirectUrl,this.loginUrl=s.loginUrl,this.logoutUrl=s.logoutUrl,this.switchCapacityUrl=s.switchCapacityUrl,this.simple=s.simple,this.skeleton=s.skeleton,this.rejectLogout=s.rejectLogout,this.observer=null,this.session=null,this.authenticated=!1,this.allowCustomCSS=!1}static get properties(){return{authenticatedUserUrl:{type:String,attribute:"authenticated-user-url"},development:{type:Boolean,attribute:"development"},identifier:{type:String,attribute:"identifier"},loginRedirectUrl:{type:String,attribute:"login-redirect-url"},loginUrl:{type:String,attribute:"login-url"},logoutUrl:{type:String,attribute:"logout-url"},simple:{type:Boolean,attribute:"simple"},skeleton:{type:Boolean,attribute:"skeleton"},switchCapacityUrl:{type:String,attribute:"switch-capacity-url"},rejectLogout:{type:Boolean,attribute:"reject-logout"},logoutCallback:{type:Function},applicationLinks:{type:Array}}}get headerContainer(){return document.querySelector("#header__container")}get headerContainerSkeleton(){return document.querySelector("#header__container__skeleton")}connectedCallback(){super.connectedCallback(),this.injectHeaderContainer(),this.skeleton&&this.injectHeaderContainerSkeleton(),this.observeWidgetIsAdded(),this.loadWidget()}disconnectedCallback(){super.disconnectedCallback(),this.headerContainer?.remove(),this.skeleton&&this.headerContainerSkeleton?.remove(),this.observer?.disconnect()}injectHeader(){console.warn("VlHeader - injectHeader() - deze methode is deprecated en mag niet gebruikt worden."),this.injectHeaderContainer()}vlwHeader(){return console.warn("VlHeader - vlwHeader() - deze methode is deprecated en mag niet gebruikt worden."),document.querySelector("div[class=vlw__header]")}header(){return console.warn("VlHeader - header() - deze methode is deprecated en mag niet gebruikt worden."),this.headerContainer}willUpdate(e){["loginUrl","loginRedirectUrl","logoutUrl","switchCapacityUrl"].some(t=>e.has(t))&&this.configureSession()}createRenderRoot(){return this}injectHeaderContainer(){(document.querySelector("body")||document.body).insertAdjacentHTML("afterbegin",'<div id="header__container"><div id="header"></div></div>'),this.addStylesToInjectedElement("#header__container",a)}injectHeaderContainerSkeleton(){let e=this.headerContainer;e&&e.insertAdjacentHTML("afterend",'<div id="header__skeleton"></div>'),this.addStylesToInjectedElement("#header__skeleton",l)}addStylesToInjectedElement(e,t){let n=document.createElement("style");n.textContent=t.cssText;let r=document.querySelector(e);r?.appendChild(n)}observeWidgetIsAdded(){let e=t=>"HEADER"===t.tagName||t.childNodes&&[...t.childNodes].some(e);this.observer=new MutationObserver((t,n)=>{t.flatMap(e=>[...e.addedNodes]).some(e)&&(n.disconnect(),this.dispatchEvent(new CustomEvent("ready")))}),this.headerContainer&&this.observer.observe(this.headerContainer,{childList:!0})}async isUserAuthenticated(){return 200===(await fetch(this.authenticatedUserUrl)).status}loadWidget(){let e=this.development?`https://tni.widgets.burgerprofiel.dev-vlaanderen.be/api/v1/widget/${this.identifier}`:`https://prod.widgets.burgerprofiel.vlaanderen.be/api/v1/widget/${this.identifier}`;window.vl.widget.client.bootstrap(e).then(e=>(e.setMountElement(document.getElementById("header")),e.mount(),e)).then(e=>{if(this.applicationLinks.length>0){let t=this.applicationLinks.map(e=>({type:"link",...e}));e.getExtension("citizen_profile").then(e=>{e.getMenu().getGroup("application").addMultiple(t)})}this.simple||(e.getExtension("citizen_profile.session").then(async e=>{this.session=e,this.authenticated=await this.isUserAuthenticated(),this.configureSession()}),e.on("citizen_profile.session.logout.request",async e=>{e.acknowledge();let t=e.getRequest().getReason();if("user"===t){e.accept();return}if(this.rejectLogout||this.logoutCallback&&!await this.logoutCallback(t)){e.reject();return}e.accept()}))}).catch(e=>{console.error(e)})}async configureSession(){let e={active:this.authenticated,endpoints:{loginUrl:this.loginUrl,loginRedirectUrl:this.loginRedirectUrl,logoutUrl:this.logoutUrl,switchCapacityUrl:this.switchCapacityUrl}};this.session?.configure(e)}}d=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,i.hL)(()=>(0,i.s2)("vl-header-polyfill","https://prod.widgets.burgerprofiel.vlaanderen.be/api/v1/node_modules/@govflanders/vl-widget-polyfill/dist/index.js").then(()=>{(0,i.s2)("vl-header-client","https://prod.widgets.burgerprofiel.vlaanderen.be/api/v1/node_modules/@govflanders/vl-widget-client/dist/index.js").finally(()=>{customElements.define("vl-header",d)})}).catch(()=>{customElements.define("vl-header",d)}))],d);var c=n("../../resources/utils-storybook/index.ts"),u=n("../../node_modules/@storybook/addon-actions/dist/index.mjs");let g={...s,onReady:(0,u.XI)("ready")},h={authenticatedUserUrl:{name:"authenticated-user-url",description:"De url die wordt opgeroepen om te zien of een gebruiker is ingelogd.",table:{type:{summary:c.QE.URL},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.authenticatedUserUrl}}},development:{name:"development",description:"Geeft aan dat de AIV ontwikkel servers gebruikt moeten worden.",table:{type:{summary:c.QE.BOOLEAN},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.development}}},identifier:{name:"identifier",description:"De identifier die gebruikt wordt om bij AIV de footer op te halen.",table:{type:{summary:c.QE.STRING},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.identifier}}},loginRedirectUrl:{name:"login-redirect-url",description:"De redirect url die gebruikt wordt bij het aanmelden.<br>Bij het aanpassen van dit attribuut wordt achterliggend de session.configure() methode van DV opnieuw aangeroepen.",table:{type:{summary:c.QE.URL},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.loginRedirectUrl}}},loginUrl:{name:"login-url",description:"De url die gebruikt wordt bij het aanmelden.<br>Bij het aanpassen van dit attribuut wordt achterliggend de session.configure() methode van DV opnieuw aangeroepen.",table:{type:{summary:c.QE.URL},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.loginUrl}}},logoutUrl:{name:"logout-url",description:"De url die wordt opgeroepen wanneer men zich wil afmelden.<br>Bij het aanpassen van dit attribuut wordt achterliggend de session.configure() methode van DV opnieuw aangeroepen.",table:{type:{summary:c.QE.URL},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.logoutUrl}}},simple:{name:"simple",description:"Indien true wordt het configureren van de sessie overgeslagen.",table:{type:{summary:c.QE.BOOLEAN},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.simple}}},skeleton:{name:"skeleton",description:"Geeft aan of de header een skeleton moet tonen voordat het rendert.",table:{type:{summary:c.QE.BOOLEAN},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.skeleton}}},switchCapacityUrl:{name:"switch-capacity-url",description:"De url die wordt opgeroepen wanneer men van organisatie wil wisselen.<br>Bij het aanpassen van dit attribuut wordt achterliggend de session.configure() methode van DV opnieuw aangeroepen.",table:{type:{summary:c.QE.URL},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.switchCapacityUrl}}},rejectLogout:{name:"reject-logout",description:"Geeft aan of het logout request moet worden afgewezen.<br/>Een logout request door de gebruiker wordt nooit afgewezen.",table:{type:{summary:c.QE.BOOLEAN},category:c.R6.ATTRIBUTES,defaultValue:{summary:g.rejectLogout}}},logoutCallback:{name:"logoutCallback",description:"De callback die aangeroepen wordt bij een logout request.<br/>De logout reason wordt meegegeven aan de callback, door een boolean promise terug te geven kan je het logout request accepteren of afwijzen.<br/>De mogelijke reasons zijn: 'inactivity' en 'expired'.<br/>Een logout request door de gebruiker wordt nooit afgewezen.",control:!1,table:{type:{summary:"(reason: string) => Promise<boolean>"},category:c.R6.PROPERTIES,defaultValue:{summary:g.logoutCallback}}},applicationLinks:{name:"applicationLinks",description:"De links die getoond worden in de header.<br/>Zie de documentatie pagina voor meer informatie.",table:{type:{summary:"ApplicationLink[]"},category:c.R6.PROPERTIES,defaultValue:{summary:"[]"}}},onReady:{name:"ready",description:"Afgevuurd nadat de widget toegevoegd is aan de DOM.",table:{type:{summary:"-"},category:c.R6.EVENTS}}};n("../../node_modules/react/index.js");var p=n("../../node_modules/react/jsx-runtime.js"),m=n("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),b=n("../../node_modules/@storybook/blocks/dist/index.mjs");function v(e){let t=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",pre:"pre",h3:"h3",ul:"ul",li:"li",a:"a"},(0,m.RP)(),e.components),{FluxMetaData:n}=t;return n||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("FluxMetaData",!0),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t.h1,{id:"digitaal-vlaanderen-header",children:"Digitaal Vlaanderen Header"}),"\n",(0,p.jsx)(n,{id:"components-compliance-header"}),"\n",(0,p.jsxs)(t.p,{children:["Injecteert de global header widget van Digitaal Vlaanderen.\nDefault wordt de header geïnjecteerd geïnjecteerd in het native ",(0,p.jsx)(t.code,{children:"<body>"})," element."]}),"\n",(0,p.jsx)(t.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,p.jsx)(t.pre,{children:(0,p.jsx)(t.code,{className:"language-js",children:"import { VlHeader } from '@domg-wc/components/compliance';\n"})}),"\n",(0,p.jsx)(t.pre,{children:(0,p.jsx)(t.code,{className:"language-html",children:"<vl-header></vl-header>\n"})}),"\n",(0,p.jsx)(b.Hl,{of:y}),"\n",(0,p.jsx)(t.h2,{id:"configuratie",children:"Configuratie"}),"\n",(0,p.jsx)(b.ov,{of:y}),"\n",(0,p.jsx)(t.h2,{id:"sessies",children:"Sessies"}),"\n",(0,p.jsx)(t.h3,{id:"configuratie-1",children:"Configuratie"}),"\n",(0,p.jsxs)(t.p,{children:["Bij het aanpassen van volgende attributen wordt achterliggend de ",(0,p.jsx)(t.code,{children:"session.configure()"})," methode van DV opnieuw aangeroepen:"]}),"\n",(0,p.jsxs)(t.ul,{children:["\n",(0,p.jsx)(t.li,{children:(0,p.jsx)(t.code,{children:"login-url"})}),"\n",(0,p.jsx)(t.li,{children:(0,p.jsx)(t.code,{children:"login-redirect-url"})}),"\n",(0,p.jsx)(t.li,{children:(0,p.jsx)(t.code,{children:"logout-url"})}),"\n",(0,p.jsx)(t.li,{children:(0,p.jsx)(t.code,{children:"switch-capacity-url"})}),"\n"]}),"\n",(0,p.jsxs)(t.p,{children:["Zie ",(0,p.jsx)(t.a,{href:"https://vlaamseoverheid.atlassian.net/wiki/spaces/IKPubliek/pages/6336119448/Aanmelden+met+eenvoudig+of+gekoppeld+toegangsbeheer#De-endpoints-overschrijven",target:"_blank",rel:"nofollow noopener noreferrer",children:"Digitaal Vlaanderen - De endpoints overschrijven"})," voor meer informatie."]}),"\n",(0,p.jsx)(t.h2,{id:"applicatieve-links",children:"Applicatieve Links"}),"\n",(0,p.jsxs)(t.p,{children:["Je kan applicatieve links toevoegen aan de header door gebruik te maken van de ",(0,p.jsx)(t.code,{children:"applicationLinks"})," property.",(0,p.jsx)("br",{}),"\nDeze property verwacht een array met objecten van het volgende type:"]}),"\n",(0,p.jsx)(t.pre,{children:(0,p.jsx)(t.code,{className:"language-js",children:"export type ApplicationLink = {\n    label: string;\n    href: string;\n    icon?: string;\n    target?: string;\n};\n"})}),"\n",(0,p.jsxs)(t.p,{children:["Zie ",(0,p.jsx)(t.a,{href:"https://vlaamseoverheid.atlassian.net/wiki/spaces/IKPubliek/pages/6508874105/Aanmeldmenu#Applicatieve-links",target:"_blank",rel:"nofollow noopener noreferrer",children:"Digitaal Vlaanderen - Header applicatieve links"})," voor meer informatie."]}),"\n",(0,p.jsx)(t.h3,{id:"logout-request",children:"Logout request"}),"\n",(0,p.jsxs)(t.p,{children:["Bij het gebruik maken van sessies kan het logout request afgehandeld worden.",(0,p.jsx)("br",{}),"\nDit kan handig zijn als je wilt dat de gebruiker niet automatisch wordt uitgelogd bv. bij inactiviteit of als de sessie verlopen is."]}),"\n",(0,p.jsxs)(t.p,{children:["Door gebruik te maken van het ",(0,p.jsx)(t.code,{children:"reject-logout"})," attribuut worden alle logout requests afgewezen, behalve een logout request door de gebruiker."]}),"\n",(0,p.jsxs)(t.p,{children:["Met de ",(0,p.jsx)(t.code,{children:"logoutCallback"})," property kan je een callback functie meegeven die wordt aangeroepen bij een logout request.",(0,p.jsx)("br",{}),"\nDe logout reason wordt meegegeven aan de callback, door een boolean promise terug te geven kan je de logout accepteren of afwijzen.",(0,p.jsx)("br",{}),"\nDe mogelijke reasons zijn: ",(0,p.jsx)(t.code,{children:"inactivity"})," en ",(0,p.jsx)(t.code,{children:"expired"}),".",(0,p.jsx)("br",{}),"\nEen logout request door de gebruiker wordt nooit afgewezen."]}),"\n",(0,p.jsxs)(t.p,{children:["Zie ",(0,p.jsx)(t.a,{href:"https://vlaamseoverheid.atlassian.net/wiki/spaces/IKPubliek/pages/6336119448/Aanmelden+met+eenvoudig+of+gekoppeld+toegangsbeheer#De-aanvragen-voor-applicatie-logout-afhandelen-via-JavaScript",target:"_blank",rel:"nofollow noopener noreferrer",children:"De aanvragen voor applicatie logout afhandelen via JavaScript"})," voor meer informatie."]}),"\n",(0,p.jsx)(t.h2,{id:"referenties",children:"Referenties"}),"\n",(0,p.jsx)(t.h3,{id:"digitaal-vlaanderen",children:"Digitaal Vlaanderen"}),"\n",(0,p.jsx)(t.p,{children:(0,p.jsx)(t.a,{href:"https://www.vlaanderen.be/digitaal-vlaanderen/onze-oplossingen/mijn-burgerprofiel/koppelen-met-mijn-burgerprofiel-als-dienstenleverancier/technische-toolkit-voor-aansluitingen-door-dienstenleveranciers",target:"_blank",rel:"nofollow noopener noreferrer",children:"Documentatie Digitaal Vlaanderen - Header"})}),"\n",(0,p.jsx)(t.h3,{id:"legacy-documentatie",children:"Legacy Documentatie"}),"\n",(0,p.jsx)(t.p,{children:(0,p.jsx)(t.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/storybook/?path=/docs/custom-elements-vl-header--default",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Storybook - Header"})}),"\n",(0,p.jsx)(t.p,{children:(0,p.jsx)(t.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/doc/VlHeader.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Documentatie - Header"})}),"\n",(0,p.jsx)(t.p,{children:(0,p.jsx)(t.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/demo/vl-header.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Demo - Header"})})]})}let f={id:"components-compliance-header",title:"Components - Compliance/header",tags:["autodocs"],args:g,argTypes:h,parameters:{docs:{page:function(e={}){let{wrapper:t}=Object.assign({},(0,m.RP)(),e.components);return t?(0,p.jsx)(t,Object.assign({},e,{children:(0,p.jsx)(v,e)})):v(e)},inlineStories:!1},layout:"fullscreen"}},y=(0,c._7)(g,({authenticatedUserUrl:e,development:t,identifier:n,loginRedirectUrl:i,loginUrl:o,logoutUrl:a,skeleton:l,simple:s,switchCapacityUrl:d,rejectLogout:c,logoutCallback:u,applicationLinks:g,onReady:h})=>(0,r.qy)`
        <body>
            <vl-header
                authenticated-user-url=${e}
                ?development=${t}
                identifier=${n}
                login-redirect-url=${i}
                login-url=${o}
                logout-url=${a}
                ?simple=${s}
                ?skeleton=${l}
                switch-capacity-url=${d}
                ?reject-logout=${c}
                .logoutCallback=${u}
                .applicationLinks=${g}
                @ready=${h}
            ></vl-header>
        </body>
    `);y.storyName="vl-header - default",y.args={development:!0,identifier:"59188ff6-662b-45b9-b23a-964ad48c2bfb",simple:!0},y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:"story(headerArgs, ({\n  authenticatedUserUrl,\n  development,\n  identifier,\n  loginRedirectUrl,\n  loginUrl,\n  logoutUrl,\n  skeleton,\n  simple,\n  switchCapacityUrl,\n  rejectLogout,\n  logoutCallback,\n  applicationLinks,\n  onReady\n}) => html`\n        <body>\n            <vl-header\n                authenticated-user-url=${authenticatedUserUrl}\n                ?development=${development}\n                identifier=${identifier}\n                login-redirect-url=${loginRedirectUrl}\n                login-url=${loginUrl}\n                logout-url=${logoutUrl}\n                ?simple=${simple}\n                ?skeleton=${skeleton}\n                switch-capacity-url=${switchCapacityUrl}\n                ?reject-logout=${rejectLogout}\n                .logoutCallback=${logoutCallback}\n                .applicationLinks=${applicationLinks}\n                @ready=${onReady}\n            ></vl-header>\n        </body>\n    `)",...y.parameters?.docs?.source}}};let j=["HeaderDefault"]}}]);