"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[8649],{"../../libs/map/src/components/action/layer-action/modify-action/stories/vl-map-modify-action.stories.ts":(e,t,r)=>{r.r(t),r.d(t,{MapModifyActionDefault:()=>m,MapModifyActionSnapping:()=>d,__namedExportsOrder:()=>h,default:()=>y});var a=r("../../resources/utils-storybook/index.ts"),s=r("../../node_modules/lit/index.js");r("../../libs/map/src/vl-map.ts"),r("../../libs/map/src/components/baselayer/vl-map-base-layer-grb-gray/vl-map-base-layer-grb-gray.ts"),r("../../libs/map/src/components/layer-style/vl-map-layer-circle-style/vl-map-layer-circle-style.ts"),r("../../libs/map/src/components/layer-style/vl-map-layer-style.ts"),r("../../libs/map/src/components/layer/vector-layer/vl-map-features-layer/vl-map-features-layer.ts"),r("../../libs/map/src/components/layer/vector-layer/vl-map-wfs-layer/vl-map-wfs-layer.ts"),r("../../libs/map/src/components/action/layer-action/modify-action/vl-map-modify-action.ts");var n=r("../../libs/map/src/components/action/stories/vl-map-action.stories-arg.ts");let i={...n.g,snapping:!1,snappingPixelTolerance:10},o={...n.S,snapping:{name:"snapping",description:"Geeft aan dat er bij het tekenen snapping mag gebeuren, hetzij op de laag waarop getekend wordt (indien geen vl-map-wfs-layer(s) als child elementen), hetzij op de meegegeven vl-map-wfs-layers.<br>Dit attribuut is niet reactief.",control:!1,table:{type:{summary:a.QE.BOOLEAN},category:a.R6.ATTRIBUTES,defaultValue:{summary:i.snapping}}},snappingPixelTolerance:{name:"snapping-pixel-tolerance",description:"Binnen de hoeveel pixel van een feature er gesnapt mag worden.<br>Dit attribuut is niet reactief.",table:{type:{summary:a.QE.NUMBER},category:a.R6.ATTRIBUTES,defaultValue:{summary:i.snappingPixelTolerance}}}};r("../../node_modules/react/index.js");var l=r("../../node_modules/react/jsx-runtime.js"),c=r("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),u=r("../../node_modules/@storybook/blocks/dist/index.mjs");function p(e){let t=Object.assign({h1:"h1",p:"p",code:"code",a:"a",h2:"h2",pre:"pre",h3:"h3"},(0,c.RP)(),e.components),{FluxMetaData:r}=t;return r||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("FluxMetaData",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h1,{id:"map-modify-action",children:"Map Modify Action"}),"\n",(0,l.jsx)(r,{id:"map-action-layer-action-modify-action"}),"\n",(0,l.jsxs)(t.p,{children:["Gebruik het ",(0,l.jsx)(t.code,{children:"map-modify-action"})," component om een feature op een ",(0,l.jsx)(t.a,{href:"/docs/map-layer-vector-layer-features-layer--map-features-layer-default",children:"map-features-layer"})," aan te passen.",(0,l.jsx)("br",{}),"\nDit component erft over van de ",(0,l.jsx)(t.code,{children:"VlMapLayerAction"})," klasse, die op zijn beurt overerft van de ",(0,l.jsx)(t.code,{children:"VlMapAction"})," klasse."]}),"\n",(0,l.jsx)(t.h2,{id:"voorbeeld",children:"Voorbeeld"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"import { VlMapModifyAction } from '@domg-wc/map';\n"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-html",children:"<vl-map-modify-action></vl-map-modify-action>\n"})}),"\n",(0,l.jsx)(u.Hl,{of:m}),"\n",(0,l.jsx)(t.h2,{id:"configuratie",children:"Configuratie"}),"\n",(0,l.jsx)(u.ov,{of:m}),"\n",(0,l.jsx)(t.h2,{id:"varianten",children:"Varianten"}),"\n",(0,l.jsx)(t.h3,{id:"snapping",children:"Snapping"}),"\n",(0,l.jsx)(u.Hl,{of:d}),"\n",(0,l.jsx)(t.h2,{id:"referenties",children:"Referenties"}),"\n",(0,l.jsx)(t.h3,{id:"legacy-documentatie",children:"Legacy Documentatie"}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/storybook/?path=/docs/custom-elements-vl-map-vl-map-modify-action--default",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Storybook - Map Modify Action"})}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/doc/VlMapModifyAction.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Documentatie - Map Modify Action"})}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.a,{href:"https://webcomponenten.omgeving.vlaanderen.be/demo/vl-map-modify-actions.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"Legacy Demo - Map Modify Action"})})]})}let y={id:"map-action-layer-action-modify-action",title:"map/action/layer-action/modify-action",tags:["autodocs"],args:i,argTypes:o,parameters:{docs:{page:function(e={}){let{wrapper:t}=Object.assign({},(0,c.RP)(),e.components);return t?(0,l.jsx)(t,Object.assign({},e,{children:(0,l.jsx)(p,e)})):p(e)}}}},m=(0,a._7)(i,({active:e,defaultActive:t})=>(0,s.qy)`
        <vl-map>
            <vl-map-baselayer-grb-gray></vl-map-baselayer-grb-gray>
            <vl-map-features-layer .features=${{type:"FeatureCollection",features:[{type:"Feature",id:1,geometry:{type:"Point",coordinates:[127836.54,200879.51]}},{type:"Feature",id:2,geometry:{type:"Point",coordinates:[122161.53,185358.26]}},{type:"Feature",id:3,geometry:{type:"LineString",coordinates:[[107836.54,170879.51],[102161.53,192358.26]]}},{type:"Feature",id:4,geometry:{type:"Polygon",coordinates:[[[147055,197908],[157055,197908],[157055,187908],[147055,187908],[147055,197908]]]}}]}}>
                <vl-map-modify-action .active=${e} ?default-active=${t}></vl-map-modify-action>
                <vl-map-layer-style border-size="2"></vl-map-layer-style>
                <vl-map-layer-circle-style border-size="2"></vl-map-layer-circle-style>
            </vl-map-features-layer>
        </vl-map>
    `);m.storyName="vl-map-modify-action - default",m.args={active:!0};let d=(0,a._7)(i,({active:e,defaultActive:t,snapping:r,snappingPixelTolerance:a})=>(0,s.qy)`
            <vl-map>
                <vl-map-baselayer-grb-gray></vl-map-baselayer-grb-gray>
                <vl-map-features-layer .features=${{type:"FeatureCollection",features:[{type:"Feature",id:1,geometry:{type:"Point",coordinates:[151285.5138477709,211586.43498009123]}}]}}>
                    <vl-map-modify-action
                        .active=${e}
                        ?default-active=${t}
                        ?snapping=${r}
                        snapping-pixel-tolerance=${a}
                    >
                        <vl-map-wfs-layer
                            name="Stromend waterlichamen"
                            url="https://geoserver.vmm.be/geoserver/vmm/wfs"
                            layers="owl_l"
                            max-resolution="4"
                        ></vl-map-wfs-layer>
                    </vl-map-modify-action>
                    <vl-map-layer-style border-size="2"></vl-map-layer-style>
                    <vl-map-layer-circle-style border-size="2"></vl-map-layer-circle-style>
                </vl-map-features-layer>
            </vl-map>
        `);d.storyName="vl-map-modify-action - snapping",d.args={active:!0,snapping:!0,snappingPixelTolerance:1e3},m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"story(mapModifyActionArgs, ({\n  active,\n  defaultActive\n}) => {\n  const features = {\n    type: 'FeatureCollection',\n    features: [{\n      type: 'Feature',\n      id: 1,\n      geometry: {\n        type: 'Point',\n        coordinates: [127836.54, 200879.51]\n      }\n    }, {\n      type: 'Feature',\n      id: 2,\n      geometry: {\n        type: 'Point',\n        coordinates: [122161.53, 185358.26]\n      }\n    }, {\n      type: 'Feature',\n      id: 3,\n      geometry: {\n        type: 'LineString',\n        coordinates: [[107836.54, 170879.51], [102161.53, 192358.26]]\n      }\n    }, {\n      type: 'Feature',\n      id: 4,\n      geometry: {\n        type: 'Polygon',\n        coordinates: [[[147055.0, 197908.0], [157055.0, 197908.0], [157055.0, 187908.0], [147055.0, 187908.0], [147055.0, 197908.0]]]\n      }\n    }]\n  };\n  return html`\n        <vl-map>\n            <vl-map-baselayer-grb-gray></vl-map-baselayer-grb-gray>\n            <vl-map-features-layer .features=${features}>\n                <vl-map-modify-action .active=${active} ?default-active=${defaultActive}></vl-map-modify-action>\n                <vl-map-layer-style border-size=\"2\"></vl-map-layer-style>\n                <vl-map-layer-circle-style border-size=\"2\"></vl-map-layer-circle-style>\n            </vl-map-features-layer>\n        </vl-map>\n    `;\n})",...m.parameters?.docs?.source}}},d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:'story(mapModifyActionArgs, ({\n  active,\n  defaultActive,\n  snapping,\n  snappingPixelTolerance\n}) => {\n  const features = {\n    type: \'FeatureCollection\',\n    features: [{\n      type: \'Feature\',\n      id: 1,\n      geometry: {\n        type: \'Point\',\n        coordinates: [151285.5138477709, 211586.43498009123]\n      }\n    }]\n  };\n  return html`\n            <vl-map>\n                <vl-map-baselayer-grb-gray></vl-map-baselayer-grb-gray>\n                <vl-map-features-layer .features=${features}>\n                    <vl-map-modify-action\n                        .active=${active}\n                        ?default-active=${defaultActive}\n                        ?snapping=${snapping}\n                        snapping-pixel-tolerance=${snappingPixelTolerance}\n                    >\n                        <vl-map-wfs-layer\n                            name="Stromend waterlichamen"\n                            url="https://geoserver.vmm.be/geoserver/vmm/wfs"\n                            layers="owl_l"\n                            max-resolution="4"\n                        ></vl-map-wfs-layer>\n                    </vl-map-modify-action>\n                    <vl-map-layer-style border-size="2"></vl-map-layer-style>\n                    <vl-map-layer-circle-style border-size="2"></vl-map-layer-circle-style>\n                </vl-map-features-layer>\n            </vl-map>\n        `;\n})',...d.parameters?.docs?.source}}};let h=["MapModifyActionDefault","MapModifyActionSnapping"]},"../../libs/map/src/actions/layer/composite-vector-layer.ts":(e,t,r)=>{r.d(t,{E:()=>n});var a=r("../../node_modules/ol/layer/Vector.js"),s=r("../../libs/map/src/actions/source/composite-vector-source.ts");class n extends a.A{constructor(e,t={}){super({title:t.title,source:new s.C(e.map(e=>e.getSource())),updateWhileAnimating:!0,updateWhileInteracting:!0,minResolution:e.map(e=>e.getMinResolution()).reduce((e,t)=>Math.min(e,t)),maxResolution:e.map(e=>e.getMaxResolution()).reduce((e,t)=>Math.max(e,t))})}}},"../../libs/map/src/actions/mapaction.ts":(e,t,r)=>{r.d(t,{W:()=>a});class a{constructor(e){Array.isArray(e)||(e=[e]),this._interactions=[],e.forEach(e=>{this.addInteraction(e)})}get layer(){return this._layer}set layer(e){this._layer=e}get interactions(){return this._interactions}set interactions(e){this._interactions=e}addInteraction(e){e.setActive(!1),this._interactions.push(e)}activate(){this._interactions.forEach(e=>{e.setActive(!0)})}deactivate(){this._interactions.forEach(e=>{e.setActive(!1)})}getControl(){return this.map.getActionControlWithIdentifier(this.element.identifier)}}},"../../libs/map/src/actions/modify/modify-action.ts":(e,t,r)=>{r.d(t,{P:()=>i});var a=r("../../node_modules/ol/interaction/Modify.js"),s=r("../../libs/map/src/actions/snap/snap-interaction.ts"),n=r("../../libs/map/src/actions/select/select-action.ts");class i extends n.D{constructor(e,t,r={}){if(super(e,null,{filter:r.filter}),this.options=r,this.modifyInteraction=new a.A({features:this.selectInteraction.getFeatures()}),this.addInteraction(this.modifyInteraction),r&&r.snapping){let t={...r.snapping};t.layer?this.addInteraction(new s.N(t.layer.getSource(),r.snapping)):this.addInteraction(new s.N(e.getSource(),r.snapping))}this.modifyInteraction.on("modifystart",e=>{let t=e.features.getArray()[0].getGeometry();this.currentGeometryBeingModified=t.clone()}),this.modifyInteraction.on("modifyend",e=>{e.features.forEach(e=>{t(e,e=>{e.setGeometry(this.currentGeometryBeingModified)})})})}activate(){this.options.snapping&&this.options.snapping.layer&&this.map.addLayer(this.options.snapping.layer),super.activate()}deactivate(){this.options.snapping&&this.options.snapping.layer&&this.map.removeLayer(this.options.snapping.layer),super.deactivate()}}},"../../libs/map/src/actions/select/select-action.ts":(e,t,r)=>{r.d(t,{D:()=>o});var a=r("../../node_modules/ol/Feature.js"),s=r("../../node_modules/ol/events/condition.js"),n=r("../../node_modules/ol/interaction/Select.js"),i=r("../../libs/map/src/actions/mapaction.ts");class o extends i.W{constructor(e,t,r){let a=r&&r.cluster,i=r&&r.filter?r.filter:()=>!0,o=r?r.style:null,l=r&&r.hoverStyle||o,c=Array.isArray(e)?e:[e],u=(e,t)=>(this.selectInteraction.getFeatures().clear(),this.filter(e,t)),p=(e,t)=>{let r=-1!==this.selectInteraction.getFeatures().getArray().indexOf(e);return this.filter(e,t)&&!r},y=new n.A({filter:p,condition:s.N1,style:l,layers:c}),m=new n.A({condition:s.Zm,style:o,layers:c}),d=new n.A({filter:u,condition:s.jM,style:o,layers:c,multi:!0});super([m,d,y]),this._selectHandler=e=>{this.markInteraction.getFeatures().clear(),this.selectInteraction.getFeatures().getLength()>0?1===this.selectInteraction.getFeatures().getLength()?this.selectedFeature=this.selectInteraction.getFeatures().getArray()[0]:this.selectedFeature=(e=>{let t=e.getArray().indexOf(this.selectedFeature)+1;return t>e.getLength()-1&&(t=0),e.getArray()[t]})(this.selectInteraction.getFeatures()):this.selectedFeature=null,this._onSelectHandler(e),this.map.render()},this._onSelectHandler=e=>{this.onSelect&&(this.selectedFeature?this.onSelect(this.selectedFeature,e,this.getLayer()):this.onSelect())},this.cluster=a,this.filter=i,this.layer=e,this.style=o,this.hoverStyle=l,this.hoverInteraction=y,this.markInteraction=m,this.selectInteraction=d,this.hoverInteraction.on("select",()=>{let e=this.map.getTargetElement();this.hoverInteraction.getFeatures().getLength()>0?e.style.cursor="pointer":e.style.cursor="",this.map.render()}),this.selectedFeature=null,this.getLayer=()=>e,this.onSelect=t,this.selectInteraction.on("select",this._selectHandler),this.selectInteractionFilter=u,this.hoverInteractionFilter=p}_fixClusterBehavior(){if(this.selectedFeature){let e=this.selectedFeature.get("features")||[this.selectedFeature];this.selectInteraction.getFeatures().clear(),this.markInteraction.getFeatures().clear(),e&&e.forEach(e=>{e.getId()&&this.markFeatureWithId(e.getId())})}}getClusterWithFeatureId(e,t){for(let r=0;r<e.length;r++){let a=e[r].get("features");if(a&&this.getFeatureById(a,t))return e[r]}}getFeatureById(e,t){for(let r=0;r<e.length;r++)if(e[r].getId()===t)return e[r]}clearFeatures(){this.selectInteraction.getFeatures().clear(),this.markInteraction.getFeatures().clear(),this.hoverInteraction.getFeatures().clear()}activate(){this.cluster&&this.map&&(this._fixClusterBehaviorListener=()=>this._fixClusterBehavior(),this.map.on("moveend",this._fixClusterBehaviorListener),this.selectInteraction.on("select",this._fixClusterBehaviorListener)),super.activate()}deactivate(){this._fixClusterBehaviorListener&&(this.map.un("moveend",this._fixClusterBehaviorListener),this.selectInteraction.un("select",this._fixClusterBehaviorListener)),this.clearFeatures(),super.deactivate()}selectFeature(e){this.selectInteraction.getFeatures().push(e),this.selectInteraction.dispatchEvent({type:"select",feature:e})}getSelectedFeatures(){return this.selectInteraction.getFeatures()}deselect(){this.selectedFeature=null}markFeatureWithId(e,t){let r=(t=t||this.layer).getSource().getFeatureById(e)||this.getClusterWithFeatureId(t.getSource().getFeatures(),e);r&&r instanceof a.A&&-1===this.markInteraction.getFeatures().getArray().indexOf(r)&&this.markInteraction.getFeatures().push(r)}isMarked(e){let t=!1;return this.markInteraction.getFeatures().forEach(r=>{r===e&&(t=!0)}),t}demarkAllFeatures(){this.markInteraction.getFeatures().clear()}}},"../../libs/map/src/actions/snap/snap-interaction.ts":(e,t,r)=>{r.d(t,{N:()=>s});var a=r("../../node_modules/ol/interaction/Snap.js");class s extends a.A{constructor(e,t={}){let r={...t};r.source=e,r.pixelTolerance=t.pixelTolerance||7,super(r)}}},"../../libs/map/src/actions/source/composite-vector-source.ts":(e,t,r)=>{r.d(t,{C:()=>n});var a=r("../../node_modules/ol/source/Vector.js"),s=r("../../node_modules/ol/loadingstrategy.js");class n extends a.A{constructor(e){super({strategy:s.Qk,loader:(t,r,a)=>{Promise.all(e.map(e=>fetch(e.getUrl()(t,r,a)).then(e=>e.text()))).then(t=>{t.forEach((t,r)=>{let a=e[r].getFormat().readFeatures(t);this.addFeatures(a)})})}}),this.__sources=e}get sources(){return this.__sources}}},"../../libs/map/src/components/action/layer-action/modify-action/vl-map-modify-action.ts":(e,t,r)=>{var a=r("../../libs/common/src/index.ts"),s=r("../../libs/map/src/actions/layer/composite-vector-layer.ts"),n=r("../../libs/map/src/actions/modify/modify-action.ts"),i=r("../../libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts"),o=r("../../libs/map/src/components/action/layer-action/vl-map-layer-action.ts");class l extends o.c{static get _observedAttributes(){return["snapping","snapping-pixel-tolerance"]}disconnectedCallback(){this.__removeSnappingLayerStyleChangedEventListener()}onModify(e){this.__callback=e}appliesTo(e,t){return!0}_createAction(e){let t={snapping:this.__snappingOptions,filter:this.appliesTo.bind(this)};return new n.P(e,this._callback,t)}_snappingChangedCallback(){this._processAction()}_snappingPixelToleranceChangedCallback(){this._processAction()}get __snappingOptions(){return void 0===this.getAttribute("snapping")||!(this.__snappingLayers.length>0)||{layer:this.__createSnappingLayer(),pixelTolerance:this.getAttribute("snapping-pixel-tolerance")||10,node:!1,vertex:!1}}__createSnappingLayer(){return this.__snappingLayer=new s.E(this.__snappingLayers.map(e=>e._layer),{}),this.__addSnappingLayerStyleChangedEventListener(),this.__snappingLayer}__addSnappingLayerStyleChangedEventListener(){if(this.__snappingLayers&&this.__snappingLayers.length>0){let e=this.__snappingLayers[0];this.__snappingLayer.setStyle(e.style),this.__onSnappingLayerStyleChanged=e=>this.__snappingLayer.setStyle(e.target.style),e.addEventListener(i.P.EVENTS.styleChanged,this.__onSnappingLayerStyleChanged)}}__removeSnappingLayerStyleChangedEventListener(){this.__snappingLayers&&this.__snappingLayers.length>0&&this.__snappingLayers[0].removeEventListener(i.P.EVENTS.styleChanged,this.__onSnappingLayerStyleChanged)}get __snappingLayers(){return Array.from(this.querySelectorAll("vl-map-wfs-layer"))}}l=function(e,t,r,a){var s,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.M1)("vl-map-modify-action")],l)},"../../libs/map/src/components/action/layer-action/vl-map-layer-action.ts":(e,t,r)=>{r.d(t,{c:()=>n});var a=r("../../libs/common/src/index.ts"),s=r("../../libs/map/src/components/action/vl-map-action.ts");class n extends s.P{static get _observedAttributes(){return["layer"]}connectedCallback(){return this._layerChangedCallback(),super.connectedCallback()}get layer(){return this._layer}set layer(e){this._layer=e,this._processAction()}get _layerElement(){return this._mapElement.querySelector(`[is-layer][name="${this.getAttribute("layer")}"]`)||this.closest("[is-layer]")}_layerChangedCallback(){this._layerElement&&(this.layer=this._layerElement.layer)}_processAction(e){this._mapElement.ready.then(()=>{this._action&&this._mapElement.removeAction(this._action),this.layer&&(this._action=this._createAction(this.layer),super._processAction()),e&&(this._action=this._createAction(e),super._processAction())})}}n=function(e,t,r,a){var s,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.M1)("vl-map-layer-action")],n)},"../../libs/map/src/components/action/stories/vl-map-action.stories-arg.ts":(e,t,r)=>{r.d(t,{S:()=>n,g:()=>s});var a=r("../../resources/utils-storybook/index.ts");let s={...a.D8,active:!1,defaultActive:!1,layer:""},n={...a.RN,active:{name:"active",description:"Controleert de actieve status van de actie.",table:{type:{summary:a.QE.BOOLEAN},category:a.R6.PROPERTIES,defaultValue:{summary:s.active}}},defaultActive:{name:"default-active",description:"Zet de actie default op actief.",table:{type:{summary:a.QE.BOOLEAN},category:a.R6.ATTRIBUTES,defaultValue:{summary:s.active}}},layer:{name:"layer",description:"Linkt de actie aan een kaartlaag.<br>Geef hier het name attribuut van de kaartlaag mee.<br>Wordt gebruikt als de actie niet binnen een kaartlaag element staat.",control:{disable:!0},table:{type:{summary:a.QE.STRING},category:a.R6.ATTRIBUTES}}}},"../../libs/map/src/components/action/vl-map-action.ts":(e,t,r)=>{r.d(t,{P:()=>s});var a=r("../../libs/common/src/index.ts");class s extends a.F9{constructor(){super(),this._active=!1,this._controlledActive=!1}connectedCallback(){super.connectedCallback(),this.__defineLayer()}static isVlMapAction(){return!0}get action(){return this._action}get _mapElement(){return this.closest("vl-map")}get _defaultActive(){return this.hasAttribute("default-active")}get _callback(){return(...e)=>this.__callback?this.__callback(...e):null}get _layerElement(){return console.warn("_layerElement implementation is missing"),null}get active(){return this._controlledActive}set active(e){this._controlledActive=e,e?this.activate():this.deactivate()}get layer(){return this._layer}set layer(e){this._layer=e}activate(){this.action&&this.action.layer.get("visible")&&this._mapElement.changeActiveAction(this.action)}deactivate(){if(this.action&&this.action===this._mapElement.activeAction){let e=this.action!==this._mapElement.defaultAction,t=this._mapElement.defaultAction&&this._mapElement.defaultAction.layer.get("visible");this._mapElement.changeActiveAction(e&&t&&this._mapElement.defaultAction)}}_createAction(e){return console.warn("_createAction implementation is missing"),null}_processAction(){this.action&&(this.action.element=this,this._mapElement.addAction(this.action),(this._defaultActive&&!this._mapElement.activeAction||this.active)&&this.activate())}__defineLayer(){this._layerElement&&(this.layer=this._layerElement.layer)}reset(){this._active=!1}}s=function(e,t,r,a){var s,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.M1)("vl-map-action")],s)},"../../libs/map/src/components/baselayer/vl-map-base-layer-grb-gray/vl-map-base-layer-grb-gray.ts":(e,t,r)=>{r.d(t,{L:()=>n});var a=r("../../libs/common/src/index.ts"),s=r("../../libs/map/src/components/baselayer/vl-map-base-layer.ts");class n extends s.j{constructor(){super(),this.url="https://geo.api.vlaanderen.be/GRB/wmts",this.layer="grb_bsk_grijs",this.title="GRB basis laag grijs"}}n=function(e,t,r,a){var s,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.M1)("vl-map-baselayer-grb-gray")],n)},"../../libs/map/src/components/layer-style/vl-map-layer-circle-style/vl-map-layer-circle-style.ts":(e,t,r)=>{r.d(t,{t:()=>c});var a=r("../../libs/common/src/index.ts"),s=r("../../node_modules/ol/style/Circle.js"),n=r("../../node_modules/ol/style/Fill.js"),i=r("../../node_modules/ol/style/Stroke.js"),o=r("../../node_modules/ol/style/Style.js"),l=r("../../libs/map/src/components/layer-style/vl-map-layer-style.ts");class c extends l.t{get size(){return Number(this.getAttribute("size"))||5}get borderColor(){return this.getAttribute("border-color")||"rgba(0, 0, 0, 0)"}get borderSize(){return this.getAttribute("border-size")||1}get clusterTextColor(){return this.getAttribute("cluster-text-color")||"#FFF"}get clusterColor(){return this.getAttribute("cluster-color")||"rgba(2, 85, 204, 1)"}get clusterMultiplier(){let e=Number(this.getAttribute("cluster-multiplier"));return isNaN(e)||0===e?1:e}get _styleFunction(){return(e,t)=>{let r=e&&e.get&&e.get("features")||[],{textColor:a,color:l,borderColor:c,borderSize:u}=this,p=r.length||1,y=Math.max(1.5,p.toString().length),m=1===p?1:this.clusterMultiplier*y,d=this.size*m;if(this.parentElement&&this.parentElement.cluster){if(this._hasUniqueStyles(r)){let e=r[0].getStyle();e instanceof Function&&(e=e());let t=e.getImage();l=t.getFill().getColor(),c=t.getStroke().getColor(),u=t.getStroke().getWidth(),d=p>1?t.getRadius()*m:t.getRadius()}else this._containsStyle(r)&&(l=this.clusterColor,a=this.clusterTextColor)}return new o.Ay({image:new s.A({fill:new n.A({color:l}),stroke:new i.A({color:c,width:Number(u)}),radius:d}),text:this._getTextStyle(e,a),zIndex:this._featureZIndex(e)})}}get featureLabelFunction(){return e=>{let t=e&&e.get&&e.get("features")||[];if(Array.isArray(t)&&t.length>0){let e=t.length||1;return e>1?e.toString():this.__getFeatureText(t[0])}return this.__getFeatureText(e)}}__getFeatureText(e){return this.textFeatureAttributeName&&this.textFeatureAttributeName?e.get(this.textFeatureAttributeName):""}}c=function(e,t,r,a){var s,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.M1)("vl-map-layer-circle-style")],c)},"../../libs/map/src/components/layer/vector-layer/vl-map-features-layer/vl-map-features-layer.ts":(e,t,r)=>{var a=r("../../libs/common/src/index.ts"),s=r("../../node_modules/ol/format/GeoJSON.js"),n=r("../../node_modules/ol/geom/Point.js"),i=r("../../node_modules/ol/source/Cluster.js"),o=r("../../node_modules/ol/source/Vector.js"),l=r("../../libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts");class c extends l.P{static get _observedAttributes(){return l.P._observedAttributes.concat(["auto-extent","features"])}constructor(){super()}init(){this._geoJSON=new s.A,this._source=this.__createSource(),this._layer=this._createLayer()}async connectedCallback(){this.init(),await super.connectedCallback(),this._autoZoomToExtent()}get features(){return this.__featuresSource?this.__featuresSource.getFeatures():this._featuresFromAttribute}get _featuresFromAttribute(){let e=this.getAttribute("features");return e?this.__readGeoJsonFeatures(e):[]}set features(e){this.setAttribute("features",JSON.stringify(e))}get _autoExtent(){return void 0!=this.getAttribute("auto-extent")}get _autoExtentMaxZoom(){return this.getAttribute("auto-extent-max-zoom")}get cluster(){return void 0!=this.getAttribute("cluster")}get _clusterDistance(){return this.getAttribute("cluster-distance")}removeFeaturesStyle(){this.__featuresSource&&this.__featuresSource.getFeatures()&&this.__featuresSource.getFeatures().forEach(e=>{e.setStyle(null)})}getFeature(e){if(this.__featuresSource&&this.__featuresSource.getFeatures())return this.__featuresSource.getFeatures().filter(t=>t.getId()===e)[0]}getCluster(e){if(this._layer)return this._layer.getSource().getFeatures().filter(t=>{let r=t.get("features");return!!r&&r.some(t=>t.getId()===e)})[0]}async zoomToExtent(e){this.mapElement&&this.boundingBox&&this.mapElement.zoomTo(this.boundingBox,e)}clearFeatures(){this.__featuresSource&&(this.__featuresSource.clear(),this._featuresChanged())}addFeature(e){this.__featuresSource&&(this.__featuresSource.addFeatures([this._geoJSON.readFeature(e)]),this._featuresChanged())}addFeatureCollection(e){this.__featuresSource&&(this.__featuresSource.addFeatures(this._geoJSON.readFeatures(e)),this._featuresChanged())}_autoExtentChangedCallback(){this._autoZoomToExtent()}_featuresChangedCallback(e,t){t&&this._layer&&(this.__featuresSource.clear(),this.__featuresSource.addFeatures(this.__readGeoJsonFeatures(t)),this._featuresChanged())}_featuresChanged(){this._autoZoomToExtent(),this.rerender()}_autoZoomToExtent(){this._autoExtent&&this.zoomToExtent(this._autoExtentMaxZoom)}get boundingBox(){if(this.__featuresSource&&this.__featuresSource.getFeatures().length>0)return this.__featuresSource.getExtent()}__createSource(){let e=new o.A({features:this.features});return this.cluster?this.__createClusterSource(e):e}__createClusterSource(e){return new i.A({distance:this._clusterDistance,source:e,geometryFunction:e=>{let t=e.getGeometry();return t instanceof n.A?t:this.__ignoreClustering()}})}get __featuresSource(){return this.cluster&&this.source?this.source.getSource():this.source}__ignoreClustering(){return null}__readGeoJsonFeatures(e){return this._geoJSON.readFeatures(e)}}c=function(e,t,r,a){var s,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.M1)("vl-map-features-layer")],c)},"../../libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts":(e,t,r)=>{r.d(t,{P:()=>i});var a=r("../../node_modules/ol/layer/Vector.js"),s=r("../../libs/map/src/components/layer-style/vl-map-layer-style.ts"),n=r("../../libs/map/src/components/layer/vl-map-layer.ts");class i extends n.M{static get EVENTS(){return{styleChanged:"style-changed"}}constructor(){super(),this.pendingLayerStyles=[],this._styles=[]}async connectedCallback(){await super.connectedCallback(),this.applyPendingStyles()}get style(){return this.layer?.getStyle()||null}set style(e){this._layer?this.applyStyle(e):this.pendingLayerStyles=[...this.pendingLayerStyles,e]}applyStyle(e){e instanceof s.t?(this._styles.push(e),this._layer.setStyle(e=>this._styles.map(t=>t.style(e)).filter(e=>null!=e))):(this._styles=[],this._layer.setStyle(e)),this.dispatchEvent(new CustomEvent(i.EVENTS.styleChanged,{bubbles:!0,composed:!0,detail:{style:e}}))}_createLayer(){let e=new a.A({title:this._name,source:this._source,updateWhileAnimating:!0,updateWhileInteracting:!0,minResolution:this._minResolution,maxResolution:this._maxResolution,visible:this._visible,opacity:this._opacity});return e.set("id",n.M._counter),e}applyPendingStyles(){this._layer&&(this.pendingLayerStyles?.forEach(e=>this.applyStyle(e)),this.pendingLayerStyles=[])}}},"../../libs/map/src/components/layer/vector-layer/vl-map-wfs-layer/vl-map-wfs-layer.ts":(e,t,r)=>{var a=r("../../libs/common/src/index.ts"),s=r("../../node_modules/ol/format/GML2.js"),n=r("../../node_modules/ol/loadingstrategy.js"),i=r("../../node_modules/ol/source/Vector.js"),o=r("../../libs/map/src/components/layer/vector-layer/vl-map-vector-layer.ts");class l extends o.P{connectedCallback(){return this._source=this.__createSource(),this._layer=this._createLayer(),super.connectedCallback()}get _url(){let e=this.getAttribute("url");if(!e)throw Error("URL not defined");return new URL(e)}get _layers(){let e=this.getAttribute("layers");if(!e)throw Error("Layers not defined");return e}__createSource(){return new i.A({format:this.__sourceFormat,strategy:this.__loadingStrategy,url:this.__getWfsUrl.bind(this)})}__getWfsUrl(e,t,r){let a=this._url,{searchParams:s}=a;return s.set("service","WFS"),s.set("request","GetFeature"),s.set("typename",this._layers),s.set("bbox",e.join(",")),s.set("srsname",r.getCode()),s.set("outputFormat",this.__wfsOutputFormat),s.set("version",this.__wfsVersion),a}get __loadingStrategy(){return n.Qk}get __sourceFormat(){return new s.A}get __wfsOutputFormat(){return"GML2"}get __wfsVersion(){return"2.0.0"}}l=function(e,t,r,a){var s,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.M1)("vl-map-wfs-layer")],l)}}]);